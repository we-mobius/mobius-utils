{"version":3,"sources":["webpack://@we-mobius/mobius-utils/./node_modules/axios/index.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/adapters/xhr.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/axios.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/cancel/Cancel.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/cancel/CancelToken.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/cancel/isCancel.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/Axios.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/InterceptorManager.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/buildFullPath.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/createError.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/dispatchRequest.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/enhanceError.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/mergeConfig.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/settle.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/core/transformData.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/defaults.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/bind.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/buildURL.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/combineURLs.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/cookies.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/isAxiosError.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/helpers/spread.js","webpack://@we-mobius/mobius-utils/./node_modules/axios/lib/utils.js","webpack://@we-mobius/mobius-utils/webpack/bootstrap","webpack://@we-mobius/mobius-utils/webpack/runtime/define property getters","webpack://@we-mobius/mobius-utils/webpack/runtime/hasOwnProperty shorthand","webpack://@we-mobius/mobius-utils/webpack/runtime/make namespace object","webpack://@we-mobius/mobius-utils/./src/es/internal/base.js","webpack://@we-mobius/mobius-utils/./src/es/functional/helpers.js","webpack://@we-mobius/mobius-utils/./src/es/functional/combinators.js","webpack://@we-mobius/mobius-utils/./src/es/internal/array.js","webpack://@we-mobius/mobius-utils/./src/es/functional/_private.js","webpack://@we-mobius/mobius-utils/./src/es/functional/either.monad.js","webpack://@we-mobius/mobius-utils/./src/es/internal/boolean.js","webpack://@we-mobius/mobius-utils/./src/es/functional/maybe.monad.js","webpack://@we-mobius/mobius-utils/./src/es/functional/identity.monad.js","webpack://@we-mobius/mobius-utils/./src/es/functional/io.monad.js","webpack://@we-mobius/mobius-utils/./src/es/functional/task.monad.js","webpack://@we-mobius/mobius-utils/./src/es/functional/monads.js","webpack://@we-mobius/mobius-utils/./src/es/internal/date.js","webpack://@we-mobius/mobius-utils/./src/es/internal/string.js","webpack://@we-mobius/mobius-utils/./src/es/internal/object.js","webpack://@we-mobius/mobius-utils/./src/es/internal/function.js","webpack://@we-mobius/mobius-utils/./src/es/internal/number.js","webpack://@we-mobius/mobius-utils/./src/es/internal/regexp.js","webpack://@we-mobius/mobius-utils/./src/es/internal/hybrid.js","webpack://@we-mobius/mobius-utils/./src/es/external/unique.js","webpack://@we-mobius/mobius-utils/./src/es/external/class.js","webpack://@we-mobius/mobius-utils/./src/es/external/path.js","webpack://@we-mobius/mobius-utils/./src/es/external/response.js","webpack://@we-mobius/mobius-utils/./src/es/external/environment.js","webpack://@we-mobius/mobius-utils/./src/es/external/request.js","webpack://@we-mobius/mobius-utils/./src/es/external/struct.js","webpack://@we-mobius/mobius-utils/./src/es/external/debug.js","webpack://@we-mobius/mobius-utils/./src/es/atom/meta.js","webpack://@we-mobius/mobius-utils/./src/es/atom/atoms/base.atom.js","webpack://@we-mobius/mobius-utils/./src/es/atom/atoms/mutation.atom.js","webpack://@we-mobius/mobius-utils/./src/es/atom/atoms/data.atom.js","webpack://@we-mobius/mobius-utils/./src/es/atom/mediators/base.mediators.js","webpack://@we-mobius/mobius-utils/./src/es/atom/mediators/replay.mediators.js","webpack://@we-mobius/mobius-utils/./src/es/atom/mediators/trigger.mediators.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers/hybrid-create.helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers/derive-create.helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers/normal-create.helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers/transform.helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers/batch-create.helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/helpers.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/filter.taches.js","webpack://@we-mobius/mobius-utils/./src/es/external/event.js","webpack://@we-mobius/mobius-utils/./src/es/external/dom.js","webpack://@we-mobius/mobius-utils/./src/es/external/app.js","webpack://@we-mobius/mobius-utils/./src/es/external/scope.js","webpack://@we-mobius/mobius-utils/./src/es/atom/mediators/flat.mediators.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/base.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/nilToVoid.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/partition.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/defaultTo.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/pluck.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/map.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/startWith.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/emptyStartWith.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/debounce.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/throttle.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/withHistory.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/switch.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/distinctPrevious.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/distinctEver.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/skip.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/skipUntil.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/skipWhile.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/take.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/takeUntil.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/takeWhile.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/iif.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/case.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/combine.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/combineLatest.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/merge.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/zip.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/withLatestFrom.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/effect.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/taches/tap.taches.js","webpack://@we-mobius/mobius-utils/./src/es/atom/drivers/base.drivers.js","webpack://@we-mobius/mobius-utils/./src/es/semantic.js"],"names":["module","exports","utils","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","data","requestHeaders","headers","isFormData","request","XMLHttpRequest","auth","username","password","unescape","encodeURIComponent","Authorization","btoa","fullPath","baseURL","url","open","method","toUpperCase","params","paramsSerializer","timeout","onreadystatechange","readyState","status","responseURL","indexOf","responseHeaders","getAllResponseHeaders","response","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","isStandardBrowserEnv","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","forEach","val","key","toLowerCase","setRequestHeader","isUndefined","e","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","bind","Axios","mergeConfig","createInstance","defaultConfig","context","instance","prototype","extend","axios","create","instanceConfig","defaults","Cancel","CancelToken","isCancel","all","promises","spread","isAxiosError","default","message","this","toString","__CANCEL__","executor","TypeError","resolvePromise","token","reason","throwIfRequested","source","c","value","InterceptorManager","dispatchRequest","interceptors","arguments","chain","interceptor","unshift","fulfilled","rejected","push","length","shift","getUri","replace","handlers","use","eject","id","fn","h","isAbsoluteURL","combineURLs","requestedURL","enhanceError","code","error","Error","transformData","throwIfCancellationRequested","transformRequest","merge","common","adapter","transformResponse","toJSON","name","description","number","fileName","lineNumber","columnNumber","stack","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","target","isPlainObject","isArray","slice","mergeDeepProperties","prop","axiosKeys","concat","otherKeys","Object","keys","filter","validateStatus","fns","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","process","call","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","JSON","stringify","parse","maxContentLength","maxBodyLength","thisArg","args","Array","i","apply","encode","serializedParams","parts","v","isDate","toISOString","join","hashmarkIndex","relativeURL","write","expires","path","domain","secure","cookie","isNumber","Date","toGMTString","isString","document","match","RegExp","decodeURIComponent","remove","now","test","payload","originURL","msie","navigator","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","window","location","requestURL","parsed","normalizedName","ignoreDuplicateOf","split","line","trim","substr","callback","arr","getPrototypeOf","isFunction","obj","l","hasOwnProperty","constructor","FormData","ArrayBuffer","isView","pipe","URLSearchParams","product","result","assignValue","a","b","str","stripBOM","content","charCodeAt","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","o","defineProperty","enumerable","get","r","Symbol","toStringTag","isDefined","variable","isGeneralObject","tar","isBoolean","boo","num","isSymbol","symbol","isNull","date","getTime","isMap","map","isWeakMap","weakMap","isSet","set","isWeakSet","weakSet","isRegExp","regex","isPromise","isAsyncFn","isGeneratorFunction","isAsyncGeneratorFunction","isError","err","isEmptyStr","isEmptyArr","isEmptyObj","isOutDated","isWindow","isDocument","isEventTarget","EventTarget","isIterable","iterator","isObservable","subscribe","isEmpty","asIs","asUndefined","asNull","noop","_complement","compose","x","argPlaceholder","isArgPlaceholder","placeholder","looseCurryS","args2","curryS","targetNum","internalLooseCurry","filled","innerArgs","innerArg","extraArgs","looseCurry","internalCurry","validArgs","curry","internalCurryN","n","curryN","internalLooseCurryN","looseCurryN","composeL","reduce","g","f","composeR","reverse","pipeL","pipeR","memorize","hasher","cache","invokerFactory","curryFn","invoker","looseInvoker","nAry","looseNAry","binary","y","looseBinary","unary","looseUnary","tap","identity","omega","constant","always","kite","flip","applyTo","thrush","vireo","duplication","substitution","substitution2","converge","compose2","psi","composeB","Z","toArray","shuffle","j","Math","floor","random","includes","every","some","flat","item","pop","unique","Set","union","intersection","arr1","arr2","lookupArr","_longer","filteredArr","_shorter","inspect","t","k","kv","String","inspectTerm","Either","_value","Right","Left","ap","cata","sequence","of","traverse","mfn","left","right","either","isLeft","and","or","not","complement","isTrue","isFalse","isTruthy","isFalsy","isNil","isNotNil","strictEquals","v1","v2","equals","looseEquals","ifElse","pred","when","unless","iif","cond","Maybe","just","Just","Nothing","nothing","super","orJust","orElse","dlft","maybeMonad","safe","maybe","m","isNothing","Identity","IO","run","perform","performUnsafeIO","io","mIO","Task","fork","mx","isFunctor","isMonad","isApplicative","isMonoid","liftN","fnArgsLen","lifted","lift","liftA2","liftA3","liftA4","liftA5","maybeToEither","eitherToMaybe","UNITS_DICT","year","month","week","day","hour","minute","second","millisecond","UNITS_MILLI_DICT","humanize","timestamp","res","milliseconds","trimRight","trimLeft","isStartWith","isAllSpace","_randomPacket","randomString","chars","packet","propEq","entries","values","truthyKeys","truthyValues","assign","assignTo","defaultProps","getPathArray","getRes","getByPath","emptifyObj","deepCopyViaJSON","deepCopy","newObj","hardDeepMerge","targetValue","sourceValue","smartDeepMerge","iife","once","called","debounce","ms","timer","waiting","clearTimeout","setTimeout","async","throttle","isCalling","waitFn","throttleTime","packing","range","oData","isEven","isOdd","maxTo","max","minTo","min","minOf","maxOf","between","isPhoneNum","isTelNum","isQQId","isEmailAddress","filterTruthy","filterFalsy","allPass","tests","anyPass","_fingerPrint","makeUniqueString","seed","fingerPrint","neatenClassStr","classStrToArr","s","classArrToObj","Infinity","acc","cur","classStrToObj","classObjToArr","classArrToStr","classObjToStr","toClassStr","toClassArr","toClassObj","formatClassTo","cls","prefixClassWith","prefix","classArr","removePrefixOfClass","addClass","added","addedClassObj","resClassObj","removeClass","removed","removedClassObj","toggleClass","toggled","toggledClassArr","targetClassObj","replaceClass","replaced","prev","replacedArr","containClass","contained","containedClassArr","targetClassArr","removeRepetition","index","removeRepetitionOf","ofList","removeRepetitionExcept","exceptList","removeRepetitionOfEmpty","removeRepetitionOfSlash","neatenPathname","pathnameToArray","neatedPathname","pathnameToString","isPathnameStrictEqual","pathname1","pathname2","isPathnameLooseEqual","preCook","isPathnameEqual","mode","pathnames","neatenSearch","neatenQueryStr","substring","queryStrToQueryObj","queryObjToQueryStr","searchToQueryStr","searchToQueryObj","queryStrToSearch","queryObjToSearch","toSearch","sth","toQueryStr","toQueryObj","makeBaseResponse","code_message","status_message","formatResponseMakerFlattenArgs","arg","isResponse","isResponseCode","makeSuccessResponse","makeFailResponse","makeErrorResponse","makeUnknownResponse","makeSuccessResponseF","makeFailResponseF","makeErrorResponseF","makeUnknownResponseF","propStatusEq","hasValidResponseCode","isSuccessResponse","isFailResponse","isErrorResponse","isUnknowResponse","DEFAULT_SUCCESS_RESPONSE_CODE","DEFAULT_FAIL_RESPONSE_CODE","DEFAULT_ERROR_RESPONSE_CODE","DEFAULT_UNKNOWN_RESPONSE_CODE","formatSuccessResponse","formatFailResponse","formatErrorResponse","formatUnknownResponse","formatResponse","isInWXMINA","wx","canIUse","isInWeb","isInBrowser","isInNode","global","wxmina","adaptMultiPlatform","webFn","nodeFn","wxminaFn","defaultFn","adaptMultiPlatformAwait","_commonDefaultConfig","biu","_","_useAxios","catch","dataType","header","success","fail","withDataExtracted","type","actualData","responseModifier","modifyBiuConfig","asPostRequest","asGetRequest","withJSONContent","withoutCredentials","struct","validatorMaker","isValid","detail","boolean","string","array","object","is","perf","round","performance","stdLineLog","file","fnName","makeTigerLogger","textGen","text","appends","makeLinedTigerLogger","isDatar","isMutator","isVoid","isTerminator","isVacuo","Void","VOID","Terminator","TERMINATOR","Vacuo","internalVacuo","VACUO","Datar","mutator","options","_options","fill","fillEmpty","fillAuto","operation","checkOperation","isValidOperationTarget","Mutator","datar","liftBoth","liftLeft","liftRight","prevDatar","isAtom","BaseAtom","isMutation","Mutation","_mutator","_consumers","empty","liftType","isLifted","origin_operation","consumer","add","unsubscribe","delete","trigger","triggerOperation","observe","isData","mutate","beObservedBy","_data","_datar","_tempMutator","registerTrigger","forceWrap","Data","triggerValue","mutation","_mutation","_tempDatar","isMediator","BaseMediator","atom","_atom","release","isReplayMediator","ReplayMediator","replayTime","_history","setReplayTime","_subscribeController","_setHistory","autoTrigger","_mediator","_replayTime","abs","replayTo","replay","subscribeController","replayWithoutLatest","replayWithLatest","isTriggerMediator","TriggerMediator","_map","WeakMap","_add","controller","_remove","register","removeAll","successFlag","withMediator","mediator","withReplayMediator","withTriggerMediator","createDataWithReplayMediator","createMutationWithReplayMediator","createDataWithTriggerMediator","createMutationWithTriggerMediator","createDataWithReplay","replayMediator","createMutationWithReplay","createDataWithTrigger","triggerMediator","createMutationWithTrigger","createIterableTrigger","iterable","handler","autoStart","repeatable","iterateState","times","done","internalTriggers","WeakSet","iterate","internalTrigger","start","formatIterableTriggerCreatorFlatArgs","argsKeyList","createIterableTriggerF","createDataFromIterable","createMutationFromIterable","createEventTrigger","listener","removeEventListener","formatEventTriggerCreatorFlatArgs","createEventTriggerF","createDataFromEvent","createMutationFromEvent","createIntervalTrigger","step","interval","started","startInterval","setInterval","clearInterval","formatIntervalTriggerCreatorFlatArgs","createIntervalTriggerF","createDataFromInterval","createMutationFromInterval","createTimeoutTrigger","formatTimeoutTriggerCreatorFlatArgs","createTimeoutTriggerF","createDataFromTimeout","createMutationFromTimeout","createObservableTrigger","observable","subscription","formatObservableTriggerCreatorFlatArgs","createObservableTriggerF","createDataFromObservable","createMutationFromObservable","createFunctionTrigger","agent","shouldEmit","emitFunction","pause","formatFunctionTriggerCreatorFlatArgs","createFunctionTriggerF","createDataFromFunction","createMutationFromFunction","createEmptyData","createEmptyMutation","createDataOf","createMutationOf","ofLift","createMutationOfLL","ofLiftLeft","createMutationOfLR","ofLiftRight","createMutationOfLB","ofLiftBoth","DEFAULT_MUTATION_OPTIONS","mutationToDataS","mutationToData","transform","_data2","dataToData","atomToData","dataToMutationS","dataToMutation","mutationToMutation","atomToMutation","forceWrapToData","wrapToData","createDataInArray","wrapFn","createDataInObject","forceWrapToMutation","wrapToMutation","createMutationInArray","createMutationInObject","forceWrapToAtom","wrapToAtom","createAtomInArray","createAtomInObject","getAtomType","isSameTypeOfAtom","tarA","tarB","isSameTypeOfMediator","pipeAtom","idx","composeAtom","binaryTweenPipeAtom","upstreamAtom","downstreamAtom","tweenAtom","binaryTweenComposeAtom","nAryTweenPipeAtom","nAryTweenComposeAtom","binaryLiftPipeAtom","binaryLiftComposeAtom","nAryLiftPipeAtom","nAryLiftComposeAtom","binaryHyperPipeAtom","binaryHyperComposeAtom","nAryHyperPipeAtom","nAryHyperComposeAtom","filterT","staticFilterT","dynamicFilterT","wrapPredM","wrappedPredD","wrapTargetM","wrappedTargetD","filterM","_internalStates","_internalValues","outputD","domLoadedD","domLoadedRD","windowLoadedD","windowLoadedRD","readyStateD","readyStateRD","interactiveStateD","interactiveStateRD","completeStateD","completeStateRD","windowResizeD","windowResizeRD","windowD","windowRD","documentD","documentRD","injectScript","src","onload","removeAfterLoad","script","parentNode","removeChild","head","appendChild","makeCustomEvent","CustomEvent","eventType","pollingToGetNode","selector","node","querySelector","getElementById","GLOBAL_VARS","Map","globalVar","makeEventHandler","eventHandler","makeGeneralEventHandler","_elementBasedMessageProxyMap","makeElementBasedMessageProxy","proxy","ele","tempEle","style","display","body","_proxy","onymousInnerMessageD","onymousSendM","from","dispatchEvent","anonymousSendM","sendedD","element","innerMessageD","sender","onymousSender","anonymousSender","namedReceiver","to","receiver","broadReceiver","anonymousReceiver","customizeReveiver","receive","receiveDetail","SCOPE_MANAGERS","createScopeManager","creator","scopeMap","promiseMap","getCreator","getOptions","isRegisteredScope","scope","releaseScope","releaseManager","isStray","strayFlag","flag","registerScope","_scope","_instance","_params","getInstance","acceptPromise","_promise","makeScopeManager","manager","isFlatMediator","FlatMediator","flattedD","_origin_atom","_connection","autoConnect","connect","asIsM","prevD","subscribeController1","subscribeController2","tempData","disconnect","withValueFlatted","createGeneralTache","createOptions","tacheOptions","prepareMidpiece","prepareTacheLevelContexts","prepareOptions","prepareInput","_0","_1","any","prepareOutput","inputs","midpieces","outputs","tacheLevelContexts","sources","useGeneralTache","tacheMaker","tache","createSSTache","createSMTache","createObjectSMTache","createArraySMTache","configArr","mutations","output","configObj","createMSTache","sourcesType","createArrayMSTache","createObjectMSTache","numberOfSources","acceptNonAtom","opCustomizeType","opLiftType","autoUpdateContexts","wrapMutations","wrappedDatas","trunkM","baseContexts","contexts","actualOperation","states","wrapMutation","newSources","datas","keysOfSources","createMMTache","nilToVoidT","transM","partitionT","defaultToT","dft","dynamicDefautToT","staticDefaultToT","wrapDftM","wrappedDftD","defaultM","pluckT","staticPluckT","dynamicPluckT","wrapSelectorM","wrappedSelectorD","pluckM","mapT","staticMapT","dynamicMapT","wrapMapM","wrappedMapD","mapM","startWithT","dynamicStartWithT","staticStartWithT","wrapStartM","wrappedStartD","startM","startExpired","targetQueue","emptyStartWithT","dynamicEmptyStartWithT","staticEmptyStartWithT","debounceTimeT","staticDebounceTimeT","dynamicDebounceTimeT","wrapTimerM","wrappedTimerD","debounceM","clock","throttleTimeT","staticThrottleTimeT","dynamicThrottleTimeT","throttleM","canEmit","withHistoryT","withStaticHistoryT","withDynamicHistoryT","wrapNumM","parseInt","wrappedNumD","withHistoryM","history","pairwiseT","truthyPairwiseT","switchTacheFactory","mutationFactory","wrapToM","wrappedToD","wrapFromM","wrappedFromD","switchM","switchT","dynamicSwitchT","staticSwitchT","promiseSwitchT","distinctPreviousT","staticDistinctPreviousT","dynamicDistinctPreviousT","wrapTransformM","wrappedTransformD","distinctM","previous","asIsDistinctPreviousT","distinctEverT","staticDistinctEverT","dynamicDistinctEverT","transformed","asIsDistinctEverT","skipT","staticSkipT","dynamicSkipT","skipM","skiped","skipUntilT","wrapCondM","wrappedCondD","_intervalValues","skipWhileT","Boolean","takeT","staticTakeT","dynamicTakeT","takeM","taked","takeUntilT","takeWhileT","iifT","trueTarget","falseTarget","staticIifT","dynamicIifT","wrapTrueTargetM","wrappedTrueTargetD","wrapFalseTargetM","wrappedFalseTargetD","caseT","preds","cases","objectCaseT","arrayCaseT","staticArrayCaseT","dynamicArrayCaseT","wrapPredMutations","wrapCaseMutations","wrappedPredDatas","wrappedCaseDatas","caseM","case","matched","len","staticObjectCaseT","dynamicObjectCaseT","size","combineT","arrayCombineT","objectCombineT","atoms","inputAtoms","combineM","combineLatestT","arrayCombineLatestT","objectCombineLatestT","mergeT","mergeM","zipLatestT","arrayZipLatestT","objectZipLatestT","inputDatas","zipM","_internalState","withLatestFromT","wrapSourceM","wrappedSourceD","withLatestFromM","effectT","effect","staticEffectT","dynamicEffectT","wrapEffectM","wrappedEffectD","effectM","_returned","hasSetReturned","returned","tapT","tapValueT","level","LOG","INFO","WARN","ERROR","0","1","2","3","stringified","createGeneralDriver","prepareSingletonLevelContexts","prepareDriverLevelContexts","prepareInstance","singletonLevelContexts","driverLevelContexts","formatInterfaces","interfaces","connectInterfaces","up","down","normalize","useGeneralDriver","driver","driverOptions","driverInterfaces","innerInputs","innerOutputs","others","outerInputs","outerOutputs","semantic","equiped","equip"],"mappings":"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","file":"index.js","sourcesContent":["module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const isDefined = variable => typeof variable !== 'undefined'\r\n\r\nexport const isGeneralObject = tar => typeof tar === 'object'\r\n\r\n// @see: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types\r\nexport const isBoolean = boo => Object.prototype.toString.call(boo) === '[object Boolean]'\r\nexport const isString = str => Object.prototype.toString.call(str) === '[object String]'\r\nexport const isNumber = num => Object.prototype.toString.call(num) === '[object Number]'\r\nexport const isSymbol = symbol => Object.prototype.toString.call(symbol) === '[object Symbol]'\r\nexport const isUndefined = val => Object.prototype.toString.call(val) === '[object Undefined]'\r\nexport const isNull = val => Object.prototype.toString.call(val) === '[object Null]'\r\nexport const isFunction = fn => fn && Object.prototype.toString.call(fn) === '[object Function]'\r\nexport const isDate = date =>\r\n  date && Object.prototype.toString.call(new Date(date)) === '[object Date]' && !!new Date(date).getTime()\r\nexport const isObject = obj => Object.prototype.toString.call(obj) === '[object Object]'\r\nexport const isArray = arr => Object.prototype.toString.call(arr) === '[object Array]'\r\nexport const isMap = map => Object.prototype.toString.call(map) === '[object Map]'\r\nexport const isWeakMap = weakMap => Object.prototype.toString.call(weakMap) === '[object WeakMap]'\r\nexport const isSet = set => Object.prototype.toString.call(set) === '[object Set]'\r\nexport const isWeakSet = weakSet => Object.prototype.toString.call(weakSet) === '[object WeakSet]'\r\nexport const isRegExp = regex => Object.prototype.toString.call(regex) === '[object RegExp]'\r\nexport const isPromise = obj => Object.prototype.toString.call(obj) === '[object Promise]'\r\nexport const isAsyncFn = fn => Object.prototype.toString.call(fn) === '[object AsyncFunction]'\r\nexport const isGeneratorFunction = fn =>\r\n  Object.prototype.toString.call(fn) === '[object GeneratorFunction]'\r\nexport const isAsyncGeneratorFunction = fn =>\r\n  Object.prototype.toString.call(fn) === '[object AsyncGeneratorFunction]'\r\nexport const isError = err => Object.prototype.toString.call(err) === '[object Error]'\r\nexport const isEmptyStr = str => isString(str) && str.length === 0\r\nexport const isEmptyArr = arr => isArray(arr) && arr.length === 0\r\nexport const isEmptyObj = obj => isObject(obj) && Object.keys(obj).length === 0\r\nexport const isOutDated = date => isDate(date) && new Date(date).getTime() < new Date().getTime()\r\n\r\nexport const isWindow = obj => Object.prototype.toString.call(obj) === '[object Window]'\r\nexport const isDocument = obj => Object.prototype.toString.call(document) === '[object HTMLDocument]'\r\n// refer: https://developer.mozilla.org/zh-CN/docs/Web/API/Event\r\nexport const isEventTarget = obj => obj instanceof EventTarget\r\nexport const isIterable = tar => Object.prototype.toString.call(tar[Symbol.iterator]) === 'object Function'\r\n\r\nexport const isObservable = obj => isObject(obj) && (obj.isObservable || isFunction(obj.subscribe))\r\n\r\n// - `null` and `undefined` are considered empty values\r\n// - `''` is the empty value for String\r\n// - `[]` is the empty value for Array\r\n// - `{}` is the empty value for Object\r\nexport const isEmpty = val =>\r\n  isNull(val) || isUndefined(val) || isEmptyStr(val) || isEmptyArr(val) || isEmptyObj(val) || (isObject(val) && val.isEmpty)\r\n\r\nexport const asIs = v => v\r\nexport const asUndefined = v => undefined\r\nexport const asNull = v => null\r\nexport const noop = v => {}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\r\n","// use '../internal/base.js' instead of '../internal.js' to avoid ↓\r\n//   - ReferenceError: Cannot access '***' before initialization\r\n//   - because some of internal modules import the \"../functional.js\"\r\nimport { asIs, isObject, isFunction } from '../internal/base.js'\r\n\r\n// NOTE: 重复实现了 boolean.js 中的 complement 以避免循环引用\r\nconst _complement = fn => compose(x => !x, fn)\r\n\r\nexport const argPlaceholder = {\r\n  // compatible with ramda.js\r\n  '@@functional/placeholder': true,\r\n  isArgPlaceholder: true\r\n}\r\nexport const isArgPlaceholder = placeholder =>\r\n  isObject(placeholder) && Object.prototype.hasOwnProperty.call(placeholder, 'isArgPlaceholder') && placeholder.isArgPlaceholder\r\n\r\n// loose curry will pass all of the args it received to target function,\r\n// even if the arg's num greater than initial N\r\nexport const looseCurryS = (fn, ...args) => {\r\n  if (args.length >= fn.length) {\r\n    return fn(...args)\r\n  } else {\r\n    return (...args2) => looseCurryS(fn, ...args, ...args2)\r\n  }\r\n}\r\nexport const curryS = (fn, ...args) => {\r\n  const targetNum = fn.length\r\n  if (args.length >= targetNum) {\r\n    return fn(...args.slice(0, targetNum))\r\n  } else {\r\n    return (...args2) => curryS(fn, ...args, ...args2)\r\n  }\r\n}\r\n\r\n// loose curry will pass all of the args it received to target function,\r\n// even if the arg's num greater than initial N\r\nexport const internalLooseCurry = (fn, filled, ...args) => {\r\n  let innerArgs = filled || []\r\n  innerArgs = innerArgs.map(innerArg => isArgPlaceholder(innerArg) ? (args.length > 0 ? args.shift() : innerArg) : innerArg)\r\n  innerArgs = innerArgs.concat(args)\r\n  const targetNum = fn.length\r\n  const validArgs = innerArgs.slice(0, targetNum)\r\n  const validLen = validArgs.filter(_complement(isArgPlaceholder)).length\r\n  if (validLen >= targetNum) {\r\n    return fn(...innerArgs)\r\n  } else {\r\n    return (...extraArgs) => internalLooseCurry(fn, innerArgs, ...extraArgs)\r\n  }\r\n}\r\nexport const looseCurry = (fn, ...args) => internalLooseCurry(fn, [], ...args)\r\nexport const internalCurry = (fn, filled, ...args) => {\r\n  let innerArgs = filled || []\r\n  innerArgs = innerArgs.map(innerArg => isArgPlaceholder(innerArg) ? (args.length > 0 ? args.shift() : innerArg) : innerArg)\r\n  innerArgs = innerArgs.concat(args)\r\n  const targetNum = fn.length\r\n  const validArgs = innerArgs.slice(0, targetNum)\r\n  const validLen = validArgs.filter(_complement(isArgPlaceholder)).length\r\n  if (validLen >= targetNum) {\r\n    return fn(...validArgs)\r\n  } else {\r\n    return (...extraArgs) => internalCurry(fn, validArgs, ...extraArgs)\r\n  }\r\n}\r\nexport const curry = (fn, ...args) => internalCurry(fn, [], ...args)\r\n\r\n// loose curry will pass all of the args it received to target function,\r\n// even if the arg's num greater than initial N\r\nexport const internalCurryN = (n, fn, filled, ...args) => {\r\n  let innerArgs = filled || []\r\n  innerArgs = innerArgs.map(innerArg => isArgPlaceholder(innerArg) ? (args.length > 0 ? args.shift() : innerArg) : innerArg)\r\n  innerArgs = innerArgs.concat(args)\r\n  const validArgs = innerArgs.slice(0, n)\r\n  const validLen = validArgs.filter(_complement(isArgPlaceholder)).length\r\n  if (validLen >= n) {\r\n    return fn(...validArgs)\r\n  } else {\r\n    return (...args2) => internalCurryN(n, fn, validArgs, ...args2)\r\n  }\r\n}\r\nexport const curryN = (n, fn, ...args) => internalCurryN(n, fn, [], ...args)\r\n// export const curry1 = (fn, ...args) => internalCurryN(1, fn, [], ...args) // just for consistency\r\n// export const curry2 = (fn, ...args) => internalCurryN(2, fn, [], ...args)\r\n// ...\r\nexport const internalLooseCurryN = (n, fn, filled, ...args) => {\r\n  let innerArgs = filled || []\r\n  innerArgs = innerArgs.map(innerArg => isArgPlaceholder(innerArg) ? (args.length > 0 ? args.shift() : innerArg) : innerArg)\r\n  innerArgs = innerArgs.concat(args)\r\n  const validArgsLen = innerArgs.slice(0, n).filter(_complement(isArgPlaceholder)).length\r\n  if (validArgsLen >= n) {\r\n    return fn(...innerArgs)\r\n  } else {\r\n    return (...extraArgs) => internalLooseCurryN(n, fn, innerArgs, ...extraArgs)\r\n  }\r\n}\r\n/**\r\n * @return { function | any }\r\n */\r\nexport const looseCurryN = (n, fn, ...args) => internalLooseCurryN(n, fn, [], ...args)\r\n\r\n// NOTE: 另外一种 compose 实现\r\n// @see: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight\r\n// const compose = (...args) => value => args.reduceRight((acc, fn) => fn(acc), value)\r\n// 本质是一个闭包，直觉上不喜欢（虽然能够带来一些调试上的好处）\r\n//   -> @see: https://www.freecodecamp.org/news/pipe-and-compose-in-javascript-5b04004ac937/\r\n// 下面这种更符合函数式思维，实现上更接近数学定义\r\nexport const composeL = (...fns) => fns.reduce((g, f) => (...args) => f(g(...args)), fns.shift() || asIs)\r\nexport const composeR = (...fns) => composeL(...fns.reverse())\r\nexport const pipeL = composeR\r\nexport const pipeR = composeL\r\nexport const compose = composeR\r\nexport const pipe = composeL\r\n\r\nexport const memorize = (fn, hasher) => {\r\n  const cache = {}\r\n  hasher = hasher || ((...args) => JSON.stringify(args))\r\n  return (...args) => {\r\n    const hash = hasher(args)\r\n    if (!cache[hash]) {\r\n      cache[hash] = fn.apply(this, args)\r\n    }\r\n    return cache[hash]\r\n  }\r\n}\r\n\r\nconst invokerFactory = curryFn => (n, key) => curryFn(n, (...args) => {\r\n  // curry function controlls how many args will be passed in\r\n  const target = args[args.length - 1]\r\n  if (!target[key]) throw Error(`Can not find \"${key}\" method in target.'`)\r\n  if (!isFunction(target[key])) throw Error(`\"${key}\" property in target is not a function.`)\r\n  return target[key](...args.slice(0, args.length - 1))\r\n})\r\nexport const invoker = invokerFactory(curryN)\r\nexport const looseInvoker = invokerFactory(looseCurryN)\r\n\r\nexport const nAry = curry((n, fn) => curryN(n, fn))\r\nexport const looseNAry = curry((n, fn) => looseCurryN(n, fn))\r\nexport const binary = fn => curry((x, y) => fn(x, y)) // nAry(2, fn)\r\nexport const looseBinary = fn => looseCurry((x, y, ...args) => fn(x, y, ...args)) // looseNAry(2, fn)\r\nexport const unary = fn => x => fn(x)\r\nexport const looseUnary = fn => (x, ...args) => fn(x, ...args)\r\n\r\nexport const tap = fn => (...args) => {\r\n  fn(...args)\r\n  return args[0]\r\n}\r\n/*\r\n                  arguments num controller & curry test\r\n*/\r\n// const add = (x, y, z) => { console.log(x, y, z) }\r\n// unary(add)(1, 2, 3) // 1, undefined, undefined\r\n// binary(add)(1, 2, 3) // 1, 2, undefined\r\n// nAry(1, add)(1, 2, 3) // 1, undefined, undefined\r\n// nAry(2, add)(1, 2, 3) // 1, 2, undefined\r\n// nAry(3, add)(1, 2, 3) // 1, 2, 3\r\n// looseUnary(add)(1, 2, 3) // 1, 2, 3\r\n// looseBinary(add)(1, 2, 3) // 1, 2, 3\r\n// looseNAry(1, add)(1, 2, 3) // 1, 2, 3\r\n// looseNAry(2, add)(1, 2, 3) // 1, 2, 3\r\n// looseNAry(3, add)(1, 2, 3) // 1, 2, 3\r\n\r\n// const gg = (a, b) => {\r\n//   console.warn(a, b)\r\n// }\r\n\r\n// const ff = (a, b) => {\r\n//   curry(gg)(a)\r\n// }\r\n\r\n// ff(1)\r\n","import { curryN, curry } from './helpers.js'\r\n\r\n// @ref: https://www.youtube.com/watch?v=3VQ382QG-y4\r\n// A combinator is a function with no free variables.\r\n//   -> 函数体中所有的变量都来自于参数\r\n//   -> isCombinator: x => x, x => y => x\r\n//   -> isNotCombinator: x => y, x => x * y\r\n\r\n// @ref: https://gist.github.com/Avaq/1f0636ec5c8d6aed2e45\r\n// @ref: https://crocks.dev/docs/functions/combinators.html\r\n\r\n// I\r\n// @Haskell: id\r\n// @use: identity\r\n// identity :: a -> a\r\nexport const identity = x => x\r\n\r\n// O, omega\r\n// @use: self-application\r\n// O :: f -> f\r\nexport const omega = f => f(f)\r\n\r\n// K, Kestrel\r\n// @Haskell: const\r\n// @use: true, first, const\r\n// constant :: a -> b -> a\r\nexport const constant = x => () => x\r\nexport const always = constant\r\n\r\n// KI, Kite = KI = CK\r\n// @Haskell: const id\r\n// derived from: constant(identity)\r\n// @use: false, second\r\n// kite :: a -> b -> b\r\nexport const kite = a => b => b\r\n\r\n// C, Cardinal\r\n// @Haskell: flip\r\n// @use: reverse arguments\r\n// flip :: (a -> b -> c) -> b -> a -> c\r\nexport const flip = curryN(3, (f, x, y) => curry(f)(y)(x))\r\n\r\n// apply :: (a -> b) -> a -> b\r\nexport const apply = curryN(2, (f, x) => f(x))\r\n\r\n// T, Thrush = CI\r\n// @Haskell: flip id\r\n// @use: hold an argument\r\n// thrush :: a -> (a -> b) -> b\r\nexport const applyTo = curryN(2, (x, f) => f(x))\r\nexport const thrush = applyTo\r\n\r\n// V, Vireo = BCT\r\n// @Haskell: flip . flip id\r\n// @use: hold a pair of args\r\n// vireo :: a -> b -> (a -> b -> c) -> c\r\nexport const vireo = curryN(3, (x, y, f) => curry(f)(x)(y))\r\n\r\n// W, join\r\n// duplication :: (a -> a -> b) -> a -> b\r\nexport const duplication = curryN(2, (f, x) => curry(f)(x)(x))\r\n\r\n// substitution :: (a -> b -> c) -> (a - b) -> a -> c\r\nexport const substitution = curryN(3, (f, g, x) => curry(f)(x)(g(x)))\r\n// sustitution2 :: (a -> b -> c) -> (b -> a) -> b -> c\r\nexport const substitution2 = curryN(3, (f, g, x) => curry(f)(g(x))(x))\r\n\r\n// converge :: (b -> c -> d) -> (a -> b) -> (a -> c) -> a -> d\r\nexport const converge = curryN(4, (f, g, h, x) => curry(f)(g(x))(h(x)))\r\n\r\n// compose2 ::  (c -> d -> e) -> (a -> c) -> (b -> d) -> a -> b -> e\r\nexport const compose2 = curryN(5, (f, g, h, x, y) => curry(f)(g(x))(h(y)))\r\n\r\n// on\r\n// psi :: (b → b → c) → (a → b) → a → a → c\r\nexport const psi = curryN(4, (f, g, x, y) => curry(f)(g(x))(g(y)))\r\n\r\n// B, Bluebird\r\n// @Haskell: (.)\r\n// @use: composition\r\n// composeB :: (b -> c) -> (a -> b) -> a -> c\r\nexport const composeB = curryN(3, (f, g, x) => f(g(x)))\r\n\r\n// Y :: (a -> a) -> a\r\n// export const Y = fixPoint = ...\r\n// ! Can not build in JavaScript\r\n\r\n// Z\r\n// Y Combinator's variation in JavaScript\r\nexport const Z = g => (f => g((...args) => f(f)(...args)))(f => g((...args) => f(f)(...args)))\r\n// const f = g => n => n === 0 ? 1 : n * g(n - 1)\r\n// console.log(Z(f)(5))\r\n","import { invoker, curry, curryN, compose } from '../functional/helpers.js'\r\nimport { flip } from '../functional/combinators.js'\r\n\r\n// TODO: enhance\r\nexport const toArray = val => [...val]\r\n\r\n// @see: https://github.com/mqyqingfeng/Blog/issues/51\r\nexport const shuffle = a => {\r\n  a = [].concat(a)\r\n  for (let i = a.length; i; i--) {\r\n    const j = Math.floor(Math.random() * i);\r\n    [a[i - 1], a[j]] = [a[j], a[i - 1]]\r\n  }\r\n  return a\r\n}\r\n\r\nexport const includes = invoker(2, 'includes')\r\n\r\nexport const every = invoker(2, 'every')\r\nexport const map = invoker(2, 'map')\r\nexport const forEach = invoker(2, 'forEach')\r\nexport const filter = invoker(2, 'filter')\r\nexport const reject = curry((f, arr) => filter((...args) => !f(...args), arr))\r\nexport const reduce = invoker(3, 'reduce')\r\nexport const some = invoker(2, 'some')\r\nexport const flat = invoker(1, 'flat')\r\n\r\nexport const slice = invoker(3, 'slice')\r\nexport const join = invoker(2, 'join')\r\n\r\nexport const push = curry((item, arr) => {\r\n  arr = [...arr]\r\n  arr.push(item)\r\n  return arr\r\n})\r\nexport const pop = arr => {\r\n  arr = [...arr]\r\n  arr.pop()\r\n  return arr\r\n}\r\nexport const unshift = curry((item, arr) => {\r\n  arr = [...arr]\r\n  arr.unshift(item)\r\n  return arr\r\n})\r\nexport const shift = arr => {\r\n  arr = [...arr]\r\n  arr.shift()\r\n  return arr\r\n}\r\n\r\nexport const unique = arr => [...new Set(arr)]\r\n\r\nexport const concat = invoker(2, 'concat')\r\nexport const union = curryN(2, compose(unique, flip(concat)))\r\n\r\n// @see ramda, it is more efficient when the array length gap is large\r\nconst _longer = (arr1, arr2) => arr1.length > arr2.length ? arr1 : arr2\r\nconst _shorter = (arr1, arr2) => arr1.length > arr2.length ? arr2 : arr1\r\nexport const intersection = curry((arr1, arr2) => {\r\n  const lookupArr = _longer(arr1, arr2)\r\n  const filteredArr = _shorter(arr1, arr2)\r\n  return unique(filter(flip(includes)(lookupArr), filteredArr))\r\n})\r\n","export const inspect = (x) => {\r\n  if (x && typeof x.inspect === 'function') {\r\n    return x.inspect()\r\n  }\r\n\r\n  function inspectFn (f) {\r\n    return f.name ? f.name : f.toString()\r\n  }\r\n\r\n  function inspectTerm (t) {\r\n    switch (typeof t) {\r\n      case 'string':\r\n        return `'${t}'`\r\n      case 'object': {\r\n        const ts = Object.keys(t).map(k => [k, inspect(t[k])])\r\n        return `{${ts.map(kv => kv.join(': ')).join(', ')}}`\r\n      }\r\n      default:\r\n        return String(t)\r\n    }\r\n  }\r\n\r\n  function inspectArgs (args) {\r\n    return Array.isArray(args) ? `[${args.map(inspect).join(', ')}]` : inspectTerm(args)\r\n  }\r\n\r\n  return (typeof x === 'function') ? inspectFn(x) : inspectArgs(x)\r\n}\r\n","import { inspect } from './_private.js'\r\nimport { curry } from './helpers.js'\r\nimport { identity } from './combinators.js'\r\n// @ref: https://mostly-adequate.gitbooks.io/mostly-adequate-guide/\r\n\r\nexport class Either {\r\n  constructor (x) {\r\n    this._value = x\r\n  }\r\n\r\n  get value () {\r\n    return this._value\r\n  }\r\n\r\n  static of (x) {\r\n    return new Right(x)\r\n  }\r\n\r\n  static right (x) {\r\n    return new Right(x)\r\n  }\r\n\r\n  static left (x) {\r\n    return new Left(x)\r\n  }\r\n}\r\n\r\nexport class Left extends Either {\r\n  get isLeft () {\r\n    return true\r\n  }\r\n\r\n  get isRight () {\r\n    return false\r\n  }\r\n\r\n  static of (x) {\r\n    throw new Error('`of` called on class Left (value) instead of Either (type)')\r\n  }\r\n\r\n  inspect () {\r\n    return `Left(${inspect(this._value)})`\r\n  }\r\n\r\n  map () {\r\n    return this\r\n  }\r\n\r\n  join () {\r\n    return this\r\n  }\r\n\r\n  chain () {\r\n    return this\r\n  }\r\n\r\n  ap () {\r\n    return this\r\n  }\r\n\r\n  cata ({ Left, Right }) {\r\n    return Left(this._value)\r\n  }\r\n\r\n  // ----- Traversable (Either a)\r\n  sequence (of) {\r\n    return of(this)\r\n  }\r\n\r\n  traverse (of, fn) {\r\n    return of(this)\r\n  }\r\n}\r\n\r\nexport class Right extends Either {\r\n  get isLeft () {\r\n    return false\r\n  }\r\n\r\n  get isRight () {\r\n    return true\r\n  }\r\n\r\n  static of (x) {\r\n    throw new Error('`of` called on class Right (value) instead of Either (type)')\r\n  }\r\n\r\n  inspect () {\r\n    return `Right(${inspect(this._value)})`\r\n  }\r\n\r\n  map (fn) {\r\n    return Either.of(fn(this._value))\r\n  }\r\n\r\n  join () {\r\n    return this._value\r\n  }\r\n\r\n  chain (fn) {\r\n    return fn(this._value)\r\n  }\r\n\r\n  ap (mfn) {\r\n    return this.map(mfn._value)\r\n  }\r\n\r\n  cata ({ Left, Right }) {\r\n    return Right(this._value)\r\n  }\r\n\r\n  // ----- Traversable (Either a)\r\n  sequence (of) {\r\n    return this.traverse(of, identity)\r\n  }\r\n\r\n  traverse (of, fn) {\r\n    fn(this._value).map(Either.of)\r\n  }\r\n}\r\n\r\n// left :: a -> Either a b\r\nexport const left = a => new Left(a)\r\n// right :: b -> Either a b\r\nexport const right = b => new Right(b)\r\n\r\n// either :: (a -> c) -> (b -> c) -> Either a b -> c\r\nexport const either = curry((f, g, e) => {\r\n  if (e.isLeft) {\r\n    return f(e.value)\r\n  }\r\n  return g(e.value)\r\n})\r\n","import { compose, curry } from '../functional/helpers.js'\r\n\r\nexport const and = curry((x, y) => !!x && !!y)\r\nexport const or = curry((x, y) => !!x || !!y)\r\nexport const not = x => !x\r\nexport const complement = fn => compose(not, fn)\r\n\r\nexport const isTrue = v => v === true\r\nexport const isFalse = v => v === false\r\n\r\n// @see https://developer.mozilla.org/en-US/docs/Glossary/Truthy\r\nexport const isTruthy = v => !!v === true\r\nexport const isFalsy = v => !!v === false\r\nexport const isNil = v => v === null || v === undefined\r\nexport const isNotNil = complement(isNil)\r\n\r\nexport const strictEquals = curry((v1, v2) => v1 === v2)\r\nexport const equals = strictEquals\r\n// eslint-disable-next-line eqeqeq\r\nexport const looseEquals = curry((v1, v2) => v1 == v2)\r\n\r\nexport const ifElse = curry((pred, f, g, x) => pred(x) ? f(x) : g(x))\r\nexport const when = curry((pred, f, x) => pred(x) ? f(x) : x)\r\nexport const unless = curry((pred, f, x) => !pred(x) ? f(x) : x)\r\nexport const iif = curry((cond, x, y) => cond ? x : y)\r\n","import { inspect } from './_private.js'\r\nimport { isNull, isUndefined, isEmpty, isFalsy, isNil } from '../internal.js'\r\n\r\nimport { invoker, curry } from './helpers.js'\r\n\r\n/**\r\n * Custom Maybe Monad used in FP in JS book written in ES6\r\n * Author: Luis Atencio\r\n * Customized by cigaret.\r\n * ref: https://stackoverflow.com/questions/50512370/folktale-fantasyland-maybe-not-working-as-expected/57552439#57552439\r\n * comment: Just\\Some\r\n */\r\nexport class Maybe {\r\n  static of (a) {\r\n    return Maybe.just(a)\r\n  }\r\n\r\n  static just (a) {\r\n    return new Just(a)\r\n  }\r\n\r\n  static nothing () {\r\n    return new Nothing()\r\n  }\r\n\r\n  static fromNullable (a) {\r\n    return isNull(a) ? Maybe.nothing() : Maybe.just(a)\r\n  }\r\n\r\n  static fromUndefinedable (a) {\r\n    return isUndefined(a) ? Maybe.nothing() : Maybe.just(a)\r\n  }\r\n\r\n  static fromFalsyable (a) {\r\n    return isFalsy(a) ? Maybe.nothing() : Maybe.just(a)\r\n  }\r\n\r\n  static fromNilable (a) {\r\n    return isNil(a) ? Maybe.nothing() : Maybe.just(a)\r\n  }\r\n\r\n  static fromEmptyable (a) {\r\n    return isEmpty(a) ? Maybe.nothing() : Maybe.just(a)\r\n  }\r\n\r\n  get isNothing () {\r\n    return false\r\n  }\r\n\r\n  get isJust () {\r\n    return false\r\n  }\r\n\r\n  get isMaybe () {\r\n    return true\r\n  }\r\n}\r\n\r\n// Derived class Just -> Presence of a value\r\n// Or named `Some` in some other monad implements\r\nexport class Just extends Maybe {\r\n  constructor (value) {\r\n    super()\r\n    this._value = value\r\n  }\r\n\r\n  get value () {\r\n    return this._value\r\n  }\r\n\r\n  get isJust () {\r\n    return true\r\n  }\r\n\r\n  get isNothing () {\r\n    return false\r\n  }\r\n\r\n  inspect () {\r\n    return `Maybe.Just(${inspect(this._value)})`\r\n  }\r\n\r\n  map (fn) {\r\n    return Maybe.just(fn(this._value))\r\n  }\r\n\r\n  join () {\r\n    return this._value\r\n  }\r\n\r\n  chain (fn) {\r\n    return fn(this._value)\r\n  }\r\n\r\n  ap (mfn) {\r\n    return this.map(mfn._value)\r\n  }\r\n\r\n  orJust () {\r\n    return this\r\n  }\r\n\r\n  orElse () {\r\n    return this\r\n  }\r\n\r\n  filter (fn) {\r\n    return fn(this._value) ? this : Maybe.nothing()\r\n  }\r\n\r\n  cata ({ Just, Nothing }) {\r\n    return Just(this._value)\r\n  }\r\n}\r\n\r\n// Derived class Empty -> Abscense of a value\r\nexport class Nothing extends Maybe {\r\n  get value () {\r\n    throw new TypeError(\"Can't extract the value of a Nothing.\")\r\n  }\r\n\r\n  get isNothing () {\r\n    return true\r\n  }\r\n\r\n  get isJust () {\r\n    return false\r\n  }\r\n\r\n  inspect () {\r\n    return 'Maybe.Nothing'\r\n  }\r\n\r\n  map (fn) {\r\n    return this\r\n  }\r\n\r\n  join () {\r\n    return this\r\n  }\r\n\r\n  chain (fn) {\r\n    return this\r\n  }\r\n\r\n  ap (mfn) {\r\n    return this\r\n  }\r\n\r\n  orJust (dlft) {\r\n    return Maybe.of(dlft)\r\n  }\r\n\r\n  orElse (maybeMonad) {\r\n    return maybeMonad\r\n  }\r\n\r\n  filter () {\r\n    return this\r\n  }\r\n\r\n  cata ({ Just, Nothing }) {\r\n    return Nothing()\r\n  }\r\n}\r\n\r\n// just :: Maybe a -> Just a\r\nexport const just = a => new Just(a)\r\n// nothing :: Maybe () -> Nothing\r\nexport const nothing = () => new Nothing()\r\n// @see: https://crocks.dev/docs/crocks/Maybe.html#safe\r\n// safe :: (a -> Boolean) -> a -> Maybe a\r\nexport const safe = curry((pred, val) => pred(val) ? just(val) : nothing())\r\n\r\n// helpers\r\nexport const orElse = invoker(2, 'orElse')\r\nexport const orJust = invoker(2, 'orJust')\r\n\r\n// maybe :: b -> (a -> b) -> Maybe a -> b\r\nexport const maybe = curry((v, f, m) => {\r\n  if (m.isNothing) {\r\n    return v\r\n  }\r\n  return f(m.value)\r\n})\r\n","import { inspect } from './_private.js'\r\nimport { identity } from './combinators.js'\r\n\r\nexport class Identity {\r\n  constructor (x) {\r\n    this._value = x\r\n  }\r\n\r\n  of (x) {\r\n    return new Identity(x)\r\n  }\r\n\r\n  get value () {\r\n    return this._value\r\n  }\r\n\r\n  get isIdentity () {\r\n    return true\r\n  }\r\n\r\n  inspect () {\r\n    return `Identity(${inspect(this._value)})`\r\n  }\r\n\r\n  map (fn) {\r\n    return Identity.of(fn(this._value))\r\n  }\r\n\r\n  join () {\r\n    return this._value\r\n  }\r\n\r\n  chain (fn) {\r\n    return fn(this._value)\r\n  }\r\n\r\n  // ----- Traversable Identity\r\n  sequence (of) {\r\n    return this.traverse(of, identity)\r\n  }\r\n\r\n  traverse (of, fn) {\r\n    return fn(this._value).map(Identity.of)\r\n  }\r\n}\r\n","import { inspect } from './_private.js'\r\nimport { isFunction } from '../internal.js'\r\nimport { constant } from './combinators.js'\r\nimport { compose, looseCurryN } from './helpers.js'\r\n\r\nexport class IO {\r\n  constructor (fn) {\r\n    if (!isFunction(fn)) {\r\n      throw new Error('IO requires a function.')\r\n    }\r\n    this._value = fn\r\n  }\r\n\r\n  static of (fn) {\r\n    return new IO(fn)\r\n  }\r\n\r\n  static const (x) {\r\n    return new IO(constant(x))\r\n  }\r\n\r\n  get isIO () {\r\n    return true\r\n  }\r\n\r\n  inspect () {\r\n    return `IO(${inspect(this._value)})`\r\n  }\r\n\r\n  run (...args) {\r\n    return this._value(...args)\r\n  }\r\n\r\n  perform (...args) {\r\n    return this._value(...args)\r\n  }\r\n\r\n  performUnsafeIO (...args) {\r\n    return this._value(...args)\r\n  }\r\n\r\n  map (fn) {\r\n    return new IO(compose(fn, this._value))\r\n  }\r\n\r\n  join () {\r\n    return new IO(() => this.performUnsafeIO().performUnsafeIO())\r\n  }\r\n\r\n  chain (fn) {\r\n    return this.map(fn).join()\r\n    // return new IO(() => fn(this.performUnsafeIO()).performUnsafeIO())\r\n    // return fn(this.performUnsafeIO())\r\n  }\r\n\r\n  // !\r\n  ap (mfn) {\r\n    return this.chain(mfn._value)\r\n  }\r\n}\r\n\r\n// creator\r\nexport const io = fn => new IO(fn)\r\n\r\n// helpers\r\nexport const run = looseCurryN(1, (mIO, ...args) => mIO.run(...args))\r\nexport const perform = looseCurryN(1, (mIO, ...args) => mIO.perform(...args))\r\nexport const performUnsafeIO = looseCurryN(1, (mIO, ...args) => mIO.performUnsafeIO(...args))\r\n","import { inspect } from './_private.js'\r\n\r\n// Task\\Continuation\\Lazy Promise\\Future\r\nexport class Task {\r\n  // ({ reject, resolve }) => resolve(a)\r\n  constructor (fn) {\r\n    this._value = fn\r\n  }\r\n\r\n  static of (x) {\r\n    return new Task(({ reject, resolve }) => resolve(x))\r\n  }\r\n\r\n  get isTask () {\r\n    return true\r\n  }\r\n\r\n  inspect () {\r\n    return `Task(${inspect(this._value)})`\r\n  }\r\n\r\n  fork ({ reject, resolve }) {\r\n    return this._value({ reject, resolve })\r\n  }\r\n\r\n  // fn :: a -> a\r\n  map (fn) {\r\n    return new Task(({ reject, resolve }) => this.fork({\r\n      reject: reject,\r\n      resolve: x => resolve(fn(x))\r\n    }))\r\n  }\r\n\r\n  join () {\r\n    return new Task(({ reject, resolve }) => this.fork({\r\n      reject: reject,\r\n      resolve: mx => mx.fork({\r\n        reject, resolve: x => resolve(x)\r\n      })\r\n    }))\r\n    // return this.chain(identity)\r\n  }\r\n\r\n  // fn :: a -> ma\r\n  chain (fn) {\r\n    return new Task(({ reject, resolve }) => this.fork({\r\n      reject: reject,\r\n      resolve: x => fn(x).fork({ reject, resolve })\r\n    }))\r\n  }\r\n\r\n  // mfn :: a -> a\r\n  ap (mfn) {\r\n    return this.map(mfn._value)\r\n  }\r\n}\r\n","import { reduce } from '../internal.js'\r\nimport { curry, curryN, invoker } from './helpers.js'\r\nimport { Either } from './either.monad.js'\r\nimport { Maybe } from './maybe.monad.js'\r\n\r\nexport * from './identity.monad.js'\r\nexport * from './maybe.monad.js'\r\nexport * from './either.monad.js'\r\nexport * from './io.monad.js'\r\nexport * from './task.monad.js'\r\n\r\n// predicate functions\r\n// @see https://crocks.dev/docs/functions/predicate-functions.html\r\nexport const isFunctor = m => {}\r\nexport const isMonad = m => {}\r\nexport const isApplicative = m => {}\r\nexport const isMonoid = m => {}\r\n// ……\r\n\r\n// point-free functions\r\nexport const of = invoker(2, 'of')\r\nexport const chain = invoker(2, 'chain')\r\nexport const ap = invoker(2, 'ap')\r\nexport const cata = invoker(1, 'cata')\r\n\r\n// helper functions\r\nexport const liftN = curry((fnArgsLen, fn) => {\r\n  const lifted = curryN(fnArgsLen, fn)\r\n  return curryN(fnArgsLen, (...args) => {\r\n    return reduce(ap, args[0].map(lifted), args.slice(1))\r\n  })\r\n})\r\nexport const lift = fn => liftN(fn.length, fn)\r\n// export const liftA2 = curry((f, a, b) => b.ap(a.map(f)))\r\n// export const liftA3 = curry((f, a, b, c) => c.ap(b.ap(a.map(f))))\r\nexport const liftA2 = liftN(2)\r\nexport const liftA3 = liftN(3)\r\nexport const liftA4 = liftN(4)\r\nexport const liftA5 = liftN(5)\r\n// ...\r\n\r\n// transformation functions\r\nexport const maybeToEither = (left, m) => {\r\n  if (m.isNothing) {\r\n    return Either.left(left)\r\n  }\r\n  return m.chain(Either.right)\r\n}\r\nexport const eitherToMaybe = e => {\r\n  if (e.isLeft) {\r\n    return Maybe.nothing()\r\n  }\r\n  return e.chain(Maybe.just)\r\n}\r\n","const UNITS_DICT = {\r\n  year: '年', month: '月', week: '周', day: '天', hour: '小时', minute: '分钟', second: '秒', millisecond: '毫秒'\r\n}\r\nconst UNITS_MILLI_DICT = {\r\n  year: 31557600000,\r\n  month: 2629800000,\r\n  week: 604800000,\r\n  day: 86400000,\r\n  hour: 3600000,\r\n  minute: 60000,\r\n  second: 1000,\r\n  millisecond: 1\r\n}\r\n\r\nexport const humanize = timestamp => {\r\n  let res = ''\r\n  const milliseconds = +new Date() - timestamp\r\n  for (const key in UNITS_MILLI_DICT) {\r\n    if (milliseconds >= UNITS_MILLI_DICT[key]) {\r\n      res = `${Math.floor(milliseconds / UNITS_MILLI_DICT[key])} ${UNITS_DICT[key]}前`\r\n      break\r\n    }\r\n  }\r\n  return res || '刚刚'\r\n}\r\n","import { invoker, curry } from '../functional/helpers.js'\r\n\r\nexport const toString = invoker(1, 'toString')\r\nexport const toLowerCase = invoker(1, 'toLowerCase')\r\nexport const toUpperCase = invoker(1, 'toUpperCase')\r\nexport const trim = invoker(1, 'trim')\r\nexport const trimRight = invoker(1, 'trimRight')\r\nexport const trimLeft = invoker(1, 'trimLeft')\r\nexport const indexOf = invoker(2, 'indexOf')\r\nexport const split = invoker(2, 'split')\r\nexport const replace = invoker(3, 'replace')\r\n\r\nexport const isStartWith = curry((substr, str) => indexOf(substr, str) === 0)\r\n\r\nexport const isAllSpace = str => !!trim(str)\r\n\r\nconst _randomPacket = {}\r\nexport const randomString = (length, chars) => {\r\n  let result = ''\r\n  chars = chars || '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\r\n  for (let i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)]\r\n  _randomPacket[length] = _randomPacket[length] || []\r\n  const packet = _randomPacket[length]\r\n  if (packet.includes(result)) {\r\n    return randomString()\r\n  } else {\r\n    packet.push(result)\r\n    return result\r\n  }\r\n}\r\n","import { curry, compose, curryN } from '../functional/helpers.js'\r\nimport { isArray, isObject } from './base.js'\r\nimport { isTruthy, isNil } from './boolean.js'\r\nimport { split, replace } from './string.js'\r\nimport { filter, reduce } from './array.js'\r\n\r\nexport const prop = curry((key, obj) => obj[key])\r\nexport const propEq = curry((prop, value, obj) => obj[prop] === value)\r\nexport const entries = Object.entries\r\nexport const keys = Object.keys\r\nexport const values = Object.values\r\nexport const truthyKeys = obj => entries(obj).filter(([k, v]) => !!v).map(([k, v]) => k)\r\nexport const truthyValues = obj => entries(obj).filter(([k, v]) => !!v).map(([k, v]) => v)\r\n\r\nexport const hasOwnProperty = curry((key, obj) => Object.prototype.hasOwnProperty.call(obj, key))\r\nexport const assign = curryN(2, (source, target) => target.assign(source))\r\nexport const assignTo = curryN(2, (target, source) => target.assign(source))\r\nexport const defaultProps = assign\r\n\r\n/**\r\n * @deprecated use getByPath instead\r\n */\r\n// @refer to: https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_get\r\n// NOTE: rawFn.length === 2\r\n// export const get = curry((obj, path, defaultValue = undefined) => {\r\nexport const get = curry((obj, path) => {\r\n  // getPathArray :: s -> [s]\r\n  const getPathArray = compose(filter(isTruthy), split(/[,[/\\].]+?/), replace(/['|\"]/g, ''))\r\n  // getRes :: [s] -> any\r\n  const getRes = reduce((res, path) => isNil(res) ? res : res[path], obj)\r\n\r\n  const result = getRes(getPathArray(path))\r\n\r\n  // return result === undefined || result === obj ? defaultValue : result\r\n  return result\r\n})\r\n\r\n/**\r\n * @param path String | Array\r\n * @param obj Object\r\n * @return Any\r\n */\r\nexport const getByPath = curry((path, obj) => {\r\n  const getPathArray = compose(filter(isTruthy), split(/[,./[\\]\\\\]/g), replace(/['|\"]/g, ''))\r\n  const getRes = reduce((res, path) => isNil(res) ? res : res[path], obj)\r\n  const result = getRes(getPathArray(path))\r\n  return result\r\n})\r\n\r\nexport const emptifyObj = obj => {\r\n  for (const key in obj) {\r\n    if (isObject(obj[key])) {\r\n      emptifyObj(obj[key])\r\n    } else {\r\n      delete obj[key]\r\n    }\r\n  }\r\n  return obj\r\n}\r\n\r\nexport const deepCopyViaJSON = (obj) => JSON.parse(JSON.stringify(obj))\r\n// @refer to: https://github.com/davidmarkclements/rfdc/blob/master/index.js\r\nexport const deepCopy = (obj) => {\r\n  if (!isObject(obj)) {\r\n    return obj\r\n  }\r\n  const newObj = isArray(obj) ? [] : {}\r\n  for (const key in obj) {\r\n    if (isObject(obj[key])) {\r\n      newObj[key] = deepCopy(obj[key])\r\n    } else {\r\n      newObj[key] = obj[key]\r\n    }\r\n  }\r\n  return newObj\r\n}\r\n\r\nexport const hardDeepMerge = curry((target, source) => {\r\n  if (!isObject(target) || !isObject(source)) {\r\n    return target\r\n  }\r\n\r\n  Object.keys(source).forEach(key => {\r\n    const targetValue = target[key]\r\n    const sourceValue = source[key]\r\n\r\n    if (isArray(targetValue) && isArray(sourceValue)) {\r\n      target[key] = deepCopy(sourceValue)\r\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\r\n      target[key] = hardDeepMerge(targetValue, sourceValue)\r\n    } else {\r\n      target[key] = sourceValue\r\n    }\r\n  })\r\n\r\n  return target\r\n})\r\n\r\nexport const smartDeepMerge = (target, source) => {\r\n  if (!isObject(target) || !isObject(source)) {\r\n    return target\r\n  }\r\n\r\n  Object.keys(source).forEach(key => {\r\n    const targetValue = target[key]\r\n    const sourceValue = source[key]\r\n\r\n    if (isArray(targetValue) && isArray(sourceValue)) {\r\n      target[key] = targetValue.concat(sourceValue)\r\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\r\n      target[key] = smartDeepMerge(targetValue, sourceValue)\r\n    } else {\r\n      target[key] = sourceValue\r\n    }\r\n  })\r\n\r\n  return target\r\n}\r\n\r\n// mapProps\r\n// omit\r\n// pick\r\n","import { hardDeepMerge } from './object.js'\r\n\r\n// ! unnecessary\r\n// // NOTE: call 接受不定长参数，无法进行一般柯里化\r\n// export const call = (f, ...args) => f(...args)\r\n// // apply :: (a -> b) -> a -> b\r\n// ! name conflict with `apply` in functional module which has different signature\r\n// export const apply = curry((f, args) => f(...args))\r\n\r\nexport const iife = (fn, ...args) => fn(...args)\r\n\r\nexport const once = fn => {\r\n  let called, result\r\n  return (...args) => {\r\n    if (!called) {\r\n      called = true\r\n      result = fn(...args)\r\n    }\r\n    return result\r\n  }\r\n}\r\n\r\nexport const debounce = (fn, ms) => {\r\n  let timer\r\n  let waiting = []\r\n  return () => {\r\n    clearTimeout(timer)\r\n    timer = setTimeout(async () => {\r\n      const res = await fn()\r\n      waiting.forEach(fn => {\r\n        fn(res)\r\n      })\r\n      waiting = []\r\n    }, ms)\r\n    return new Promise(resolve => {\r\n      waiting.push(resolve)\r\n    })\r\n  }\r\n}\r\n\r\nexport const throttle = (fn) => {\r\n  let isCalling = false\r\n  let waiting = []\r\n  return () => {\r\n    if (!isCalling) {\r\n      isCalling = true\r\n      Promise.resolve(fn()).then(res => {\r\n        waiting.forEach(waitFn => {\r\n          waitFn(res)\r\n        })\r\n        waiting = []\r\n        isCalling = false\r\n      })\r\n    }\r\n    return new Promise(resolve => {\r\n      waiting.push(resolve)\r\n    })\r\n  }\r\n}\r\n\r\nexport const throttleTime = (fn, ms) => {\r\n  let isCalling = false\r\n  let waiting = []\r\n  return () => {\r\n    if (!isCalling) {\r\n      isCalling = true\r\n      Promise.resolve(fn()).then(res => {\r\n        waiting.forEach(waitFn => {\r\n          waitFn(res)\r\n        })\r\n        waiting = []\r\n      })\r\n      setTimeout(() => {\r\n        isCalling = false\r\n      }, ms)\r\n    }\r\n    return new Promise(resolve => {\r\n      waiting.push(resolve)\r\n    })\r\n  }\r\n}\r\n\r\nexport const packing = (fn, range) => {\r\n  let timer\r\n  let waiting = []\r\n  let data = {}\r\n  return (oData) => {\r\n    clearTimeout(timer)\r\n    data = hardDeepMerge(data, oData)\r\n    timer = setTimeout(async () => {\r\n      const res = await fn(data)\r\n      waiting.forEach(waitFn => {\r\n        waitFn(res)\r\n      })\r\n      waiting = []\r\n    }, range)\r\n    return new Promise(resolve => {\r\n      waiting.push(resolve)\r\n    })\r\n  }\r\n}\r\n","import { curryN } from '../functional/helpers.js'\r\n\r\nexport const isEven = x => x % 2 === 0\r\nexport const isOdd = x => x % 2 !== 0\r\n\r\nexport const maxTo = curryN(2, (max, x) => x > max ? max : x)\r\nexport const minTo = curryN(2, (min, x) => x < min ? min : x)\r\nexport const minOf = curryN(2, (x, y) => x < y ? x : y)\r\nexport const maxOf = curryN(2, (x, y) => x > y ? x : y)\r\nexport const between = curryN(3, (a, b, x) => {\r\n  const min = minOf(a, b)\r\n  const max = maxOf(a, b)\r\n  return x < min ? min : (x > max ? max : x)\r\n})\r\n","export const isPhoneNum = v => /^1[3-9]\\d{9}$/.test(v)\r\nexport const isTelNum = v => /^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(v)\r\nexport const isQQId = v => /^[1-9][0-9]{4,10}$/.test(v)\r\nexport const isEmailAddress = v => /^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+\\.([A-Za-z]{2,4})$/.test(v)\r\n","import { filter, every, some } from './array.js'\r\nimport { isTruthy, isFalsy } from './boolean.js'\r\n\r\nimport { curry } from '../functional/helpers.js'\r\nimport { applyTo } from '../functional/combinators.js'\r\n\r\nexport const filterTruthy = filter(isTruthy)\r\nexport const filterFalsy = filter(isFalsy)\r\n\r\nexport const allPass = curry((tests, tar) => every(applyTo(tar), tests))\r\nexport const anyPass = curry((tests, tar) => some(applyTo(tar), tests))\r\n","const _fingerPrint = 'mobius'.split('')\r\n\r\n/**\r\n * @param seed String, default to 'unique'\r\n * @return String\r\n */\r\nexport const makeUniqueString = (seed = 'unique') => {\r\n  _fingerPrint.unshift(_fingerPrint.pop())\r\n  const fingerPrint = _fingerPrint.join('')\r\n  return `${seed}--${+new Date()}-${fingerPrint}`\r\n}\r\n","import { isString, isObject, isArray, hasOwnProperty } from '../internal.js'\r\nimport { curryN } from '../functional.js'\r\n\r\n/**\r\n * @param str same as value of class attribute on HTML tags\r\n * @return classString str\r\n * @example\r\n * ```js\r\n * 'mobius-base mobius-theme--light'\r\n * '.mobius-base.mobius-theme--light'\r\n * '.mobius-base mobius-theme--light'\r\n * ```\r\n */\r\nexport const neatenClassStr = str => {\r\n  if (!isString(str)) {\r\n    throw (new TypeError(`\"str\" is expected to be type of String, but received typeof \"${str}\".`))\r\n  }\r\n  return str.replace('.', ' ').replace(/\\s+/g, ' ').trim()\r\n}\r\n/**\r\n * @param str class string\r\n * @return classArray array of classnames\r\n * @example\r\n * ```js\r\n * ['mobius-base', 'mobius-theme--light']\r\n * ```\r\n */\r\nexport const classStrToArr = str => {\r\n  if (!isString(str)) {\r\n    throw (new TypeError(`\"str\" is expected to be type of String, but received typeof \"${str}\".`))\r\n  }\r\n  return neatenClassStr(str).split(' ').filter(s => s.length > 0)\r\n}\r\n/**\r\n * @param arr array of classnames\r\n * @return classObject which use key as classname and value as exist of classname\r\n * @example\r\n * ```js\r\n * {\r\n *  'mobius-base': true,\r\n *  'mobius-theme--light': true\r\n * }\r\n * ```\r\n */\r\nexport const classArrToObj = arr => {\r\n  if (!isArray(arr)) {\r\n    throw (new TypeError(`\"arr\" is expected to be type of Array, but received typeof \"${arr}\".`))\r\n  }\r\n  const obj = arr.flat(Infinity).filter(isString).reduce((acc, cur) => {\r\n    acc[cur] = true\r\n    return acc\r\n  }, {})\r\n  return obj\r\n}\r\n/**\r\n * @param str classString\r\n * @return classObject\r\n */\r\nexport const classStrToObj = str => {\r\n  if (!isString(str)) {\r\n    throw (new TypeError(`\"str\" is expected to be type of String, but received typeof \"${str}\".`))\r\n  }\r\n  const arr = classStrToArr(str)\r\n  const obj = classArrToObj(arr)\r\n  return obj\r\n}\r\n/**\r\n * @param obj classObject\r\n * @return classArray\r\n */\r\nexport const classObjToArr = obj => {\r\n  if (!isObject(obj)) {\r\n    throw (new TypeError(`\"obj\" is expected to be type of Object, but received typeof \"${obj}\".`))\r\n  }\r\n  return Object.entries(obj).reduce((acc, [key, value]) => {\r\n    if (value === true) {\r\n      acc.push(key)\r\n    }\r\n    return acc\r\n  }, [])\r\n}\r\n/**\r\n * @param arr classArray\r\n * @return classString\r\n */\r\nexport const classArrToStr = arr => {\r\n  if (!isArray(arr)) {\r\n    throw (new TypeError(`\"arr\" is expected to be type of Array, but received typeof \"${arr}\".`))\r\n  }\r\n  const str = arr.flat(Infinity).filter(isString).filter(s => s.length > 0).join(' ')\r\n  return str\r\n}\r\n/**\r\n * @param obj classObject\r\n * @return classString\r\n */\r\nexport const classObjToStr = obj => {\r\n  if (!isObject(obj)) {\r\n    throw (new TypeError(`\"obj\" is expected to be type of Object, but received typeof \"${obj}\".`))\r\n  }\r\n  const arr = classObjToArr(obj)\r\n  const str = classArrToStr(arr)\r\n  return str\r\n}\r\n/**\r\n * @param tar aka. target, type of classString | classArray | classObject\r\n * @return classString\r\n */\r\nexport const toClassStr = tar => {\r\n  if (isString(tar)) {\r\n    return '' + tar\r\n  } else if (isArray(tar)) {\r\n    return classArrToStr(tar)\r\n  } else if (isObject(tar)) {\r\n    return classObjToStr(tar)\r\n  } else {\r\n    throw (new TypeError(`\"tar\" is expected to be type of String | Array | Object, but received typeof ${tar}`))\r\n  }\r\n}\r\n/**\r\n * @param tar aka. target, type of classString | classArray | classObject\r\n * @return classArray\r\n */\r\nexport const toClassArr = tar => {\r\n  if (isString(tar)) {\r\n    return classStrToArr(tar)\r\n  } else if (isArray(tar)) {\r\n    return [...tar.flat(Infinity).filter(isString)]\r\n  } else if (isObject(tar)) {\r\n    return classObjToArr(tar)\r\n  } else {\r\n    throw (new TypeError(`\"tar\" is expected to be type of String | Array | Object, but received typeof ${tar}`))\r\n  }\r\n}\r\n/**\r\n * @param tar aka. target, type of classString | classArray | classObject\r\n * @return classObject\r\n */\r\nexport const toClassObj = tar => {\r\n  if (isString(tar)) {\r\n    return classStrToObj(tar)\r\n  } else if (isArray(tar)) {\r\n    return classArrToObj(tar)\r\n  } else if (isObject(tar)) {\r\n    return { ...tar }\r\n  } else {\r\n    throw (new TypeError(`\"tar\" is expected to be type of String | Array | Object, but received typeof ${tar}`))\r\n  }\r\n}\r\n/**\r\n * @param target classString | classArray | classObject\r\n * @param cls aka. class, type of classString | classArray | classObject\r\n * @return classString | classArray | classObject\r\n */\r\nexport const formatClassTo = curryN(2, (target, cls) => {\r\n  if (isString(target)) {\r\n    return toClassStr(cls)\r\n  } else if (isObject(target)) {\r\n    return toClassObj(cls)\r\n  } else if (isArray(target)) {\r\n    return toClassArr(cls)\r\n  } else {\r\n    throw (new TypeError(`\"target\" is expected to be type of String | Array | Object, but received typeof ${target}`))\r\n  }\r\n})\r\n\r\n/**\r\n * @param prefix String\r\n * @param cls aka. class, type of classString | classArray | classObject\r\n * @return classString | classArray | classObject\r\n */\r\nexport const prefixClassWith = curryN(2, (prefix, cls) => {\r\n  if (isString(cls)) {\r\n    const classArr = classStrToArr(cls).map(item =>\r\n      item.indexOf(prefix) === 0 ? item : prefix + item\r\n    )\r\n    const classStr = classArrToStr(classArr)\r\n    return classStr\r\n  } else if (isObject(cls)) {\r\n    const classObj = Object.entries(cls).reduce((acc, [key, value]) => {\r\n      const _key = key.indexOf(prefix) === 0 ? key : prefix + key\r\n      acc[_key] = value\r\n      return acc\r\n    }, {})\r\n    return classObj\r\n  } else if (isArray(cls)) {\r\n    const classArr = cls.map(item =>\r\n      item.indexOf(prefix) === 0 ? item : prefix + item\r\n    )\r\n    return classArr\r\n  } else {\r\n    throw (new Error(`\"cls\"(aka. class) is expected to be type of String | Array | Object, but received ${cls}`))\r\n  }\r\n})\r\n/**\r\n * @param prefix String\r\n * @param cls aka. class, type of classString | classArray | classObject\r\n * @return classString | classArray | classObject\r\n */\r\nexport const removePrefixOfClass = curryN(2, (prefix, cls) => {\r\n  if (isString(cls)) {\r\n    const classArr = classStrToArr(cls).map(item => {\r\n      if (item.indexOf(prefix) === 0) {\r\n        return item.slice(prefix.length)\r\n      }\r\n      return item\r\n    })\r\n    const classStr = classArr.join(' ')\r\n    return classStr\r\n  } else if (isObject(cls)) {\r\n    const classObj = Object.entries(cls).reduce((acc, [key, value]) => {\r\n      if (key.indexOf(prefix) === 0) {\r\n        acc[key.slice(prefix.length)] = value\r\n      } else {\r\n        acc[key] = value\r\n      }\r\n      return acc\r\n    }, { })\r\n    return classObj\r\n  } else if (isArray(cls)) {\r\n    const classArr = cls.map(item => {\r\n      if (item.indexOf(prefix) === 0) {\r\n        return item.slice(prefix.length)\r\n      }\r\n      return item\r\n    })\r\n    return classArr\r\n  } else {\r\n    throw (new Error(`\"cls\"(aka. class) is expected to be type of String | Array | Object, but received ${cls}`))\r\n  }\r\n})\r\n\r\nexport const addClass = curryN(2, (added, target) => {\r\n  const addedClassObj = toClassObj(added)\r\n  const targetClassObj = toClassObj(target)\r\n  const resClassObj = { ...targetClassObj, ...addedClassObj }\r\n  return formatClassTo(target, resClassObj)\r\n})\r\nexport const removeClass = curryN(2, (removed, target) => {\r\n  const removedClassObj = toClassObj(removed)\r\n  Object.keys(removedClassObj).forEach(key => {\r\n    removedClassObj[key] = false\r\n  })\r\n  const targetClassObj = toClassObj(target)\r\n  const resClassObj = { ...targetClassObj, ...removedClassObj }\r\n  return formatClassTo(target, resClassObj)\r\n})\r\nexport const toggleClass = curryN(2, (toggled, target) => {\r\n  const toggledClassArr = toClassArr(toggled)\r\n  const targetClassObj = toClassObj(target)\r\n  toggledClassArr.forEach(cls => {\r\n    targetClassObj[cls] = !targetClassObj[cls]\r\n  })\r\n  return formatClassTo(target, targetClassObj)\r\n})\r\nexport const replaceClass = curryN(2, (replaced, target) => {\r\n  if (isObject(replaced)) {\r\n    const targetClassObj = toClassObj(target)\r\n    Object.entries(replaced).forEach(([prev, cur]) => {\r\n      if (!isString(prev) || !isString(cur)) {\r\n        return\r\n      }\r\n      if (hasOwnProperty(prev, targetClassObj)) {\r\n        if (cur !== '') {\r\n          targetClassObj[cur] = targetClassObj[prev]\r\n        }\r\n        delete targetClassObj[prev]\r\n      }\r\n    })\r\n    return formatClassTo(target, targetClassObj)\r\n  } else if (isArray(replaced)) {\r\n    const replacedArr = replaced.filter(item => (isArray(item) && item.length > 0) || isString(item)).map(item => {\r\n      if (isArray(item)) {\r\n        if (item.length === 1) {\r\n          return [item[0], '']\r\n        } else if (item.length === 2) {\r\n          return item\r\n        } else if (item.length > 2) {\r\n          return item.slice(0, 2)\r\n        } else {\r\n          throw (new Error('Unexpected error happened!'))\r\n        }\r\n      } else if (isString(item)) {\r\n        return [item, '']\r\n      }\r\n    })\r\n    const targetClassObj = toClassObj(target)\r\n    replacedArr.forEach(replaced => {\r\n      const [prev, cur] = replaced\r\n      if (!isString(prev) || !isString(cur)) {\r\n        return\r\n      }\r\n      if (hasOwnProperty(prev, targetClassObj)) {\r\n        if (cur !== '') {\r\n          targetClassObj[cur] = targetClassObj[prev]\r\n        }\r\n        delete targetClassObj[prev]\r\n      }\r\n    })\r\n    return formatClassTo(target, targetClassObj)\r\n  } else if (isString(replaced)) {\r\n    return replaceClass(toClassArr(replaced), target)\r\n  } else {\r\n    throw (new TypeError(`\"replaced\" is expected to be type of String | Array | Object, but received ${replaced}`))\r\n  }\r\n})\r\nexport const containClass = curryN(2, (contained, target) => {\r\n  const containedClassArr = toClassArr(contained)\r\n  const targetClassArr = toClassArr(target)\r\n  return containedClassArr.every(item => targetClassArr.includes(item))\r\n})\r\n\r\n// const classStr = ' mobius-add .   del'\r\n// const classArr = [['mobius-add'], ['del']]\r\n// const classObj = { 'mobius-add': true, del: false }\r\n\r\n// console.log('【Type transformation】')\r\n// console.log(classStrToArr(classStr))\r\n// console.log(classArrToObj(classArr))\r\n// console.log(classStrToObj(classStr))\r\n// console.log(classObjToArr(classObj))\r\n// console.log(classArrToStr(classArr))\r\n// console.log(classObjToStr(classObj))\r\n// console.log('【prefix】')\r\n// console.log(prefixClassWith('mobius-', classStr))\r\n// console.log(prefixClassWith('mobius-', classArr))\r\n// console.log(prefixClassWith('mobius-', classObj))\r\n// console.log(removePrefixOfClass('mobius-', classStr))\r\n// console.log(removePrefixOfClass('mobius-', classArr))\r\n// console.log(removePrefixOfClass('mobius-', classObj))\r\n// console.log('【add】')\r\n// console.log(addClass(classArr, classObj))\r\n// console.log(addClass(classStr, classObj))\r\n// console.log('【remove】')\r\n// console.log(removeClass(classStr, classObj))\r\n// console.log(removeClass(classArr, classObj))\r\n// console.log('【toggle】')\r\n// console.log(toggleClass(classStr, classObj))\r\n// console.log(toggleClass(classArr, classObj))\r\n// console.log('【replace】')\r\n// console.log(replaceClass(classStr, classObj))\r\n// console.log(replaceClass(classArr, classObj))\r\n// console.log(replaceClass({ 'mobius-add': 'add', del: 'mobius-del' }, classObj))\r\n// console.log('【contain】')\r\n// console.log(containClass(classStr, classObj))\r\n// console.log(containClass(classArr, classObj))\r\n// console.log(containClass(classArr, { 'mobius-add': true, del: true }))\r\n\r\n// console.log(prefixClassWith('mobius-', ''))\r\n","import {\r\n  isString, isArray, isObject,\r\n  isTruthy, allPass,\r\n  split, isStartWith,\r\n  toArray, map, filter, reject, reduce, join, unshift,\r\n  hasOwnProperty, prop, entries\r\n} from '../internal.js'\r\n\r\nimport { compose } from '../functional.js'\r\n\r\n// @see https://developer.mozilla.org/zh-CN/docs/Web/API/Location\r\n// @see https://npm.taobao.org/mirrors/node/latest/docs/api/url.html\r\n// @see https://github.com/medialize/URI.js\r\n\r\n// removeRepetition :: [a] -> [a]\r\nexport const removeRepetition = reject((item, index, arr) => {\r\n  return arr[index - 1] !== undefined ? item === arr[index - 1] : false\r\n})\r\n// removeRepetitionOf :: [a] -> ([a] -> [a])\r\nexport const removeRepetitionOf = ofList => reject((item, index, arr) => {\r\n  return (arr[index - 1] !== undefined && ofList.includes(item)) ? item === arr[index - 1] : false\r\n})\r\n// removeRepetitionExcept :: [a] -> ([a] -> [a])\r\nexport const removeRepetitionExcept = exceptList => reject((item, index, arr) => {\r\n  return (arr[index - 1] !== undefined && !exceptList.includes(item)) ? item === arr[index - 1] : false\r\n})\r\n// removeRepetitionOfEmpty :: [a] -> ([a] -> [a])\r\nexport const removeRepetitionOfEmpty = removeRepetitionOf([''])\r\nexport const removeRepetitionOfSlash = removeRepetitionOf(['/'])\r\n\r\n/**\r\n * - remove repetition of slash & empty char\r\n * - add '' or '/' as prefix of pathname\r\n */\r\nexport const neatenPathname = pathname => {\r\n  // ['path', 'to', 'page'] -> join('/') -> 'path/to/page'\r\n  //   -> expected to be: '/path/to/page', unshift('') solve the problem\r\n  if (isArray(pathname)) {\r\n    return compose(removeRepetitionOfEmpty, unshift(''))(pathname)\r\n  }\r\n  if (isString(pathname)) {\r\n    return compose(join('/'), removeRepetitionOfEmpty, unshift(''), split('/'), join(''), removeRepetitionOfSlash, toArray)(pathname)\r\n  }\r\n}\r\n\r\nexport const pathnameToArray = pathname => {\r\n  const neatedPathname = neatenPathname(pathname)\r\n  if (isArray(neatedPathname)) {\r\n    return neatedPathname\r\n  }\r\n  if (isString(neatedPathname)) {\r\n    return split('/', neatedPathname)\r\n  }\r\n}\r\n\r\nexport const pathnameToString = pathname => {\r\n  const neatedPathname = neatenPathname(pathname)\r\n  if (isString(neatedPathname)) {\r\n    return neatedPathname\r\n  }\r\n  if (isArray(neatedPathname)) {\r\n    return join('/', neatedPathname)\r\n  }\r\n}\r\n\r\n// 判断两个 pathname 是否相等，有两种模式\r\n//  -> 严格模式：字符串形式的 pathname 必须完全相同\r\n//    -> '/app/page' equals '/app/page'\r\n//    -> '/app/page' not equals '/app/page/'\r\n//  -> 宽松模式：模糊处理路径名最后的 '/'\r\n//    -> '/app/page' equals '/app/page/'\r\nexport const isPathnameStrictEqual = (pathname1, pathname2) => pathnameToString(pathname1) === pathnameToString(pathname2)\r\nexport const isPathnameLooseEqual = (pathname1, pathname2) => {\r\n  const preCook = compose(join('/'), filter(isTruthy), pathnameToArray)\r\n  return preCook(pathname1) === preCook(pathname2)\r\n}\r\nexport const isPathnameEqual = (mode, pathnames) => {\r\n  // @accept { mode, pathnames }\r\n  if (allPass([isObject, hasOwnProperty('pathnames'), compose(isArray, prop('pathnames'))], mode)) {\r\n    pathnames = mode.pathnames\r\n    mode = mode.mode || 'strict'\r\n    return isPathnameEqual(mode, pathnames)\r\n  }\r\n  mode = mode || 'strict'\r\n  if (mode === 'strict') return isPathnameStrictEqual(...pathnames)\r\n  if (mode === 'loose') return isPathnameLooseEqual(...pathnames)\r\n}\r\n\r\n// console.log('\\n[path.js] pathnameToString:')\r\n// console.log(pathnameToString(['app', 'page1']))\r\n// console.log(pathnameToString(['', 'app', 'page1', '']))\r\n// console.log(pathnameToString(['', 'app', 'page1', '', '']))\r\n// console.log(pathnameToString(['', '', 'app', 'page1', '', '']))\r\n// console.log(pathnameToString('/app/page1'))\r\n// console.log(pathnameToString('//app/page1'))\r\n// console.log(pathnameToString('//app//page1'))\r\n// console.log(pathnameToString('//app//page1/'))\r\n// console.log(pathnameToString('//app//page1//'))\r\n// console.log('\\n[path.js] pathnameToArray:')\r\n// console.log(pathnameToArray(['app', 'page1']))\r\n// console.log(pathnameToArray(['', 'app', 'page1', '']))\r\n// console.log(pathnameToArray(['', 'app', 'page1', '', '']))\r\n// console.log(pathnameToArray(['', '', 'app', 'page1', '', '']))\r\n// console.log(pathnameToArray('/app/page1'))\r\n// console.log(pathnameToArray('//app/page1'))\r\n// console.log(pathnameToArray('//app//page1'))\r\n// console.log(pathnameToArray('//app//page1/'))\r\n// console.log(pathnameToArray('//app//page1//'))\r\n// console.log('\\n[path.js] isPathnameStrictEqual:')\r\n// console.log(isPathnameStrictEqual('//app//page1//', ['', 'app', 'page1']))\r\n// console.log(isPathnameStrictEqual('//app//page1//', ['', 'app', 'page1', '']))\r\n// console.log('\\n[path.js] isPathnameLooseEqual:')\r\n// console.log(isPathnameLooseEqual('//app//page1//', ['', 'app', 'page1']))\r\n// console.log(isPathnameLooseEqual('//app//page1//', ['', 'app', 'page1', '']))\r\n\r\nexport const neatenSearch = str => isStartWith('?', str) ? str : `?${str}`\r\nexport const neatenQueryStr = str => isStartWith('?', str) ? str.substring(1) : str\r\n\r\nexport const queryStrToQueryObj = compose(reduce((acc, cur) => {\r\n  if (!cur) return acc\r\n  const [key, value] = cur.split('=')\r\n  acc[key] = decodeURIComponent(value)\r\n  return acc\r\n}, {}), split('&'), neatenQueryStr)\r\nexport const queryObjToQueryStr = compose(join('&'), map(join('=')), map(([k, v]) => [k, encodeURIComponent(v)]), entries)\r\nexport const searchToQueryStr = neatenQueryStr\r\nexport const searchToQueryObj = compose(queryStrToQueryObj, searchToQueryStr)\r\nexport const queryStrToSearch = neatenSearch\r\nexport const queryObjToSearch = compose(queryStrToSearch, queryObjToQueryStr)\r\n\r\nexport const toSearch = sth => {\r\n  if (isString(sth)) return neatenSearch(sth)\r\n  if (isObject(sth)) return queryObjToSearch(sth)\r\n}\r\nexport const toQueryStr = sth => {\r\n  if (isString(sth)) return neatenQueryStr(sth)\r\n  if (isObject(sth)) return queryObjToQueryStr(sth)\r\n}\r\nexport const toQueryObj = sth => {\r\n  if (isString(sth)) return queryStrToQueryObj(sth) // NOTE: queryStrToQueryObj 自带 neatenQueryStr\r\n  if (isObject(sth)) return sth\r\n}\r\n\r\n// console.log('\\n[path.js] neatenSearch:')\r\n// console.log(neatenSearch('a=1&b=2&c=3'))\r\n// console.log(neatenSearch('?a=1&b=2&c=3'))\r\n// console.log('\\n[path.js] queryStrToQueryObj:')\r\n// console.log(queryStrToQueryObj('a=1&b=2&c=3'))\r\n// console.log(queryStrToQueryObj('?a=1&b=2&c=3'))\r\n// console.log('\\n[path.js] queryObjToQueryStr:')\r\n// console.log(queryObjToQueryStr({ a: '1', b: '2', c: '3' }))\r\n// console.log('\\n[path.js] searchToQueryStr:')\r\n// console.log(searchToQueryStr('?a=1&b=2&c=3'))\r\n// console.log('\\n[path.js] searchToQueryObj:')\r\n// console.log(searchToQueryObj('?a=1&b=2&c=3'))\r\n// console.log('\\n[path.js] queryStrToSearch:')\r\n// console.log(queryStrToSearch('a=1&b=2&c=3'))\r\n// console.log('\\n[path.js] queryObjToSearch:')\r\n// console.log(queryObjToSearch({ a: '1', b: '2', c: '3' }))\r\n// console.log('\\n[path.js] toSearch:')\r\n// console.log(toSearch('a=1&b=2&c=3'))\r\n// console.log(toSearch('?a=1&b=2&c=3'))\r\n// console.log(toSearch({ a: '1', b: '2', c: '3' }))\r\n// console.log('\\n[path.js] toQueryStr:')\r\n// console.log(toQueryStr('a=1&b=2&c=3'))\r\n// console.log(toQueryStr('?a=1&b=2&c=3'))\r\n// console.log(toQueryStr({ a: '1', b: '2', c: '3' }))\r\n// console.log('\\n[path.js] toQueryObj:')\r\n// console.log(toQueryObj('a=1&b=2&c=3'))\r\n// console.log(toQueryObj('?a=1&b=2&c=3'))\r\n// console.log(toQueryObj({ a: '1', b: '2', c: '3' }))\r\n","/* eslint-disable camelcase */\r\nimport {\r\n  isString, isObject, isError,\r\n  hasOwnProperty, propEq,\r\n  allPass\r\n} from '../internal.js'\r\nimport { compose } from '../functional.js'\r\n\r\nexport const makeBaseResponse = ({ code, code_message, status, status_message, data }) => ({\r\n  code: code,\r\n  code_message: code_message,\r\n  status: status,\r\n  status_message: status_message || '',\r\n  data: data || {}\r\n})\r\n\r\nexport const formatResponseMakerFlattenArgs = (...args) => {\r\n  const objectArgs = args.reduce((res, arg) => {\r\n    // isError 检测应该在 isString 之前，即对于 ErrorResponse，自定义的 status_message 优先级大于 error.message\r\n    // 检测顺序： isResponse -> isResponseCode -> isObject\r\n    if (isResponse(arg)) {\r\n      res = { ...arg }\r\n    } else if (isResponseCode(arg)) {\r\n      res = { ...res, ...arg }\r\n    } else if (isError(arg)) {\r\n      // 避免覆盖自定义 status_message\r\n      res = { ...res, status_message: res.status_message || arg.message, data: { error: arg } }\r\n    } else if (isString(arg)) {\r\n      // 自定义 status_message 可以覆盖 error.message\r\n      res = { ...res, status_message: arg }\r\n    } else if (isObject(arg)) {\r\n      res.data = res.data || {}\r\n      res = { ...res, data: { ...res.data, ...arg } }\r\n    } else {\r\n      res.data = res.data || {}\r\n      res.data.response = res.data.response || []\r\n      res.data.response.push(arg)\r\n    }\r\n    return res\r\n  }, {})\r\n  return objectArgs\r\n}\r\n\r\nexport const makeSuccessResponse = ({ code, code_message, status_message, data }) =>\r\n  makeBaseResponse({ code, code_message, status: 'success', status_message, data })\r\n\r\nexport const makeFailResponse = ({ code, code_message, status_message, data }) =>\r\n  makeBaseResponse({ code, code_message, status: 'fail', status_message, data })\r\n\r\nexport const makeErrorResponse = ({ code, code_message, status_message, data }) =>\r\n  makeBaseResponse({ code, code_message, status: 'error', status_message, data })\r\n\r\nexport const makeUnknownResponse = ({ code, code_message, status_message, data }) => {\r\n  console.warn(`[MobiusUtils][data] makeUnknownResponse: unknown response detected, ${JSON.stringify({ code, code_message, status_message, data })}`)\r\n  return makeBaseResponse({ code, code_message, status: 'unknown', status_message, data })\r\n}\r\nexport const makeSuccessResponseF = compose(makeSuccessResponse, formatResponseMakerFlattenArgs)\r\nexport const makeFailResponseF = compose(makeFailResponse, formatResponseMakerFlattenArgs)\r\nexport const makeErrorResponseF = compose(makeErrorResponse, formatResponseMakerFlattenArgs)\r\nexport const makeUnknownResponseF = compose(makeUnknownResponse, formatResponseMakerFlattenArgs)\r\n\r\nconst propStatusEq = propEq('status')\r\nexport const isResponseCode = allPass([isObject, hasOwnProperty('code'), hasOwnProperty('code_message')])\r\nexport const hasValidResponseCode = isResponseCode\r\nexport const isResponse = allPass([\r\n  isObject,\r\n  // hasOwnProperty('code'), hasOwnProperty('code_message'), // response code is not required\r\n  hasOwnProperty('status'), hasOwnProperty('status_message'),\r\n  hasOwnProperty('data')\r\n])\r\nexport const isSuccessResponse = allPass([isResponse, propStatusEq('success')])\r\nexport const isFailResponse = allPass([isResponse, propStatusEq('fail')])\r\nexport const isErrorResponse = allPass([isResponse, propStatusEq('error')])\r\nexport const isUnknowResponse = allPass([isResponse, propStatusEq('unknown')])\r\n\r\nexport const DEFAULT_SUCCESS_RESPONSE_CODE = { code: 0, code_message: 'SUCCESS' }\r\nexport const DEFAULT_FAIL_RESPONSE_CODE = { code: 2, code_message: 'FAIL' }\r\nexport const DEFAULT_ERROR_RESPONSE_CODE = { code: 1, code_message: 'UNDIFINED_RUNTIME_ERROR' }\r\nexport const DEFAULT_UNKNOWN_RESPONSE_CODE = { code: 3, code_message: 'UNKNOWN_RESPONSE' }\r\nexport const formatSuccessResponse = response => {\r\n  if (!hasValidResponseCode(response)) {\r\n    response = { ...response, ...DEFAULT_SUCCESS_RESPONSE_CODE }\r\n  }\r\n  return response\r\n}\r\nexport const formatFailResponse = response => {\r\n  if (!hasValidResponseCode(response)) {\r\n    response = { ...response, ...DEFAULT_FAIL_RESPONSE_CODE }\r\n  }\r\n  return response\r\n}\r\nexport const formatErrorResponse = response => {\r\n  if (!hasValidResponseCode(response)) {\r\n    response = { ...response, ...DEFAULT_ERROR_RESPONSE_CODE }\r\n  }\r\n  return response\r\n}\r\nexport const formatUnknownResponse = response => {\r\n  if (!hasValidResponseCode(response)) {\r\n    response = { ...response, ...DEFAULT_UNKNOWN_RESPONSE_CODE }\r\n  }\r\n  return response\r\n}\r\nexport const formatResponse = response => {\r\n  if (isResponse(response)) {\r\n    if (isSuccessResponse(response)) return formatSuccessResponse(response)\r\n    if (isFailResponse(response)) return formatFailResponse(response)\r\n    if (isErrorResponse(response)) return formatErrorResponse(response)\r\n    if (isUnknowResponse(response)) return formatUnknownResponse(response)\r\n  }\r\n  if (isObject(response)) {\r\n    return makeSuccessResponse({ ...DEFAULT_SUCCESS_RESPONSE_CODE, status_message: 'success response', data: { ...response } })\r\n  }\r\n  if (isString(response)) {\r\n    return makeFailResponse({ ...DEFAULT_FAIL_RESPONSE_CODE, status_message: response, data: { response: {} } })\r\n  }\r\n  if (isError(response)) {\r\n    return makeErrorResponse({ ...DEFAULT_ERROR_RESPONSE_CODE, status_message: response.message, data: { error: response } })\r\n  }\r\n  return makeUnknownResponse({\r\n    ...DEFAULT_UNKNOWN_RESPONSE_CODE,\r\n    status_message: 'So sad, unknown response occurred ;(',\r\n    data: { response: [response] }\r\n  })\r\n}\r\n","// eslint-disable-next-line no-undef\r\nexport const isInWXMINA = () => (typeof wx !== 'undefined') && wx.canIUse\r\nexport const isInWeb = () => typeof document === 'object'\r\nexport const isInBrowser = isInWeb\r\nexport const isInNode = () => typeof global !== 'undefined'\r\n\r\nlet wxmina\r\nif (isInWXMINA()) {\r\n  // eslint-disable-next-line no-undef\r\n  wxmina = wx\r\n}\r\nexport { wxmina }\r\n\r\nexport const adaptMultiPlatform = ({\r\n  webFn = () => {},\r\n  nodeFn = () => {},\r\n  wxminaFn = () => {},\r\n  defaultFn = () => {}\r\n} = {}) => {\r\n  if (isInWeb()) {\r\n    webFn && webFn()\r\n  } else if (isInNode()) {\r\n    nodeFn && nodeFn()\r\n  } else if (isInWXMINA()) {\r\n    wxminaFn && wxminaFn()\r\n  } else {\r\n    defaultFn && defaultFn()\r\n  }\r\n}\r\nexport const adaptMultiPlatformAwait = async ({\r\n  webFn = () => {},\r\n  nodeFn = () => {},\r\n  wxminaFn = () => {},\r\n  defaultFn = () => {}\r\n} = {}) => {\r\n  if (isInWeb()) {\r\n    webFn && await webFn()\r\n  } else if (isInNode()) {\r\n    nodeFn && await nodeFn()\r\n  } else if (isInWXMINA()) {\r\n    wxminaFn && await wxminaFn()\r\n  } else {\r\n    defaultFn && await defaultFn()\r\n  }\r\n}\r\n","import {\r\n  isObject, isFunction, asIs,\r\n  get, hardDeepMerge\r\n} from '../internal.js'\r\nimport { flip } from '../functional.js'\r\nimport { isSuccessResponse, makeErrorResponseF } from './response.js'\r\nimport { wxmina, adaptMultiPlatform } from './environment.js'\r\nimport axios from 'axios'\r\n\r\nexport { axios }\r\n\r\n/***************************************************************\r\n *                            biu\r\n ***************************************************************/\r\n\r\nconst _commonDefaultConfig = {\r\n  withCredentials: true,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\n// biu(config)\r\n// biu(modifier, config)\r\n// biu(config, modifier)\r\n// NOTE: 在没有指定 responseModifier 的情况下，通过 biu 拿到的一定是格式良好的 response\r\n// WARN: 即使是指定 responseModifier，也并不推荐 modifier 修改 response 的数据结构\r\nexport const biu = (config, _) => {\r\n  if (isFunction(_)) {\r\n    config = _(config || {})\r\n  }\r\n  if (isFunction(config)) {\r\n    config = config(_ || {})\r\n  }\r\n  if (!isObject(config)) {\r\n    throw TypeError('Config is expected to be an object, please check your config or config modifier whick should return an config object.')\r\n  }\r\n  config = { ..._commonDefaultConfig, ...config }\r\n  return new Promise((resolve, reject) => {\r\n    const _useAxios = () => {\r\n      axios({\r\n        ...config\r\n      })\r\n        .then(response => {\r\n          if (response.status !== 200) {\r\n            reject(new Error(`${response.status}: ${response.statusText}`))\r\n          }\r\n          return response\r\n        })\r\n        .then(resolve)\r\n        .catch(reject)\r\n    }\r\n    const _useWxRequest = () => {\r\n      try {\r\n        // @see https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\r\n        wxmina.request({\r\n          dataType: 'json',\r\n          responseType: 'text',\r\n          ...config,\r\n          header: {\r\n            ...(config.headers || {})\r\n          },\r\n          success: resolve,\r\n          fail: reject\r\n        })\r\n      } catch (e) {\r\n        reject(e)\r\n      }\r\n    }\r\n    adaptMultiPlatform({\r\n      webFn: _useAxios,\r\n      nodeFn: _useAxios,\r\n      wxminaFn: _useWxRequest\r\n    })\r\n  })\r\n    .then(result => {\r\n      if (!config.withDataExtracted) return result\r\n      if (!result.data) return makeErrorResponseF(new Error('There is no \"data\" field in request result.'))\r\n\r\n      const response = result.data\r\n      if (isSuccessResponse(response)) {\r\n        // TODO: 适配多接口返回值捆绑的情况（far away | nerver）\r\n        const type = get(config, 'data.payload.type')\r\n        const actualData = get(response, `data.${type}`)\r\n        if (type && actualData) {\r\n          response.data = actualData\r\n        }\r\n      }\r\n\r\n      return response\r\n    })\r\n    .then(response => {\r\n      const responseModifier = config.responseModifier || asIs\r\n      return responseModifier(response)\r\n    })\r\n    .catch(makeErrorResponseF)\r\n}\r\nexport const modifyBiuConfig = flip(hardDeepMerge) // or: obj => hardDeepMerge(_, obj)\r\n// biu(equiped(asPostRequest)({ url: 'https://example.com' }))\r\n// biu(equiped(asPostRequest), { url: 'https://example.com' })\r\n// biu({ url: 'https://example.com' }, equiped(asPostRequest))\r\nexport const asPostRequest = modifyBiuConfig({ method: 'POST' })\r\nexport const asGetRequest = modifyBiuConfig({ method: 'GET' })\r\nexport const withJSONContent = modifyBiuConfig({ headers: { 'Content-Type': 'application/json' } })\r\nexport const withCredentials = modifyBiuConfig({ withCredentials: true })\r\nexport const withoutCredentials = modifyBiuConfig({ withCredentials: false })\r\n\r\n// Mobius 的 API 规范中，success 响应的数据存在深层嵌套，如:\r\n//  -> { status: 'success', data: { [REQUEST_TYPE]: actualData } }\r\n// withDataExtracted 可以将冗余嵌套移除\r\nexport const withDataExtracted = modifyBiuConfig({ withDataExtracted: true })\r\n","import { isBoolean, isString, isNumber, isArray, isObject } from '../internal.js'\r\nimport { curryS } from '../functional.js'\r\n\r\nexport const struct = curryS((type, validatorMaker) => {\r\n  return config => val => {\r\n    const res = validatorMaker(config)(val)\r\n    const { isValid } = res\r\n    const detail = res.detail || {}\r\n    const { path, message } = detail\r\n\r\n    return [isValid, isValid ? undefined : message || 'Expected a value of type `' + type + `\\`${path ? ' for `' + path + '`' : ''} but received \"${JSON.stringify(val)}\".`]\r\n  }\r\n})\r\n\r\nexport const boolean = struct('Boolean', () => val => {\r\n  return {\r\n    isValid: isBoolean(val)\r\n  }\r\n})\r\nexport const string = struct('String', () => val => {\r\n  return {\r\n    isValid: isString(val)\r\n  }\r\n})\r\nexport const number = struct('Number', () => val => {\r\n  return {\r\n    isValid: isNumber(val)\r\n  }\r\n})\r\n\r\nexport const array = struct('Array', config => val => {\r\n  if (!isArray(val) || !config) {\r\n    return {\r\n      isValid: isArray(val)\r\n    }\r\n  }\r\n  return val.reduce((acc, item) => {\r\n    const [isValid, message] = config(item)\r\n    acc.isValid = !acc.isValid ? false : isValid\r\n    acc.detail.message = acc.detail.message || message\r\n    return acc\r\n  }, { isValid: true, detail: { message: undefined } })\r\n})\r\n\r\nexport const object = struct('Object', () => val => {\r\n  return {\r\n    isValid: isObject(val)\r\n  }\r\n})\r\n\r\nexport const is = (data, struct) => {\r\n  console.log(struct(data))\r\n  return struct(data)[0]\r\n}\r\n\r\n// console.info(is({}, object()))\r\n// console.info(is(312312, string()))\r\n// console.info(is([123], array(string())))\r\n","import { curry } from '../functional.js'\r\n\r\nexport const perf = {\r\n  get now () {\r\n    return Math.round(performance.now())\r\n  }\r\n}\r\n\r\nexport const stdLineLog = curry((file, fnName, description) => `[${perf.now}][${file}] ${fnName}: ${description}...`)\r\nexport const makeTigerLogger = textGen => (text, appends) => console.log(textGen(text || ''), appends || '')\r\nexport const makeLinedTigerLogger = (file, fileName) => makeTigerLogger(stdLineLog(file, fileName))\r\n\r\n// @ref: https://mostly-adequate.gitbooks.io/mostly-adequate-guide/content/appendix_a.html\r\n// inspect :: a -> String\r\nexport const inspect = (x) => {\r\n  if (x && typeof x.inspect === 'function') {\r\n    return x.inspect()\r\n  }\r\n\r\n  function inspectFn (f) {\r\n    return f.name ? f.name : f.toString()\r\n  }\r\n\r\n  function inspectTerm (t) {\r\n    switch (typeof t) {\r\n      case 'string':\r\n        return `'${t}'`\r\n      case 'object': {\r\n        const ts = Object.keys(t).map(k => [k, inspect(t[k])])\r\n        return `{${ts.map(kv => kv.join(': ')).join(', ')}}`\r\n      }\r\n      default:\r\n        return String(t)\r\n    }\r\n  }\r\n\r\n  function inspectArgs (args) {\r\n    return Array.isArray(args) ? `[${args.map(inspect).join(', ')}]` : inspectTerm(args)\r\n  }\r\n\r\n  return (typeof x === 'function') ? inspectFn(x) : inspectArgs(x)\r\n}\r\n","import { isUndefined, isString, isObject, isFunction } from '../internal/base.js'\r\nimport { looseCurryN } from '../functional.js'\r\n\r\n/**\r\n *    Metas\r\n * Void       -> Void's role in Atom world is same as undefined & null 's role in normal JavaScript world.\r\n *               It is designed to replace values that can be converted to false, such as undefined & null.\r\n *               So falsy values can flowing through the Atoms as normal values flowing.\r\n *               For the typical usages, please check nilToVoidT & defaultT.\r\n * Terminator -> Terminator is designed as a signal for \"interruption\" of Atom Flow.\r\n *               Mutation will not mutate(trigger an operation to update the downstream data's value)\r\n *                 a Data or Datar which value is Terminator.\r\n *               Data will not mutate(update own value to income operation's result) a Mutation or Mutator or Operation\r\n *                 which result is Terminator.\r\n *               For the typical usages, please check filterT or skipT or takeT.\r\n * Vacuo      -> A value that can serve as the value (for Datar, or operation for Mutator)\r\n *                 of Datar and Mutator at the same time.\r\n * Datar      -> Designed to carry the value of Data.\r\n * Mutator    -> Designed to carry the operation of Mutation.\r\n */\r\n\r\nexport const isDatar = tar => isObject(tar) && tar.isDatar\r\nexport const isMutator = tar => isObject(tar) && tar.isMutator\r\n\r\nexport const isVoid = tar => isObject(tar) && tar.isVoid\r\nexport const isTerminator = tar => isObject(tar) && tar.isTerminator\r\nexport const isVacuo = tar => isFunction(tar) && tar.isVacuo\r\n\r\n/**\r\n *—————————————————————————————————————————————— Nothing Particle ————————————————————————————————————————————————————\r\n */\r\n/**\r\n *\r\n */\r\nexport class Void {\r\n  get isVoid () { return true }\r\n}\r\nexport const VOID = new Void()\r\n\r\n/**\r\n *—————————————————————————————————————————————— Terminator Particle ————————————————————————————————————————————————————\r\n */\r\n/**\r\n *\r\n */\r\nexport class Terminator {\r\n  get isTerminator () { return true }\r\n}\r\nexport const TERMINATOR = new Terminator()\r\n\r\n/**\r\n *—————————————————————————————————————————————— Vacuo Particle ————————————————————————————————————————————————————\r\n */\r\n/**\r\n * 利用 JavaScript Function is also an Object 的特性，\r\n * 使 Vacuo 既能够作为 Datar.of() 也能作为 Mutator.of() 的参数，\r\n * 从而实现 Empty Datar 和 Empty Mutator。\r\n *\r\n * 因为要兼容浏览器扩展的执行环境，所以 class Vacuo extends Function 语法无法使用\r\n *   -> Refer: https://developer.chrome.com/docs/apps/contentSecurityPolicy/\r\n */\r\nexport const Vacuo = () => {\r\n  const internalVacuo = function () {}\r\n  Object.defineProperty(internalVacuo, 'isVacuo', {\r\n    get: () => { return true }\r\n  })\r\n  Object.defineProperty(internalVacuo, 'isEmpty', {\r\n    get: () => { return true }\r\n  })\r\n  return internalVacuo\r\n}\r\nexport const VACUO = Vacuo()\r\n\r\n/**\r\n *—————————————————————————————————————————————— Datar Particle ————————————————————————————————————————————————————\r\n */\r\n/**\r\n *\r\n */\r\nexport class Datar {\r\n  constructor (value, mutator = VACUO, options = {}) {\r\n    if (!isUndefined(mutator) && !isMutator(mutator) && !isVacuo(mutator)) {\r\n      throw (new TypeError(\r\n        `The 2nd parameter of Datar's constructor is expected to be type of \"Mutator\" | \"Vacuo\" | \"Undefined\", but received \"${typeof mutator}\".`\r\n      ))\r\n    }\r\n\r\n    this._options = options\r\n\r\n    this.value = value\r\n    this.mutator = mutator\r\n  }\r\n\r\n  static of (value, mutator = undefined, options = {}) {\r\n    return new Datar(value, mutator, options)\r\n  }\r\n\r\n  static empty () {\r\n    return new Datar(VACUO)\r\n  }\r\n\r\n  get isDatar () { return true }\r\n\r\n  get isEmpty () { return isVacuo(this.value) }\r\n\r\n  /**\r\n   * @param { Mutator | Vacuo } mutator\r\n   * @return { Datar } this(Datar)\r\n   */\r\n  fill (mutator) {\r\n    if (!isMutator(mutator) && !isVacuo(mutator)) {\r\n      throw (new TypeError(\r\n        `The 1st parameter of Datar's fill method is expected to be type of \"Mutator\" | \"Vacuo\", but received \"${typeof mutator}\".`\r\n      ))\r\n    }\r\n    this.mutator = mutator\r\n    return this\r\n  }\r\n\r\n  fillEmpty () {\r\n    this.mutator = VACUO\r\n    return this\r\n  }\r\n\r\n  fillAuto (mutator = VACUO) {\r\n    return this.fill(mutator)\r\n  }\r\n\r\n  /**\r\n   * Rarely used, this method exists to ensure the symmetry of Datar and Mutator.\r\n   *\r\n   * @param { Mutator | Vacuo } mutator default to VACUO\r\n   * @return { function | Vacuo } operation function | Vacuo\r\n   */\r\n  run (mutator = VACUO, ...args) {\r\n    if (!isMutator(mutator) && !isVacuo(mutator)) {\r\n      throw (new TypeError(\r\n        `The 1st parameter of Datar's run method is expected to be type of \"Mutator\" | \"Vacuo\", but received \"${typeof mutator}\".`\r\n      ))\r\n    }\r\n    // return operation or vacuo\r\n    return isMutator(mutator) ? mutator.operation : mutator\r\n  }\r\n}\r\n\r\n/**\r\n *—————————————————————————————————————————————— Mutator Particle ————————————————————————————————————————————————————\r\n */\r\n/**\r\n * @param { any } operation\r\n */\r\nconst checkOperation = operation => {\r\n  if (!isFunction(operation)) {\r\n    throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received \"${typeof operation}\".`))\r\n  }\r\n}\r\n/**\r\n * @param { any } tar\r\n * @return { boolean } true | false\r\n */\r\nconst isValidOperationTarget = tar => isDatar(tar) || isVacuo(tar)\r\n/**\r\n *\r\n */\r\nexport class Mutator {\r\n  constructor (operation, datar = VACUO, options = {}) {\r\n    if (!isUndefined(datar) && !isValidOperationTarget(datar)) {\r\n      throw (new TypeError(\r\n        `The 2nd parameter of Mutator's constructor is expected to be type of \"Datar\" | \"Vacuo\" | \"Undefined\", but received \"${typeof datar}\".`\r\n      ))\r\n    }\r\n    checkOperation(operation)\r\n\r\n    this._options = options\r\n\r\n    this.operation = operation\r\n    this.datar = datar\r\n  }\r\n\r\n  static of (operation, datar = undefined, options = {}) {\r\n    return new Mutator(operation, datar, options)\r\n  }\r\n\r\n  static empty () {\r\n    return new Mutator(VACUO)\r\n  }\r\n\r\n  get isMutator () { return true }\r\n\r\n  get isEmpty () { return isVacuo(this.operation) }\r\n\r\n  static checkOperation (operation) {\r\n    checkOperation(operation)\r\n  }\r\n\r\n  static isValidOpTar (tar) {\r\n    return isValidOperationTarget(tar)\r\n  }\r\n\r\n  static isValidOperationTarget (tar) {\r\n    return isValidOperationTarget(tar)\r\n  }\r\n\r\n  /**\r\n   * Dispatch opration to correct lift method according to the given options.\r\n   *\r\n   * @param { function } operation\r\n   * @param { { type: 'both' | 'left' | 'right' } } options\r\n   */\r\n  static lift (operation, options) {\r\n    if (!options) {\r\n      throw (new TypeError(`\"options\" is required for lift method of Mutator, but received \"${options}\".`))\r\n    }\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n    }\r\n    const { type } = options\r\n\r\n    if (!isString(type)) {\r\n      throw (new TypeError(`\"type\" is expected to be type of \"String\", but received \"${typeof type}\".`))\r\n    }\r\n\r\n    if (type === 'both') {\r\n      return this.liftBoth(operation)\r\n    } else if (type === 'left') {\r\n      return this.liftLeft(operation)\r\n    } else if (type === 'right') {\r\n      return this.liftRight(operation)\r\n    } else {\r\n      throw (new TypeError(`\"type\" is expected be one of \"both\" | \"left\" | \"right\", but received \"${type}\".`))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Automatically unwrap both left & right param to value.\r\n   *\r\n   * @param { function } operation\r\n   * @return { function } curried function(2, loose)\r\n   */\r\n  static liftBoth (operation) {\r\n    checkOperation(operation)\r\n    return looseCurryN(2, (prevDatar, datar, ...args) => {\r\n      return operation(\r\n        isValidOperationTarget(prevDatar) ? prevDatar.value : prevDatar,\r\n        isValidOperationTarget(datar) ? datar.value : datar,\r\n        ...args\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Automatically unwrap left param to value， keep right param Datar.\r\n   *\r\n   * @param { function } operation\r\n   * @return { function } curried function(2, loose)\r\n   */\r\n  static liftLeft (operation) {\r\n    checkOperation(operation)\r\n    return looseCurryN(2, (prevDatar, datar, ...args) => {\r\n      return operation(\r\n        isValidOperationTarget(prevDatar) ? prevDatar.value : prevDatar,\r\n        datar,\r\n        ...args\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Automatically unwrap right param to value， keep left param Datar.\r\n   *\r\n   * @param { function } operation\r\n   * @return { function } curried function(2, loose)\r\n   */\r\n  static liftRight (operation) {\r\n    checkOperation(operation)\r\n    return looseCurryN(2, (prevDatar, datar, ...args) => {\r\n      return operation(\r\n        prevDatar,\r\n        isValidOperationTarget(datar) ? datar.value : datar,\r\n        ...args\r\n      )\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @param { Datar | Vacuo } mutator\r\n   * @return { Mutator } this(Mutator)\r\n   */\r\n  fill (datar) {\r\n    if (!isValidOperationTarget(datar)) {\r\n      throw (new TypeError(\r\n        `The 1st parameter of Mutator's fill method is expected to be type of \"Datar\" | \"Vacuo\", but received \"${typeof mutator}\".`\r\n      ))\r\n    }\r\n    this.datar = datar\r\n    return this\r\n  }\r\n\r\n  fillEmpty () {\r\n    this.datar = VACUO\r\n    return this\r\n  }\r\n\r\n  fillAuto (datar = VACUO) {\r\n    return this.fill(datar)\r\n  }\r\n\r\n  /**\r\n   * Atom Flow: Data A -> Mutation -> Data B\r\n   *\r\n   *   -> Data A is observed by Mutation, Mutation is observed by Data B;\r\n   *\r\n   *   -> Data A emits a datar, Mutation takes that datar as the 1st parameter of operation;\r\n   *\r\n   *   -> Mutation takes datar from Data A, then emits a mutator, Data B will take that mutator;\r\n   *\r\n   *   -> Data B takes mutator from Mutation, then pass its own datar to that mutator's operation as the 2nd parameter;\r\n   *\r\n   *   -> The operation evaluates while it has both two parameters, the result will be wrapped in a new datar;\r\n   *\r\n   *   -> The new datar will be the new datar of Data B.\r\n   *\r\n   * @param { Datar | Vacuo } datar default to VACUO\r\n   * @return { any }\r\n   */\r\n  run (datar = VACUO, ...args) {\r\n    // 保证 Mutator 的 operation 接收到的两个必要参数都是合法的操作对象\r\n    return this.operation(this.datar, isValidOperationTarget(datar) ? datar : Datar.of(datar), ...args)\r\n  }\r\n}\r\n","import { pipe, compose } from '../../functional.js'\r\nimport { isObject } from '../../internal.js'\r\n\r\nexport const isAtom = tar => isObject(tar) && tar.isAtom\r\n\r\n/**\r\n * !! please consider BaseMediator when add property or method to BaseAtom\r\n */\r\nexport class BaseAtom {\r\n  get isAtom () {\r\n    return true\r\n  }\r\n\r\n  pipe (...args) {\r\n    return pipe(...args)(this)\r\n  }\r\n\r\n  compose (...args) {\r\n    return compose(...args)(this)\r\n  }\r\n}\r\n","import { isUndefined, isFunction, isObject, isEmpty } from '../../internal.js'\r\nimport { Mutator, Datar, isDatar, isMutator, isTerminator } from '../meta.js'\r\nimport { isData } from './data.atom.js'\r\nimport { BaseAtom } from './base.atom.js'\r\n\r\n/**\r\n * @param { any } tar\r\n * @return { boolean }\r\n */\r\nexport const isMutation = tar => isObject(tar) && tar.isMutation\r\n\r\nexport class Mutation extends BaseAtom {\r\n  constructor (operation, options = {}) {\r\n    super()\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(\r\n        `\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`\r\n      ))\r\n    }\r\n    this._options = options\r\n\r\n    if (isMutator(operation)) {\r\n      this._mutator = operation\r\n    } else if (isFunction(operation)) {\r\n      this._mutator = Mutator.of(operation)\r\n    } else {\r\n      throw new TypeError(\r\n        `\"operation\" is expected to be type of \"Mutator\" | \"Function\", but received \"${typeof operation}\".`\r\n      )\r\n    }\r\n\r\n    this._consumers = new Set()\r\n  }\r\n\r\n  /**\r\n   * @return { 'MutationAtom' } 'MutationAtom'\r\n   */\r\n  get type () { return 'MutationAtom' }\r\n\r\n  /**\r\n   * @return { true } true\r\n   */\r\n  get isMutation () { return true }\r\n\r\n  get isEmpty () { return this._mutator.isEmpty }\r\n\r\n  static of (operation, options = {}) {\r\n    return new Mutation(operation, options)\r\n  }\r\n\r\n  static empty (options = {}) {\r\n    return new Mutation(Mutator.empty(), options)\r\n  }\r\n\r\n  static ofLift (operation, options = {}) {\r\n    const { liftType: type } = options\r\n    return new Mutation(Mutator.lift(operation, { type }), { ...options, isLifted: true, origin_operation: operation })\r\n  }\r\n\r\n  static ofLiftBoth (operation, options = {}) {\r\n    return new Mutation(Mutator.liftBoth(operation), { ...options, isLifted: true, origin_operation: operation })\r\n  }\r\n\r\n  static ofLiftLeft (operation, options = {}) {\r\n    return new Mutation(Mutator.liftLeft(operation), { ...options, isLifted: true, origin_operation: operation })\r\n  }\r\n\r\n  static ofLiftRight (operation, options = {}) {\r\n    return new Mutation(Mutator.liftRight(operation), { ...options, isLifted: true, origin_operation: operation })\r\n  }\r\n\r\n  /**\r\n   * Static value of Mutation.\r\n   *\r\n   * @return { Mutator } mutator\r\n   */\r\n  get mutator () { return this._mutator }\r\n  /**\r\n   * @return { function } operation\r\n   */\r\n  get operation () {\r\n    if (this._options && this._options.isLifted) {\r\n      return this._options.origin_operation\r\n    } else {\r\n      return this._mutator.operation\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Steram value of Mutation.\r\n   *\r\n   * @param { function } consumer The consumer will be invoked by trigger method when there is a adequate value.\r\n   * @return { { unsubscribe: function } } SubscriptionController\r\n   */\r\n  subscribe (consumer) {\r\n    this._consumers.add(consumer)\r\n    return {\r\n      unsubscribe: () => {\r\n        return this._consumers.delete(consumer)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param { Mutator | undefined } mutator\r\n   * @return { void }\r\n   */\r\n  trigger (mutator) {\r\n    if (!isUndefined(mutator) && !isMutator(mutator)) {\r\n      throw (new TypeError('Mutation must be triggered with a Mutator.'))\r\n    }\r\n    const _mutator = mutator || this.mutator\r\n\r\n    if (!isEmpty(_mutator)) {\r\n      this._consumers.forEach(consumer => {\r\n        consumer(_mutator, this)\r\n      })\r\n    }\r\n  }\r\n\r\n  triggerOperation (operation) {\r\n    return this.trigger(Mutator.of(operation))\r\n  }\r\n\r\n  /**\r\n   * Change the value of Mutation in a stream manner.\r\n   *\r\n   * Given \"data\" will be **upstream** of current Mutation, which is different from \"beObservedBy\" method.\r\n   *\r\n   * @param { Mutation } mutation data -> current mutation (-> other data)\r\n   */\r\n  observe (data) {\r\n    if (!isData(data)) {\r\n      throw (new TypeError('Mutation can only observe a Data!'))\r\n    }\r\n    return data.subscribe((datar, data) => {\r\n      this.mutate(datar, data)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Change the value of Mutation in a stream manner.\r\n   *\r\n   * Given \"data\" will be **downstream** of current Mutation, which is different from \"observe\" method.\r\n   *\r\n   * @param { Mutation } mutation (other data ->) current mutation -> data\r\n   */\r\n  beObservedBy (data) {\r\n    return data.observe(this)\r\n  }\r\n\r\n  /**\r\n   * Change the value of Mutation in a static manner.\r\n   *\r\n   * take datar-like param(convert to datar)\r\n   *   -> run datar with current mutator & contexts\r\n   *   -> wrap and save result of datar.run as new mutator\r\n   *   -> trigger consumers with new mutator & contexts\r\n   *\r\n   * @param { Datar | Data | any } datar Will be the 2nd param of mutator's operation.\r\n   * @param { Data } data\r\n   * @return { Mutation } Mutation(this)\r\n   */\r\n  mutate (datar, data) {\r\n    let _datar = null\r\n    if (isDatar(datar)) {\r\n      _datar = datar\r\n    } else if (isData(datar)) {\r\n      _datar = datar.datar\r\n    } else {\r\n      _datar = Datar.of(datar)\r\n    }\r\n\r\n    if (isTerminator(_datar.value)) return this\r\n\r\n    let _data\r\n    if (!data) {\r\n      _data = isData(data) ? datar : _data\r\n    } else {\r\n      if (isData(data)) {\r\n        _data = data\r\n      } else {\r\n        throw (new TypeError(`\"data\" is expected to be type of \"Data\", but received \"${typeof data}\".`))\r\n      }\r\n    }\r\n\r\n    // NOTE: 运行效果相当于：const _tempMutator = this._mutator.fill(_datar)\r\n    // 但实际意义完全不同\r\n    const _tempMutator = Mutator.of(_datar.run(this._mutator, _data)).fill(_datar)\r\n\r\n    this._mutator = _tempMutator\r\n    this.trigger()\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * @param { function } trigger Takes an internalTrigger(Function) as first parameter,\r\n   *                             invoke internalTrigger with any value will lead to\r\n   *                             Mutation's trigger method be triggerd with given value.\r\n   * @param { { forceWrap?: boolean } } options\r\n   * @accept ((mutator -> trigger(mutator)) -> controller, options)\r\n   * @accept ((operation -> trigger(mutator)) -> controller, { forceWrap: true })\r\n   * @return { {} } TriggerController\r\n   */\r\n  registerTrigger (trigger, options = {}) {\r\n    if (!trigger) {\r\n      throw (new TypeError(`\"trigger\" is required, but received \"${trigger}\".`))\r\n    }\r\n    if (!isFunction(trigger)) {\r\n      throw (new TypeError(`\"trigger\" is expected to be type of \"Function\", but received \"${typeof trigger}\".`))\r\n    }\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n    }\r\n\r\n    const { forceWrap = false } = options\r\n\r\n    const _internalTriggerFunction = (...args) => {\r\n      if (!isMutator(args[0]) || forceWrap) {\r\n        args[0] = Mutator.of(args[0])\r\n      }\r\n      this.trigger(...args)\r\n    }\r\n    const controller = trigger(_internalTriggerFunction)\r\n    return controller\r\n  }\r\n}\r\n","import { isUndefined, isFunction, isObject, isEmpty } from '../../internal.js'\r\nimport { Mutator, Datar, isDatar, isMutator, isTerminator } from '../meta.js'\r\nimport { isMutation } from './mutation.atom.js'\r\nimport { BaseAtom } from './base.atom.js'\r\n\r\n/**\r\n * @param { any } tar\r\n * @return { boolean }\r\n */\r\nexport const isData = tar => isObject(tar) && tar.isData\r\n\r\nexport class Data extends BaseAtom {\r\n  constructor (value, options = {}) {\r\n    super()\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(\r\n        `\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`\r\n      ))\r\n    }\r\n    this._options = options\r\n\r\n    if (isDatar(value)) {\r\n      this._datar = value\r\n    } else {\r\n      this._datar = Datar.of(value)\r\n    }\r\n    this._consumers = new Set()\r\n  }\r\n\r\n  /**\r\n   * @return { 'DataAtom' } 'DataAtom'\r\n   */\r\n  get type () { return 'DataAtom' }\r\n\r\n  /**\r\n   * @return { true } true\r\n   */\r\n  get isData () { return true }\r\n\r\n  get isEmpty () { return this._datar.isEmpty }\r\n\r\n  static of (value, options = {}) {\r\n    return new Data(value, options)\r\n  }\r\n\r\n  /**\r\n   * Same as Data.of(VACUO)\r\n   *\r\n   * @return { Data }\r\n   */\r\n  static empty (options = {}) {\r\n    return new Data(Datar.empty(), options)\r\n  }\r\n\r\n  /**\r\n   * Static value of Data.\r\n   *\r\n   * @return { Datar } datar\r\n   */\r\n  get datar () { return this._datar }\r\n  /**\r\n   * Static value of Data, same as Data.datar.value.\r\n   *\r\n   * @return { any } value\r\n   */\r\n  get value () { return this._datar.value }\r\n\r\n  /**\r\n   * Steram value of Data.\r\n   *\r\n   * @param { function } consumer The consumer will be invoked by trigger method when there is a adequate value.\r\n   * @return { { unsubscribe: function } } SubscriptionController\r\n   */\r\n  subscribe (consumer) {\r\n    this._consumers.add(consumer)\r\n    return {\r\n      unsubscribe: () => {\r\n        return this._consumers.delete(consumer)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param { Datar | undefined } datar\r\n   * @return { void }\r\n   */\r\n  trigger (datar) {\r\n    if (!isUndefined(datar) && !isDatar(datar)) {\r\n      throw (new TypeError('Data must be triggered with a Datar.'))\r\n    }\r\n    const _datar = datar || this.datar\r\n\r\n    if (!isEmpty(_datar)) {\r\n      this._consumers.forEach(consumer => {\r\n        consumer(_datar, this)\r\n      })\r\n    }\r\n  }\r\n\r\n  triggerValue (value) {\r\n    return this.trigger(Datar.of(value))\r\n  }\r\n\r\n  /**\r\n   * Change the value of Data in a stream manner.\r\n   *\r\n   * Given \"mutation\" will be **upstream** of current Data, which is different from \"beObservedBy\" method.\r\n   *\r\n   * @param { Mutation } mutation (other data ->) mutation -> current data\r\n   */\r\n  observe (mutation) {\r\n    if (!isMutation(mutation)) {\r\n      throw (new TypeError('Data can only observe a Mutation!'))\r\n    }\r\n    return mutation.subscribe((mutator, mutation) => {\r\n      this.mutate(mutator, mutation)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Change the value of Data in a stream manner.\r\n   *\r\n   * Given \"mutation\" will be **downstream** of current Data, which is different from \"observe\" method.\r\n   *\r\n   * @param { Mutation } mutation current data -> mutation (-> other data)\r\n   */\r\n  beObservedBy (mutation) {\r\n    return mutation.observe(this)\r\n  }\r\n\r\n  /**\r\n   * Change the value of Data in a static manner.\r\n   *\r\n   * take mutator-like param(convert to mutator)\r\n   *   -> run mutator with current datar & contexts\r\n   *   -> wrap and save result of mutator.run as new datar\r\n   *   -> trigger consumers with new datar & contexts\r\n   *\r\n   * @param { Mutator | Mutation | function } mutator Used to produce new value with current datar.\r\n   * @param { Mutation } mutation Provide to mutator's operation (function) as execute contexts.\r\n   * @return { Data } Data(this)\r\n   */\r\n  mutate (mutator, mutation) {\r\n    let _mutator\r\n    if (isMutator(mutator)) {\r\n      _mutator = mutator\r\n    } else if (isMutation(mutator)) {\r\n      _mutator = mutator.mutator\r\n    } else if (isFunction(mutator)) {\r\n      _mutator = Mutator.of(mutator)\r\n    } else {\r\n      throw (new TypeError(`\"mutator\" is expected to be type of \"Mutator\" | \"Mutation\" | \"Function\", but received \"${typeof mutator}\".`))\r\n    }\r\n    let _mutation\r\n    if (!mutation) {\r\n      _mutation = isMutation(mutator) ? mutator : _mutation\r\n    } else {\r\n      if (isMutation(mutation)) {\r\n        _mutation = mutation\r\n      } else {\r\n        throw (new TypeError(`\"mutation\" is expected to be type of \"Mutation\", but received \"${typeof mutation}\".`))\r\n      }\r\n    }\r\n\r\n    const _tempDatar = Datar.of(_mutator.run(this._datar, _mutation)).fill(_mutator)\r\n\r\n    // NOTE: If result of operation is TERMINATOR,\r\n    // do not update the datar or trigger the subscribers\r\n    if (!isTerminator(_tempDatar.value)) {\r\n      this._datar = _tempDatar\r\n      this.trigger()\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * @param { function } trigger Takes an internalTrigger(Function) as first parameter,\r\n   *                             invoke internalTrigger with any value will lead to\r\n   *                             Data's trigger method be triggerd with given value.\r\n   * @param { { forceWrap?: boolean } } options\r\n   * @accept ((datar -> trigger(datar)) -> controller, options)\r\n   * @accept ((value -> trigger(datar)) -> controller, { forceWrap: true })\r\n   * @return { {} } TriggerController\r\n   */\r\n  registerTrigger (trigger, options = {}) {\r\n    if (!trigger) {\r\n      throw (new TypeError(`\"trigger\" is required, but received \"${trigger}\".`))\r\n    }\r\n    if (!isFunction(trigger)) {\r\n      throw (new TypeError(`\"trigger\" is expected to be type of \"Function\", but received \"${typeof trigger}\".`))\r\n    }\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n    }\r\n\r\n    const { forceWrap = false } = options\r\n\r\n    const _internalTriggerFunction = (...args) => {\r\n      if (!isDatar(args[0]) || forceWrap) {\r\n        args[0] = Datar.of(args[0])\r\n      }\r\n      return this.trigger(...args)\r\n    }\r\n\r\n    const controller = trigger(_internalTriggerFunction)\r\n    return controller\r\n  }\r\n}\r\n","import { isObject } from '../../internal.js'\r\nimport { pipe, compose } from '../../functional.js'\r\n\r\nexport const isMediator = tar => isObject(tar) && tar.isMediator\r\n\r\nexport class BaseMediator {\r\n  constructor (atom) {\r\n    if (new.target === BaseMediator) {\r\n      throw new Error('BaseMediator can not be instantiated!')\r\n    }\r\n    this._atom = atom\r\n  }\r\n\r\n  /***********************************************************\r\n   *             Mediator's propertys and methods\r\n   ***********************************************************/\r\n\r\n  get isMediator () {\r\n    return true\r\n  }\r\n\r\n  /***********************************************************\r\n   *                Atom's propertys and methods\r\n   ***********************************************************/\r\n\r\n  get atom () {\r\n    return this._atom\r\n  }\r\n\r\n  get isAtom () {\r\n    return this._atom.isAtom\r\n  }\r\n\r\n  get isData () {\r\n    return this._atom.isData\r\n  }\r\n\r\n  get isMutation () {\r\n    return this._atom.isMutation\r\n  }\r\n\r\n  get isEmpty () {\r\n    return this._atom.isEmpty\r\n  }\r\n\r\n  get datar () {\r\n    if (this.isData) {\r\n      return this._atom.datar\r\n    } else {\r\n      throw (new TypeError('There is no \"datar\" property on Mutation instance.'))\r\n    }\r\n  }\r\n\r\n  get value () {\r\n    if (this.isData) {\r\n      return this._atom.value\r\n    } else {\r\n      throw (new TypeError('There is no \"value\" property on Mutation instance.'))\r\n    }\r\n  }\r\n\r\n  get mutator () {\r\n    if (this.isMutation) {\r\n      return this._atom.mutator\r\n    } else {\r\n      throw (new TypeError('There is no \"mutator\" property on Data instance.'))\r\n    }\r\n  }\r\n\r\n  get operation () {\r\n    if (this.isMutation) {\r\n      return this._atom.operation\r\n    } else {\r\n      throw (new TypeError('There is no \"operation\" property on Data instance.'))\r\n    }\r\n  }\r\n\r\n  subscribe (...args) {\r\n    return this._atom.subscribe(...args)\r\n  }\r\n\r\n  trigger (...args) {\r\n    return this._atom.trigger(...args)\r\n  }\r\n\r\n  triggerValue (...args) {\r\n    if (this.isData) {\r\n      return this._atom.triggerValue(...args)\r\n    } else {\r\n      throw (new TypeError('There is no \"triggerValue\" method on Mutation instance.'))\r\n    }\r\n  }\r\n\r\n  triggerOperation (...args) {\r\n    if (this.isMutation) {\r\n      return this._atom.triggerOperation(...args)\r\n    } else {\r\n      throw (new TypeError('There is no \"triggerOperation\" method on Data instance.'))\r\n    }\r\n  }\r\n\r\n  observe (...args) {\r\n    return this._atom.observe(...args)\r\n  }\r\n\r\n  beObservedBy (...args) {\r\n    return this._atom.beObservedBy(...args)\r\n  }\r\n\r\n  mutate (...args) {\r\n    return this._atom.mutate(...args)\r\n  }\r\n\r\n  registerTrigger (...args) {\r\n    return this._atom.registerTrigger(...args)\r\n  }\r\n\r\n  pipe (...args) {\r\n    // ! do not use:\r\n    // ! return this._atom.pipe(...args)\r\n    return pipe(...args)(this)\r\n  }\r\n\r\n  compose (...args) {\r\n    // ! do not use:\r\n    // ! return this._atom.compose(...args)\r\n    return compose(...args)(this)\r\n  }\r\n\r\n  release () {\r\n    this._atom = null\r\n  }\r\n}\r\n","import { isObject, isNumber } from '../../internal.js'\r\nimport { isAtom } from '../atom.js'\r\nimport { BaseMediator } from './base.mediators.js'\r\nimport { curryN } from '../../functional.js'\r\n\r\nexport const isReplayMediator = tar => isObject(tar) && tar.isReplayMediator\r\n\r\nexport class ReplayMediator extends BaseMediator {\r\n  constructor (atom, replayTime = 1) {\r\n    super(atom)\r\n    this._history = []\r\n    this._consumers = []\r\n    this.setReplayTime(replayTime)\r\n    this._subscribeController = atom.subscribe(val => {\r\n      this._history.push(val)\r\n      this._setHistory()\r\n    })\r\n  }\r\n\r\n  get type () {\r\n    return 'ReplayMediator'\r\n  }\r\n\r\n  get isReplayMediator () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * @param options Number | Object\r\n   */\r\n  static of (atom, options) {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('ReplayMediator can apply to an Atom only.'))\r\n    }\r\n    if (isReplayMediator(atom)) {\r\n      return atom\r\n    }\r\n\r\n    let _options = {}\r\n    if (isNumber(options)) {\r\n      _options.replayTime = options\r\n    } else if (isObject(options)) {\r\n      _options = {\r\n        ..._options,\r\n        ...options\r\n      }\r\n    } else {\r\n      throw new TypeError(`\"options\" argument of ReplayMediator is expected to be type of \"Number\" | \"Object\", but received ${typeof options}.`)\r\n    }\r\n\r\n    const { replayTime, autoTrigger = true } = _options\r\n\r\n    const _mediator = new ReplayMediator(atom, replayTime)\r\n\r\n    if (autoTrigger) {\r\n      atom.trigger()\r\n    }\r\n    return _mediator\r\n  }\r\n\r\n  setReplayTime (replayTime) {\r\n    if (!isNumber(replayTime)) {\r\n      throw (new TypeError('repalyTime is expected to be a Number.'))\r\n    }\r\n    this._replayTime = Math.floor(Math.abs(replayTime))\r\n    this._setHistory()\r\n  }\r\n\r\n  _setHistory () {\r\n    const t = this._history.length - this._replayTime\r\n    this._history = this._history.slice(t >= 0 ? t : 0)\r\n  }\r\n\r\n  replayTo (consumer) {\r\n    this._history.forEach(val => {\r\n      consumer(val)\r\n    })\r\n  }\r\n\r\n  replay () {\r\n    this._consumers.forEach((consumer) => {\r\n      this.replayTo(consumer)\r\n    })\r\n  }\r\n\r\n  subscribe (consumer) {\r\n    this._consumers.push(consumer)\r\n    const subscribeController = this._atom.subscribe(consumer)\r\n    this.replayTo(consumer)\r\n    return subscribeController\r\n  }\r\n\r\n  // NOTE: important!!!\r\n  // !!! important\r\n  beObservedBy (...args) {\r\n    return args[0].observe(this)\r\n  }\r\n\r\n  release () {\r\n    this._subscribeController.unsubscribe()\r\n    super.release()\r\n  }\r\n}\r\n\r\nexport const replayWithoutLatest = curryN(2, (replayTime, atom) => {\r\n  return ReplayMediator.of(atom, { replayTime, autoTrigger: false })\r\n})\r\nexport const replayWithLatest = curryN(2, (replayTime, atom) => {\r\n  return ReplayMediator.of(atom, { replayTime, autoTrigger: true })\r\n})\r\n","import { isObject } from '../../internal.js'\r\nimport { isAtom } from '../atom.js'\r\nimport { BaseMediator } from './base.mediators.js'\r\n\r\nexport const isTriggerMediator = tar => isObject(tar) && tar.isTriggerMediator\r\n\r\nexport class TriggerMediator extends BaseMediator {\r\n  constructor (atom) {\r\n    super(atom)\r\n    // _map :: (trigger, controller)\r\n    this._map = new WeakMap()\r\n  }\r\n\r\n  get type () {\r\n    return 'TriggerMediator'\r\n  }\r\n\r\n  get isTriggerMediator () {\r\n    return true\r\n  }\r\n\r\n  static of (atom) {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('TriggerMediator can apply to an Atom only.'))\r\n    }\r\n    return new TriggerMediator(atom)\r\n  }\r\n\r\n  get map () {\r\n    return this._map\r\n  }\r\n\r\n  // _add :: (trigger, controller) -> Map\r\n  _add (trigger, controller) {\r\n    return this._map.set(trigger, controller)\r\n  }\r\n\r\n  // _remove :: trigger -> Boolean\r\n  _remove (trigger) {\r\n    return this._map.delete(trigger)\r\n  }\r\n\r\n  register (trigger, options) {\r\n    const controller = this._atom.registerTrigger(trigger, options)\r\n    controller && this._add(trigger, controller)\r\n    return controller\r\n  }\r\n\r\n  get (trigger) {\r\n    return this._map.get(trigger)\r\n  }\r\n\r\n  // remove :: trigger -> Boolean\r\n  remove (trigger) {\r\n    const controller = this._map.get(trigger)\r\n    controller && controller.cancel()\r\n    return this._remove(trigger)\r\n  }\r\n\r\n  // removeAll :: () -> Boolean\r\n  removeAll () {\r\n    let successFlag = false\r\n    this._map.forEach((controller, trigger) => {\r\n      controller.cancel()\r\n      successFlag = this._remove(trigger) && successFlag\r\n    })\r\n    return successFlag\r\n  }\r\n\r\n  release () {\r\n    this.removeAll()\r\n    super.release()\r\n  }\r\n}\r\n","import { looseCurryN } from '../../functional.js'\r\nimport { Data, Mutation } from '../atom.js'\r\nimport { ReplayMediator, TriggerMediator } from '../mediators.js'\r\n\r\n/**\r\n * create mediator of given atom, then return array of given atom & created mediator\r\n *\r\n * @param atom Atom\r\n * @param mediator Mediator\r\n * @param options optional, options of specified Mediator\r\n */\r\nexport const withMediator = looseCurryN(2, (atom, mediator, options) => {\r\n  const _mediator = mediator.of(atom, options)\r\n  return [atom, _mediator]\r\n})\r\n\r\nexport const withReplayMediator = looseCurryN(1, (atom, options = {}) => withMediator(atom, ReplayMediator, options))\r\nexport const withTriggerMediator = looseCurryN(1, (atom, options = {}) => withMediator(atom, TriggerMediator, options))\r\n\r\n/**\r\n * @return [data, replayMediator]\r\n */\r\nexport const createDataWithReplayMediator = (options = {}) => withReplayMediator(Data.empty(), options)\r\n/**\r\n * @return [mutation, replayMediator]\r\n */\r\nexport const createMutationWithReplayMediator = (options = {}) => withReplayMediator(Mutation.empty(), options)\r\n\r\n/**\r\n * @return [data, triggerMediator]\r\n */\r\nexport const createDataWithTriggerMediator = () => withTriggerMediator(Data.empty())\r\n/**\r\n * @return [mutation, triggerMediator]\r\n */\r\nexport const createMutationWithTriggerMediator = () => withTriggerMediator(Mutation.empty())\r\n\r\n/**\r\n * @param options optional, options of ReplayMediator\r\n * @return [data, replayMediator, options]\r\n */\r\nexport const createDataWithReplay = (options = {}) => {\r\n  const [data, replayMediator] = createDataWithReplayMediator(options)\r\n  return [data, replayMediator, options]\r\n}\r\n/**\r\n * @param options optional, options of ReplayMediator\r\n * @return [mutation, replayMediator, options]\r\n */\r\nexport const createMutationWithReplay = (options = {}) => {\r\n  const [mutation, replayMediator] = createMutationWithReplayMediator(options)\r\n  return [mutation, replayMediator, options]\r\n}\r\n\r\n/**\r\n * @param trigger Trigger\r\n * @return [data, triggerMediator, trigger, controller]\r\n */\r\nexport const createDataWithTrigger = trigger => {\r\n  const [data, triggerMediator] = createDataWithTriggerMediator()\r\n  const controller = triggerMediator.register(trigger)\r\n  return [data, triggerMediator, trigger, controller]\r\n}\r\n/**\r\n * @param trigger Trigger\r\n * @return [mutation, triggerMediator, trigger, controller]\r\n */\r\nexport const createMutationWithTrigger = trigger => {\r\n  const [mutation, triggerMediator] = createMutationWithTriggerMediator()\r\n  const controller = triggerMediator.register(trigger)\r\n  return [mutation, triggerMediator, trigger, controller]\r\n}\r\n","import {\r\n  isString, isFunction, isBoolean, isNumber, isObject,\r\n  isEventTarget, isObservable, isGeneralObject, isIterable,\r\n  hasOwnProperty, asIs\r\n} from '../../internal.js'\r\nimport { compose } from '../../functional.js'\r\nimport { createDataWithTrigger, createMutationWithTrigger } from './hybrid-create.helpers.js'\r\n\r\n/************************************************************************************************************************\r\n *                                                 IterableTrigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param iterable Iterable, which values will be trigged in sequence\r\n * @param autoStart Boolean, optional, default to false, indicate if the iterable will be iterated automatically\r\n * @param repeatable Boolean, optional, defautl to true, indicate if the iterable will be iterated repeatedly\r\n * @param handler Function, optional, default to asIS, will be apply to values before them passed to trigger\r\n */\r\nexport const createIterableTrigger = ({ iterable, handler = asIs, autoStart = false, repeatable = true } = {}) => {\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n  if (!isIterable(iterable)) {\r\n    throw (new TypeError('\"iterable\" is expected to be iterable.'))\r\n  }\r\n\r\n  const iterateState = { times: 0, done: false, values: [] }\r\n  const internalTriggers = new WeakSet()\r\n\r\n  const iterate = () => {\r\n    try {\r\n      iterateState.values = [...iterable]\r\n      iterateState.values.forEach(i => {\r\n        internalTriggers.forEach(trigger => {\r\n          trigger(handler(i))\r\n        })\r\n      })\r\n      iterateState.done = true\r\n      iterateState.times += 1\r\n    } catch (error) {\r\n    }\r\n\r\n    return iterateState\r\n  }\r\n\r\n  return internalTrigger => {\r\n    internalTriggers.add(internalTrigger)\r\n\r\n    if (autoStart) {\r\n      iterate()\r\n    }\r\n\r\n    return {\r\n      start: () => {\r\n        if (repeatable || iterateState.times === 0) {\r\n          iterate()\r\n        }\r\n        return iterateState\r\n      },\r\n      cancel: () => {}\r\n    }\r\n  }\r\n}\r\nexport const formatIterableTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    // accept ({ iterable, ... })\r\n    // accept (Any)\r\n    if (isObject(args[0]) && hasOwnProperty('iterable', args[0])) {\r\n      res = args[0]\r\n    } else {\r\n      res = { iterable: args[0] }\r\n    }\r\n  } else if (args.length > 1) {\r\n    const argsKeyList = ['autoStart', 'repeatable']\r\n    args.forEach(arg => {\r\n      if (isIterable(arg)) {\r\n        res.iterable = res.iterable || arg\r\n      } else if (isFunction(arg)) {\r\n        res.handler = res.handler || arg\r\n      } else if (isBoolean(arg)) {\r\n        res[argsKeyList.shift()] = arg\r\n      }\r\n    })\r\n  }\r\n\r\n  return res\r\n}\r\nexport const createIterableTriggerF = compose(createIterableTrigger, formatIterableTriggerCreatorFlatArgs)\r\nexport const createDataFromIterable = compose(createDataWithTrigger, createIterableTriggerF)\r\nexport const createMutationFromIterable = compose(createMutationWithTrigger, createIterableTriggerF)\r\n\r\n/************************************************************************************************************************\r\n *                                                 EventTrigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param target EventTarget, which has addEventListener method & removeEventListener method\r\n * @param type String, event type which will pass as first argument of addEventListener & removeEventListener\r\n * @param handler Function, optional, default to asIS, will be apply to event argument before it passed to trigger\r\n * @return Trigger\r\n */\r\nexport const createEventTrigger = ({ target, type, handler = asIs } = {}) => {\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n  if (!isEventTarget(target)) {\r\n    throw (new TypeError('\"target\" is expected to be an instance of EventTarget.'))\r\n  }\r\n  return internalTrigger => {\r\n    const listener = e => {\r\n      internalTrigger(handler(e))\r\n    }\r\n    target.addEventListener(type, listener)\r\n    return {\r\n      cancel: () => {\r\n        target.removeEventListener(type, listener)\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const formatEventTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    // accept ({ target: EventTarget, ... })\r\n    // accept (Any)\r\n    if (isObject(args[0]) && hasOwnProperty('target', args[0])) {\r\n      res = args[0]\r\n    } else {\r\n      res = { target: args[0] }\r\n    }\r\n  } else if (args.length > 1) {\r\n    args.forEach(arg => {\r\n      if (isGeneralObject(arg)) {\r\n        res.target = res.target || arg\r\n      } else if (isString(arg)) {\r\n        res.type = res.type || arg\r\n      } else if (isFunction(arg)) {\r\n        res.handler = res.handler || arg\r\n      }\r\n    })\r\n  }\r\n\r\n  return res\r\n}\r\nexport const createEventTriggerF = compose(createEventTrigger, formatEventTriggerCreatorFlatArgs)\r\nexport const createDataFromEvent = compose(createDataWithTrigger, createEventTriggerF)\r\nexport const createMutationFromEvent = compose(createMutationWithTrigger, createEventTriggerF)\r\n\r\n/************************************************************************************************************************\r\n *                                                 IntervalTrigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param start Number, optional, default to 0, (in millisecond) will be the start value of interval value\r\n * @param step Number, optional, default to 1000, (in millisecond) will add to start value when interval goes\r\n * @param interval Number, optional, default to 1000, (in millisecond) will be the ms argument of setInterval\r\n * @param autoStart Boolean, optional, default to true, indicate if the interval will auto start\r\n * @param handler Function, optional, default to asIs, will be apply to interval value before it passed to trigger\r\n * @return Trigger\r\n */\r\nexport const createIntervalTrigger = ({ handler = asIs, start = 0, step = 1000, interval = 1000, autoStart = true } = {}) => {\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n  let i = start\r\n  let timer = 0\r\n  let started = false\r\n  const internalTriggers = new WeakSet()\r\n\r\n  const startInterval = () => {\r\n    started = true\r\n    try {\r\n      timer = setInterval(() => {\r\n        i += step\r\n        internalTriggers.forEach(trigger => {\r\n          trigger(handler(i))\r\n        })\r\n      }, interval)\r\n    } catch (error) {\r\n      started = false\r\n    }\r\n\r\n    return timer\r\n  }\r\n\r\n  return internalTrigger => {\r\n    internalTriggers.add(internalTrigger)\r\n\r\n    if (!started && autoStart) {\r\n      startInterval()\r\n    }\r\n\r\n    return {\r\n      start: () => {\r\n        if (!started) {\r\n          return startInterval()\r\n        }\r\n        return timer\r\n      },\r\n      cancel: () => {\r\n        clearInterval(timer)\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const formatIntervalTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    if (isObject(args[0])) {\r\n      res = args[0]\r\n    }\r\n  } else if (args.length > 1) {\r\n    const argsKeyList = ['start', 'step', 'interval', 'autoStart', 'handler']\r\n    args.forEach((val) => {\r\n      if (isFunction(val)) {\r\n        res.handler = res.handler || val\r\n      } else {\r\n        res[argsKeyList.shift()] = val\r\n      }\r\n    })\r\n  }\r\n\r\n  return res\r\n}\r\nexport const createIntervalTriggerF = compose(createIntervalTrigger, formatIntervalTriggerCreatorFlatArgs)\r\nexport const createDataFromInterval = compose(createDataWithTrigger, createIntervalTriggerF)\r\nexport const createMutationFromInterval = compose(createMutationWithTrigger, createIntervalTriggerF)\r\n\r\n/************************************************************************************************************************\r\n *                                                 TimeoutTrigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param timeout Number, required, (in millisecond) will be the ms argument of setTimeout\r\n * @param autoStart Boolean, optional, default to true, indicate if the timeout will auto start\r\n * @param handler Function, optional, default to asIs, result of its execution will be passed to trigger\r\n * @return Trigger\r\n */\r\nexport const createTimeoutTrigger = ({ timeout, handler = asIs, autoStart = true } = {}) => {\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n  if (!isNumber(timeout)) {\r\n    throw (new TypeError('\"timeout\" is required and expected to be a Number.'))\r\n  }\r\n\r\n  let started = false\r\n  let timer = 0\r\n  const internalTriggers = new WeakSet()\r\n\r\n  const start = () => {\r\n    started = true\r\n    try {\r\n      timer = setTimeout(() => {\r\n        internalTriggers.forEach(trigger => {\r\n          trigger(handler())\r\n        })\r\n      }, timeout)\r\n    } catch (error) {\r\n      started = false\r\n    }\r\n\r\n    return timer\r\n  }\r\n\r\n  return internalTrigger => {\r\n    internalTriggers.add(internalTrigger)\r\n\r\n    if (!started && autoStart) {\r\n      start()\r\n    }\r\n\r\n    return {\r\n      start: () => {\r\n        if (!started) {\r\n          return start()\r\n        }\r\n        return timer\r\n      },\r\n      cancel: () => {\r\n        clearTimeout(timer)\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const formatTimeoutTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    if (isObject(args[0])) {\r\n      res = args[0]\r\n    }\r\n  } else if (args.length > 1) {\r\n    args.forEach(arg => {\r\n      if (isNumber(arg)) {\r\n        res.timeout = hasOwnProperty('timeout', res) ? res.timeout : arg\r\n      } else if (isFunction(arg)) {\r\n        res.handler = hasOwnProperty('handler', res) ? res.handler : arg\r\n      } else if (isBoolean(arg)) {\r\n        res.autoStart = hasOwnProperty('autoStart', res) ? res.autoStart : arg\r\n      }\r\n    })\r\n  }\r\n\r\n  return res\r\n}\r\nexport const createTimeoutTriggerF = compose(createTimeoutTrigger, formatTimeoutTriggerCreatorFlatArgs)\r\nexport const createDataFromTimeout = compose(createDataWithTrigger, createTimeoutTriggerF)\r\nexport const createMutationFromTimeout = compose(createMutationWithTrigger, createTimeoutTriggerF)\r\n\r\n/************************************************************************************************************************\r\n *                                                 ObservableTrigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param observable Observable, required\r\n * @param autoStart Boolean, optional, default to true, indicate if the Observable will be subscribed automatically\r\n * @param handler Function, optional, default to asIs, will be apply to emitted value of Observable before it passed to trigger\r\n * @return Trigger\r\n */\r\nexport const createObservableTrigger = ({ observable, handler = asIs, autoStart = true }) => {\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n  if (!isObservable(observable)) {\r\n    throw (new TypeError('\"observable\" is expected to be an observable object which implements the subscribe method.'))\r\n  }\r\n\r\n  let started = false\r\n  let subscription\r\n  const internalTriggers = new WeakSet()\r\n\r\n  const start = () => {\r\n    try {\r\n      started = true\r\n      subscription = observable.subscribe(val => {\r\n        internalTriggers.forEach(trigger => {\r\n          trigger(handler(val))\r\n        })\r\n      })\r\n    } catch (error) {\r\n      started = false\r\n    }\r\n    return subscription\r\n  }\r\n\r\n  return internalTrigger => {\r\n    internalTriggers.add(internalTrigger)\r\n\r\n    if (!started && autoStart) {\r\n      start()\r\n    }\r\n\r\n    return {\r\n      start: () => {\r\n        if (!started) {\r\n          return start()\r\n        }\r\n        return subscription\r\n      },\r\n      cancel: () => {\r\n        return subscription.unsubscribe()\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const formatObservableTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    if (isObject(args[0])) {\r\n      res = args[0]\r\n    }\r\n  } else if (args.length > 1) {\r\n    args.forEach(arg => {\r\n      if (isObservable(arg)) {\r\n        res.observable = hasOwnProperty('observable', res) ? res.observable : arg\r\n      } else if (isFunction(arg)) {\r\n        res.handler = hasOwnProperty('handler', res) ? res.handler : arg\r\n      } else if (isBoolean(arg)) {\r\n        res.autoStart = hasOwnProperty('autoStart', res) ? res.autoStart : arg\r\n      }\r\n    })\r\n  }\r\n  return res\r\n}\r\nexport const createObservableTriggerF = compose(createObservableTrigger, formatObservableTriggerCreatorFlatArgs)\r\nexport const createDataFromObservable = compose(createDataWithTrigger, createObservableTriggerF)\r\nexport const createMutationFromObservable = compose(createMutationWithTrigger, createObservableTriggerF)\r\n\r\n/************************************************************************************************************************\r\n *                                                 normal function trigger creators\r\n ************************************************************************************************************************/\r\n/**\r\n * @param agent Function, required, which takes emitFunction as argument, it will execute in create process\r\n * @param autoStart Boolean, optional, default to true, indicate if the shouldEmit will be set to true initially\r\n * @param handler Function, optional, default to asIs, will be apply to emitted value of emitFunction before it passed to trigger\r\n * @return Trigger\r\n */\r\nexport const createFunctionTrigger = ({ agent, handler = asIs, autoStart = true }) => {\r\n  if (!isFunction(agent)) {\r\n    throw (new TypeError('\"agent\" is expected to be a Function.'))\r\n  }\r\n  if (!isFunction(handler)) {\r\n    throw (new TypeError('\"handler\" is expected to be a Function.'))\r\n  }\r\n\r\n  let shouldEmit = autoStart\r\n\r\n  return internalTrigger => {\r\n    let emitFunction = (...args) => {\r\n      if (shouldEmit) {\r\n        internalTrigger(handler(...args))\r\n      }\r\n    }\r\n    agent(emitFunction)\r\n    return {\r\n      start: () => { shouldEmit = true },\r\n      pause: () => { shouldEmit = false },\r\n      cancel: () => {\r\n        shouldEmit = false\r\n        emitFunction = null\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const formatFunctionTriggerCreatorFlatArgs = (...args) => {\r\n  let res = {}\r\n\r\n  if (args.length === 1) {\r\n    if (isObject(args[0])) {\r\n      res = args[0]\r\n    } else if (isFunction(args[0])) {\r\n      res.agent = args[0]\r\n    }\r\n  } else if (args.length > 1) {\r\n    args.forEach(arg => {\r\n      if (isFunction(arg)) {\r\n        if (!res.agent) {\r\n          res.agent = arg\r\n        } else if (!res.handler) {\r\n          res.handler = arg\r\n        }\r\n      } else if (isBoolean(arg)) {\r\n        res.autoStart = hasOwnProperty('autoStart', res) ? res.autoStart : arg\r\n      }\r\n    })\r\n  }\r\n  return res\r\n}\r\nexport const createFunctionTriggerF = compose(createFunctionTrigger, formatFunctionTriggerCreatorFlatArgs)\r\nexport const createDataFromFunction = compose(createDataWithTrigger, createFunctionTriggerF)\r\nexport const createMutationFromFunction = compose(createMutationWithTrigger, createFunctionTriggerF)\r\n","import { isObject } from '../../internal.js'\r\nimport { Data, Mutation } from '../atom.js'\r\n\r\nexport const createEmptyData = () => Data.empty()\r\nexport const createEmptyMutation = () => Mutation.empty()\r\n\r\nexport const createDataOf = (value, options) => Data.of(value, options)\r\nexport const createMutationOf = (operation, options) => {\r\n  if (!options || !isObject(options)) return Mutation.of(operation)\r\n  return Mutation.ofLift(operation, options)\r\n}\r\n\r\nexport const createMutationOfLL = (operation, options) => Mutation.ofLiftLeft(operation, options)\r\nexport const createMutationOfLR = (operation, options) => Mutation.ofLiftRight(operation, options)\r\nexport const createMutationOfLB = (operation, options) => Mutation.ofLiftBoth(operation, options)\r\n","import { isFunction, isObject } from '../../internal.js'\r\nimport { looseCurryN } from '../../functional.js'\r\nimport { Mutation, isMutation, Data, isData, isAtom } from '../atom.js'\r\nimport { isReplayMediator, replayWithLatest } from '../mediators.js'\r\n\r\nconst DEFAULT_MUTATION_OPTIONS = { liftType: 'both' }\r\n\r\n/**\r\n * @param mutation Mutation\r\n * @return atom Data\r\n */\r\nexport const mutationToDataS = looseCurryN(1, (mutation, options = {}) => {\r\n  if (!isMutation(mutation)) {\r\n    throw (new TypeError(`\"mutation\" is expected to be type of \"Mutation\", but received \"${typeof mutation}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _data = Data.empty(options)\r\n  _data.observe(mutation)\r\n\r\n  if (isReplayMediator(mutation)) {\r\n    return replayWithLatest(1, _data)\r\n  } else {\r\n    return _data\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param mutation Mutation\r\n * @param options Object, optional\r\n * @return atom Data | ReplayMediator, same type of param \"mutation\"\r\n */\r\nexport const mutationToData = looseCurryN(2, (transform, mutation, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isMutation(mutation)) {\r\n    throw (new TypeError(`\"mutation\" is expected to be type of \"Mutation\", but received \"${typeof mutation}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _data = Data.empty()\r\n  const _mutation = Mutation.ofLift(transform, options)\r\n  const _data2 = Data.empty()\r\n\r\n  _data2.observe(_mutation)\r\n  _mutation.observe(_data)\r\n  _data.observe(mutation)\r\n\r\n  if (isReplayMediator(mutation)) {\r\n    return replayWithLatest(1, _data2)\r\n  } else {\r\n    return _data2\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param data Data | ReplayMediator\r\n * @param options Object, optional\r\n * @return atom Data | ReplayMediator, same type of param \"data\"\r\n */\r\nexport const dataToData = looseCurryN(2, (transform, data, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isData(data)) {\r\n    throw (new TypeError(`\"data\" is expected to be type of \"Data\", but received \"${typeof data}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _mutation = Mutation.ofLift(transform, options)\r\n  const _data = Data.empty()\r\n\r\n  _data.observe(_mutation)\r\n  _mutation.observe(data)\r\n\r\n  if (isReplayMediator(data)) {\r\n    return replayWithLatest(1, _data)\r\n  } else {\r\n    return _data\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param atom Atom\r\n * @param options Object, optional\r\n * @return atom Data\r\n */\r\nexport const atomToData = looseCurryN(2, (transform, atom, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isAtom(atom)) {\r\n    throw (new TypeError(`\"atom\" is expected to be type of \"Mutation\" | \"Data\", but received \"${typeof atom}\".`))\r\n  }\r\n\r\n  if (isMutation(atom)) {\r\n    return mutationToData(transform, atom, options)\r\n  }\r\n  if (isData(atom)) {\r\n    return dataToData(transform, atom, options)\r\n  }\r\n\r\n  throw (new TypeError('Unrecognized type of \"Atom\" received in atomToData, expected \"Mutation\" | \"Data\".'))\r\n})\r\n\r\n/**\r\n * @param data Data\r\n * @return atom Mutation\r\n */\r\nexport const dataToMutationS = looseCurryN(1, (data, options = {}) => {\r\n  if (!isData(data)) {\r\n    throw (new TypeError(`\"data\" is expected to be type of \"Data\", but received \"${typeof data}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _mutation = Mutation.ofLiftBoth(prev => prev, options)\r\n\r\n  _mutation.observe(data)\r\n\r\n  if (isReplayMediator(data)) {\r\n    return replayWithLatest(1, _mutation)\r\n  } else {\r\n    return _mutation\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param data Atom\r\n * @param options Object, optional\r\n * @retrun atom Mutation\r\n */\r\nexport const dataToMutation = looseCurryN(2, (transform, data, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isData(data)) {\r\n    throw (new TypeError(`\"data\" is expected to be type of \"Data\", but received \"${typeof data}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _mutation = Mutation.ofLift(transform, options)\r\n\r\n  _mutation.observe(data)\r\n\r\n  if (isReplayMediator(data)) {\r\n    return replayWithLatest(1, _mutation)\r\n  } else {\r\n    return _mutation\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param mutation Mutation\r\n * @param options Object, optional\r\n * @return atom Mutation\r\n */\r\nexport const mutationToMutation = looseCurryN(2, (transform, mutation, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isMutation(mutation)) {\r\n    throw (new TypeError(`\"mutation\" is expected to be type of \"Mutation\", but received \"${typeof mutation}\".`))\r\n  }\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const _data = Data.empty()\r\n  const _mutation = Mutation.ofLift(transform, options)\r\n\r\n  _mutation.observe(_data)\r\n  _data.observe(mutation)\r\n\r\n  if (isReplayMediator(mutation)) {\r\n    return replayWithLatest(1, _mutation)\r\n  } else {\r\n    return _mutation\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param atom Atom\r\n * @param options Object, optional\r\n * @param atom Mutation\r\n */\r\nexport const atomToMutation = looseCurryN(2, (transform, atom, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError(`\"transform\" is expected to be type of \"Function\", but received \"${typeof transform}\".`))\r\n  }\r\n  if (!isAtom(atom)) {\r\n    throw (new TypeError(`\"atom\" is expected to be type of \"Mutation\" | \"Data\", but received \"${typeof atom}\".`))\r\n  }\r\n\r\n  if (isMutation(atom)) {\r\n    return mutationToMutation(transform, atom, options)\r\n  }\r\n  if (isData(atom)) {\r\n    return dataToMutation(transform, atom, options)\r\n  }\r\n\r\n  throw (new TypeError('Unrecognized type of \"Atom\" received in atomToMutation, expected \"Mutation\" | \"Data\".'))\r\n})\r\n","import { isArray, isObject, isFunction } from '../../internal.js'\r\nimport { looseCurryN } from '../../functional.js'\r\nimport { isMutator } from '../meta.js'\r\nimport { Data, Mutation, isData, isMutation, isAtom } from '../atom.js'\r\nimport { mutationToDataS, dataToMutationS } from './transform.helpers.js'\r\n\r\n/**\r\n * items will be wrapped in Data.\r\n */\r\nconst forceWrapToData = (item) => Data.of(item)\r\n/**\r\n * Mutations will be transform to Data, Datas will not be handled, other values will be wrapped in Data.\r\n */\r\nconst wrapToData = (item) => isData(item) ? item : (isMutation(item) ? mutationToDataS(item) : Data.of(item))\r\n/**\r\n * forceWrap - true: items will be wrapped in Data.\r\n *\r\n * forceWrap - false: Mutations will be transform to Data, Datas will not be handled, other values will be wrapped in Data.\r\n */\r\nexport const createDataInArray = looseCurryN(1, (arr, options = {}) => {\r\n  if (!isArray(arr)) {\r\n    throw new TypeError(`\"arr\" argument in createDataInArray is expected to be type of \"Array\", but received ${typeof arr}.`)\r\n  }\r\n\r\n  const { forceWrap = false } = options\r\n\r\n  const wrapFn = forceWrap ? forceWrapToData : wrapToData\r\n  return arr.map(wrapFn)\r\n})\r\n/**\r\n * forceWrap - true: items will be wrapped in Data.\r\n *\r\n * forceWrap - false: Mutations will be transform to Data, Datas will not be handled, other values will be wrapped in Data.\r\n */\r\nexport const createDataInObject = looseCurryN(1, (obj, options = { }) => {\r\n  if (!isObject(obj)) {\r\n    throw new TypeError(`\"obj\" argument in createDataInObject is expected to be type of \"Objcet\", but received ${typeof obj}.`)\r\n  }\r\n  const { forceWrap = false } = options\r\n  const result = {}\r\n\r\n  const wrapFn = forceWrap ? forceWrapToData : wrapToData\r\n  Object.entries(obj).map(([key, value]) => {\r\n    result[key] = wrapFn(value)\r\n  })\r\n\r\n  return result\r\n})\r\n\r\n/**\r\n * Datas will be transform to Mutation, Mutations will not be handled, other values will be wrapped in Mutation.\r\n */\r\nconst forceWrapToMutation = (item) => Mutation.of(() => item)\r\n/**\r\n * items will be wrapped in Mutation.\r\n */\r\nconst wrapToMutation = (item) => {\r\n  if (isData(item)) {\r\n    return dataToMutationS(item)\r\n  } else if (isMutation(item)) {\r\n    return item\r\n  } else if (isMutator(item)) {\r\n    return Mutation.of(item)\r\n  } else if (isFunction(item)) {\r\n    return Mutation.ofLiftBoth(item)\r\n  } else {\r\n    return Mutation.of(() => item)\r\n  }\r\n}\r\n/**\r\n * forceWrap - true: items will be wrapped in Mutation.\r\n *\r\n * forceWrap - false: Datas will be transform to Mutation, Mutations will not be handled, other values will be wrapped in Mutation.\r\n */\r\nexport const createMutationInArray = looseCurryN(1, (arr, options = {}) => {\r\n  if (!isArray(arr)) {\r\n    throw new TypeError(`\"arr\" argument in createMutationInArray is expected to be type of \"Array\", but received ${typeof arr}.`)\r\n  }\r\n  const { forceWrap = false } = options\r\n\r\n  const wrapFn = forceWrap ? forceWrapToMutation : wrapToMutation\r\n  return arr.map(wrapFn)\r\n})\r\n/**\r\n * forceWrap - true: items will be wrapped in Mutation.\r\n *\r\n * forceWrap - false: Datas will be transform to Mutation, Mutations will not be handled, other values will be wrapped in Mutation.\r\n */\r\nexport const createMutationInObject = looseCurryN(1, (obj, options = {}) => {\r\n  if (!isObject(obj)) {\r\n    throw new TypeError(`\"obj\" argument in createMutationInObject is expected to be type of \"Objcet\", but received ${typeof obj}.`)\r\n  }\r\n  const { forceWrap = false } = options\r\n\r\n  const result = {}\r\n  const wrapFn = forceWrap ? forceWrapToMutation : wrapToMutation\r\n  Object.entries(obj).map(([key, value]) => {\r\n    result[key] = wrapFn(value)\r\n  })\r\n\r\n  return result\r\n})\r\n\r\n/**\r\n * functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n */\r\nconst forceWrapToAtom = (item) => Data.of(item)\r\n\r\n/**\r\n * Atoms will not be handled, functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n */\r\nconst wrapToAtom = (item) => {\r\n  if (isAtom(item)) {\r\n    return item\r\n  } else if (isMutator(item)) {\r\n    return Mutation.of(item)\r\n  } else if (isFunction(item)) {\r\n    return Mutation.ofLiftBoth(item)\r\n  } else {\r\n    return Data.of(item)\r\n  }\r\n}\r\n\r\n/**\r\n * forceWrap - true: functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n *\r\n * forceWrap - false: Atoms will not be handled, functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n */\r\nexport const createAtomInArray = looseCurryN(1, (arr, options = {}) => {\r\n  if (!isArray(arr)) {\r\n    throw new TypeError(`\"arr\" argument in createAtomInArray is expected to be type of \"Array\", but received ${typeof arr}.`)\r\n  }\r\n  const { forceWrap = false } = options\r\n\r\n  const wrapFn = forceWrap ? forceWrapToAtom : wrapToAtom\r\n  return arr.map(wrapFn)\r\n})\r\n/**\r\n * forceWrap - true: functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n *\r\n * forceWrap - false: Atoms will not be handled, functions will be wrapped in Mutation, other values will be wrapped in Data.\r\n */\r\nexport const createAtomInObject = looseCurryN(1, (obj, options = {}) => {\r\n  if (!isObject(obj)) {\r\n    throw new TypeError(`\"obj\" argument in createMutationInObject is expected to be type of \"Objcet\", but received ${typeof obj}.`)\r\n  }\r\n  const { forceWrap = false } = options\r\n\r\n  const result = {}\r\n  const wrapFn = forceWrap ? forceWrapToAtom : wrapToAtom\r\n  Object.entries(obj).map(([key, value]) => {\r\n    result[key] = wrapFn(value)\r\n  })\r\n\r\n  return result\r\n})\r\n","import { invoker, flip, curryN } from '../functional.js'\r\nimport { isAtom, isData, isMutation, Mutation, Data } from './atom.js'\r\nimport { isMediator } from './mediators.js'\r\n\r\nexport * from './helpers/normal-create.helpers.js'\r\nexport * from './helpers/batch-create.helpers.js'\r\nexport * from './helpers/hybrid-create.helpers.js'\r\nexport * from './helpers/derive-create.helpers.js'\r\nexport * from './helpers/transform.helpers.js'\r\n\r\nexport const observe = invoker(2, 'observe')\r\nexport const beObservedBy = invoker(2, 'beObservedBy')\r\n\r\nexport const getAtomType = tar => {\r\n  return isMediator(tar) ? getAtomType(tar.atom) : tar.type\r\n}\r\n\r\nexport const isSameTypeOfAtom = curryN(2, (tarA, tarB) => {\r\n  if (!isAtom(tarA) || !isAtom(tarB)) {\r\n    return false\r\n  } else {\r\n    const atomTypeA = getAtomType(tarA)\r\n    const atomTypeB = getAtomType(tarB)\r\n    return atomTypeA === atomTypeB\r\n  }\r\n})\r\nexport const isSameTypeOfMediator = curryN(2, (tarA, tarB) => isMediator(tarA) && isMediator(tarB) && tarA.type === tarB.type)\r\n\r\nexport const pipeAtom = (...args) => {\r\n  args.reverse().forEach((cur, idx, all) => {\r\n    if (idx >= 1) {\r\n      cur.beObservedBy(all[idx - 1])\r\n    }\r\n  })\r\n  return args[args.length - 1]\r\n}\r\n\r\nexport const composeAtom = (...args) => {\r\n  args.forEach((cur, idx, all) => {\r\n    if (idx >= 1) {\r\n      cur.beObservedBy(all[idx - 1])\r\n    }\r\n  })\r\n  return args[0]\r\n}\r\n\r\n/**\r\n * Automatically pipe two atom\r\n *\r\n * - if they are in the different type, use normal pipe logic\r\n * - if they are in the same type, create a tween atom between them,\r\n *   then use normal pipe logic to three atom\r\n *   - for Data atom, tween atom is the type of Mutation (asIs Mutation)\r\n *   - for Mutation atom, tween atom is the type of Data\r\n *\r\n * @param upstreamAtom Atom, i.e. Data | Mutation\r\n * @param downstreamAtom Atom, i.e. Data | Mutation\r\n * @return downstreamAtom\r\n */\r\nexport const binaryTweenPipeAtom = (upstreamAtom, downstreamAtom) => {\r\n  if (!isAtom(upstreamAtom)) {\r\n    throw (new TypeError('\"upstreamAtom\" argument of binaryTweenPipeAtom are expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n  if (!isAtom(downstreamAtom)) {\r\n    throw (new TypeError('\"downstreamAtom\" argument of binaryTweenPipeAtom are expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n\r\n  if (!isSameTypeOfAtom(upstreamAtom, downstreamAtom)) {\r\n    // data, mutation\r\n    // mutation, data\r\n    return pipeAtom(upstreamAtom, downstreamAtom)\r\n  } else {\r\n    // data, data\r\n    // mutation, mutation\r\n    let tweenAtom\r\n    if (isData(upstreamAtom)) {\r\n      tweenAtom = Mutation.ofLiftLeft(v => v)\r\n    } else if (isMutation(upstreamAtom)) {\r\n      tweenAtom = Data.empty()\r\n    } else {\r\n      throw (new TypeError('Unexpected type of Atom detected!'))\r\n    }\r\n    return pipeAtom(upstreamAtom, tweenAtom, downstreamAtom)\r\n  }\r\n}\r\n\r\n/**\r\n * Automatically compose two atom\r\n *\r\n * - if they are in the different type, use normal compose logic\r\n * - if they are in the same type, create a tween atom between them,\r\n *   then use normal compose logic to three atom\r\n *   - for Data atom, tween atom is the type of Mutation (asIs Mutation)\r\n *   - for Mutation atom, tween atom is the type of Data\r\n *\r\n * @param downstreamAtom Atom, i.e. Data | Mutation\r\n * @param upstreamAtom Atom, i.e. Data | Mutation\r\n * @return downstreamAtom\r\n */\r\nexport const binaryTweenComposeAtom = flip(binaryTweenPipeAtom)\r\n\r\nexport const nAryTweenPipeAtom = (...args) => {}\r\nexport const nAryTweenComposeAtom = (...args) => {}\r\n\r\nexport const binaryLiftPipeAtom = () => {}\r\nexport const binaryLiftComposeAtom = () => {}\r\n\r\nexport const nAryLiftPipeAtom = (...args) => {}\r\nexport const nAryLiftComposeAtom = (...args) => {}\r\n\r\nexport const binaryHyperPipeAtom = () => {}\r\nexport const binaryHyperComposeAtom = () => {}\r\n\r\nexport const nAryHyperPipeAtom = (...args) => {}\r\nexport const nAryHyperComposeAtom = (...args) => {}\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Mutation, Data, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param pred Function | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const filterT = curryN(2, (pred, target) => {\r\n  if (isFunction(pred)) {\r\n    return staticFilterT(pred, target)\r\n  } else if (isAtom(pred)) {\r\n    return dynamicFilterT(pred, target)\r\n  } else {\r\n    throw (new TypeError('\"pred\" argument of filterT is expected to be type of \"Function\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param pred Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicFilterT = curryN(2, (pred, target) => {\r\n  if (!isAtom(pred)) {\r\n    throw (new TypeError('\"pred\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapPredM = Mutation.ofLiftLeft(prev => ({ type: 'pred', value: prev }))\r\n  const wrappedPredD = Data.empty()\r\n  pipeAtom(wrapPredM, wrappedPredD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const filterM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { pred: false, target: false, index: -1 }\r\n    const _internalValues = { pred: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'pred' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in filterM, expected to be \"pred\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.pred || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'pred') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        _internalStates.index = _internalStates.index + 1\r\n        return _internalValues.pred(_internalValues.target, _internalStates.index) ? _internalValues.target : TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedPredD, filterM)\r\n  pipeAtom(wrappedTargetD, filterM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(filterM, outputD)\r\n\r\n  binaryTweenPipeAtom(pred, wrapPredM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param pred Function\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticFilterT = curryN(2, (pred, target) => {\r\n  if (!isFunction(pred)) {\r\n    throw (new TypeError('\"pred\" argument of staticFilterT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicFilterT(replayWithLatest(1, Data.of(pred)), target)\r\n})\r\n","import { Data, createDataFromEvent, ReplayMediator, filterT } from '../atom/index.js'\r\n\r\n// ref: https://zh.javascript.info/onload-ondomcontentloaded\r\n// ref: https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState\r\nexport const domLoadedD = createDataFromEvent(document, 'DOMContentLoaded')[0]\r\nexport const domLoadedRD = ReplayMediator.of(domLoadedD, { autoTrigger: true })\r\n\r\nexport const windowLoadedD = createDataFromEvent(window, 'load')[0]\r\nexport const windowLoadedRD = ReplayMediator.of(windowLoadedD, { autoTrigger: true })\r\n\r\nexport const readyStateD = createDataFromEvent(document, 'readystatechange', () => document.readyState)[0]\r\nexport const readyStateRD = ReplayMediator.of(readyStateD, { autoTrigger: true })\r\nreadyStateD.triggerValue(document.readyState)\r\n\r\nexport const interactiveStateD = filterT(v => v === 'interactive' || v === 'complete', readyStateRD)\r\nexport const interactiveStateRD = ReplayMediator.of(interactiveStateD, { autoTrigger: true })\r\n\r\nexport const completeStateD = filterT(v => v === 'complete', readyStateRD)\r\nexport const completeStateRD = ReplayMediator.of(completeStateD, { autoTrigger: true })\r\n\r\nexport const windowResizeD = createDataFromEvent(window, 'resize')[0]\r\nexport const windowResizeRD = ReplayMediator.of(windowResizeD, { autoTrigger: true })\r\nwindowResizeD.triggerValue({ type: 'resize', target: window })\r\n\r\nexport const windowD = Data.of(window)\r\nexport const windowRD = ReplayMediator.of(windowD, { autoTrigger: true })\r\n\r\nexport const documentD = Data.of(document)\r\nexport const documentRD = ReplayMediator.of(documentD, { autoTrigger: true })\r\n","import { isString, isNumber } from '../internal.js'\r\nimport { curryN } from '../functional.js'\r\n\r\nexport const injectScript = (src, onload = () => {}, removeAfterLoad = false) => {\r\n  const script = document.createElement('script')\r\n  script.setAttribute('type', 'text/javascript')\r\n  script.src = src\r\n  script.onload = (...args) => {\r\n    onload(...args)\r\n    if (removeAfterLoad) {\r\n      script.parentNode.removeChild(script)\r\n    }\r\n  }\r\n  document.head.appendChild(script)\r\n  return script\r\n}\r\n\r\nexport const makeCustomEvent = curryN(3, (type, detail, options) =>\r\n  new CustomEvent(type, { ...(options || {}), detail: { eventType: type, ...(detail || {}) } })\r\n)\r\n\r\n/**\r\n * @param selector String, id | selector\r\n * @param interval Number, polling interval (in ms)\r\n * @return undefined\r\n */\r\nexport const pollingToGetNode = curryN(3, (selector, interval, callback) => {\r\n  if (!isString(selector)) {\r\n    throw (new TypeError('\"selector\" argument of pollingToGetNode is expected to be type of \"String\".'))\r\n  }\r\n  if (!isNumber(interval)) {\r\n    throw (new TypeError('\"interval\" argument of pollingToGetNode is expected to be type of \"Number\".'))\r\n  }\r\n  let node\r\n  let timer = 0\r\n  timer = setInterval(() => {\r\n    if (selector.includes('#') || selector.includes('.')) {\r\n      node = node || document.querySelector(selector)\r\n    } else {\r\n      node = node || document.getElementById(selector)\r\n    }\r\n    if (node) {\r\n      clearInterval(timer)\r\n      callback(node)\r\n    }\r\n  }, interval)\r\n})\r\n","import {\r\n  Mutation, Data, isMutation, isData, isAtom,\r\n  pipeAtom, dataToData, mutationToDataS, dataToMutationS, atomToMutation,\r\n  filterT,\r\n  createDataFromFunction, createDataFromEvent\r\n} from '../atom.js'\r\nimport { completeStateRD } from './event.js'\r\nimport { isObject, isFunction, hasOwnProperty } from '../internal.js'\r\nimport { makeCustomEvent } from './dom.js'\r\n\r\nconst GLOBAL_VARS = new Map()\r\nexport const globalVar = (key, value) => {\r\n  if (value) {\r\n    GLOBAL_VARS.set(key, value)\r\n  }\r\n  return GLOBAL_VARS.get(key)\r\n}\r\n\r\nexport const makeEventHandler = (handler = v => v) => {\r\n  let eventHandler\r\n  const agent = handler => {\r\n    eventHandler = handler\r\n  }\r\n  const [data, triggerMediator, trigger] = createDataFromFunction(agent, e => handler(e))\r\n\r\n  return [eventHandler, data, triggerMediator, trigger]\r\n}\r\n\r\nexport const makeGeneralEventHandler = (handler = v => v) => {\r\n  const [eventHandler, data, triggerMediator, trigger] = makeEventHandler(handler)\r\n  const eventHandlerRD = dataToData(() => eventHandler, completeStateRD)\r\n  return [eventHandlerRD, eventHandler, data, triggerMediator, trigger]\r\n}\r\n\r\nconst _elementBasedMessageProxyMap = new Map()\r\nglobalVar('elementBasedMessageProxyMap', _elementBasedMessageProxyMap)\r\nexport const makeElementBasedMessageProxy = (id, type, name) => {\r\n  const proxy = _elementBasedMessageProxyMap.get(id + type)\r\n  if (proxy) {\r\n    return proxy\r\n  }\r\n\r\n  let ele = document.getElementById(id)\r\n  if (!ele) {\r\n    const tempEle = document.createElement('div')\r\n    tempEle.id = id\r\n    tempEle.style.display = 'none'\r\n    document.body.appendChild(tempEle)\r\n    ele = tempEle\r\n  }\r\n\r\n  const ElementBasedMessageProxy = class {\r\n    constructor (ele, type, name) {\r\n      const [data] = createDataFromEvent(ele, type)\r\n\r\n      const onymousInnerMessageD = Data.empty()\r\n      const onymousSendM = Mutation.ofLiftBoth((prev) => {\r\n        let detail, options\r\n        if (isObject(prev)) {\r\n          if (hasOwnProperty('detail', prev) && hasOwnProperty('options', prev)) {\r\n            detail = prev.detail\r\n            options = prev.options\r\n          } else {\r\n            detail = prev\r\n          }\r\n        } else {\r\n          detail = { data: prev }\r\n        }\r\n        detail.from = name\r\n        ele.dispatchEvent(makeCustomEvent(type, detail, options))\r\n        return { type, detail, options }\r\n      })\r\n      const anonymousSendM = Mutation.ofLiftBoth((prev) => {\r\n        let detail, options\r\n        if (isObject(prev)) {\r\n          if (hasOwnProperty('detail', prev) && hasOwnProperty('options', prev)) {\r\n            detail = prev.detail\r\n            options = prev.options\r\n          } else {\r\n            detail = prev\r\n          }\r\n        } else {\r\n          detail = { data: prev }\r\n        }\r\n        ele.dispatchEvent(makeCustomEvent(type, detail, options))\r\n        return { type, detail, options }\r\n      })\r\n      const sendedD = Data.empty()\r\n      pipeAtom(onymousInnerMessageD, onymousSendM, sendedD)\r\n      pipeAtom(anonymousSendM, sendedD)\r\n\r\n      this.element = ele\r\n      this.type = type\r\n      this.name = name\r\n\r\n      this.innerMessageD = onymousInnerMessageD\r\n      this.sender = onymousSendM\r\n      this.onymousSender = onymousSendM\r\n      this.anonymousSender = onymousSendM\r\n      this.sendedD = sendedD\r\n      const namedReceiver = filterT(prev => prev.detail.to === name, data)\r\n      this.receiver = namedReceiver\r\n      this.broadReceiver = data\r\n      this.namedReceiver = namedReceiver\r\n      this.anonymousReceiver = filterT(prev => prev.detail.from === undefined, data)\r\n    }\r\n\r\n    customizeReveiver (cond) {\r\n      if (isFunction(cond)) {\r\n        return filterT(cond, this.broadReceiver)\r\n      } else if (isObject(cond)) {\r\n        // TODO\r\n        console.warn(\"TODO: Object type of cond as customizeReveiver's argument, you got a broadReceiver instead.\")\r\n        return this.broadReceiver\r\n      } else {\r\n        throw (new TypeError('\"cond\" is expected to be a Function or an Object'))\r\n      }\r\n    }\r\n\r\n    send (message) {\r\n      if (isData(message)) {\r\n        return this.sender.observe(message)\r\n      } else if (isMutation(message)) {\r\n        return this.sender.observe(mutationToDataS(message))\r\n      } else {\r\n        this.innerMessageD.triggerValue(message)\r\n      }\r\n    }\r\n\r\n    receive (handler) {\r\n      if (isMutation(handler)) {\r\n        return handler.observe(this.receiver)\r\n      } else if (isData(handler)) {\r\n        return dataToMutationS(handler).observe(this.receiver)\r\n      } else if (isFunction(handler)) {\r\n        return this.receiver.subscribe(({ value }) => {\r\n          handler(value)\r\n        })\r\n      } else {\r\n        throw (new TypeError('\"handler\" is expected to be type of Mutation | Data | Function.'))\r\n      }\r\n    }\r\n\r\n    receiveDetail (handler) {\r\n      if (isFunction(handler)) {\r\n        return this.receiver.subscribe(({ value: e }) => {\r\n          handler(e.detail)\r\n        })\r\n      } else if (isAtom(handler)) {\r\n        return atomToMutation(e => e.detail, handler).observe(this.receiver)\r\n      } else {\r\n        throw (new TypeError('\"handler\" is expected to be type of Mutation | Data | Function.'))\r\n      }\r\n    }\r\n  }\r\n\r\n  const _proxy = new ElementBasedMessageProxy(ele, type, name)\r\n  _elementBasedMessageProxyMap.set(id + type, _proxy)\r\n  return _proxy\r\n}\r\n","import {\r\n  isString, isObject, isArray, isFunction\r\n} from '../internal.js'\r\nimport {\r\n  Data, isAtom,\r\n  replayWithLatest,\r\n  binaryTweenPipeAtom\r\n} from '../atom.js'\r\n\r\n/**\r\n * Map{\r\n *   [Creator | CreatorInfo]: ScopeManager{\r\n *     [scope]: Instance,\r\n *     ...\r\n *   },\r\n *   ...\r\n * }\r\n */\r\n\r\nconst SCOPE_MANAGERS = new Map()\r\n\r\n/**\r\n * @param { object | function } creator\r\n * @param { object? } options\r\n * @return ScopeManager\r\n */\r\nconst createScopeManager = (creator, options) => {\r\n  if (!creator) throw (new TypeError('\"creator\" is required!'))\r\n  const scopeMap = new Map()\r\n  const promiseMap = new Map()\r\n\r\n  return {\r\n    getCreator: () => creator,\r\n    getOptions: () => options,\r\n\r\n    /**\r\n     * @param { string } scope\r\n     * @return { boolean } given scope is registered or not\r\n     */\r\n    isRegisteredScope: scope => !!scopeMap.get(scope),\r\n\r\n    /**\r\n     * @param { string } scope\r\n     * @return { boolean }\r\n     */\r\n    releaseScope: scope => {\r\n      return scopeMap.delete(scope)\r\n    },\r\n    releaseManager: () => {\r\n      const { isStray, strayFlag } = options\r\n      if (isStray) {\r\n        let res = false\r\n        SCOPE_MANAGERS.forEach((val, key) => {\r\n          if (!res && key.flag === strayFlag) {\r\n            res = SCOPE_MANAGERS.delete(key)\r\n          }\r\n        })\r\n        return res\r\n      } else {\r\n        return SCOPE_MANAGERS.delete(creator)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * register an instance with given scope,\r\n     * if there is none, create one,\r\n     * if there is one, just return it.\r\n     *\r\n     * @param { string | object } scope\r\n     * @param { { instance?, params? }? } options can be omitted when the type of scope is Object\r\n     *\r\n     * @accept ({ scope, instance?, params? })\r\n     * @accept (scope, { instance?, params? })\r\n     *\r\n     * @return instance\r\n     */\r\n    registerScope: (scope, options) => {\r\n      let _scope, _instance, _params\r\n      // accept ({ scope, instance?, params? })\r\n      if (isObject(scope)) {\r\n        _instance = scope.instance\r\n        _params = scope.params\r\n        _scope = scope.scope\r\n      } else if (isString(scope)) {\r\n        // accept (scope, { instance?, params? })\r\n        _scope = scope\r\n        if (isObject(options)) {\r\n          _instance = options.instance\r\n          _params = options.params\r\n        } else {\r\n          _params = options\r\n        }\r\n      } else {\r\n        throw (new TypeError(`first argument of registerScope is expected to be type of \"String\" | \"Object\", but received \"${typeof scope}\".`))\r\n      }\r\n\r\n      if (!isString(_scope)) throw (new TypeError(`\"scope\" is required and is expected to be type of \"String\", but received \"${typeof _scope}\".`))\r\n      if (!creator && !_instance) throw (new TypeError('\"creator\" is not given, \"instance\" is required!'))\r\n      if (isObject(_params)) {\r\n        _params = { ..._params, '@scopeName': _scope }\r\n      }\r\n\r\n      let instance = scopeMap.get(_scope)\r\n\r\n      // If there is no instance registered, create one.\r\n      // Then check if there is a promise has been made, if so, trigger it\r\n      if (!instance) {\r\n        instance = _instance ||\r\n         (isFunction(creator)\r\n           ? (_params\r\n             ? (isArray(_params) ? creator(..._params) : creator(_params))\r\n             : creator({ '@scopeName': _scope })\r\n           )\r\n           : creator\r\n         )\r\n        scopeMap.set(_scope, instance)\r\n\r\n        const promise = promiseMap.get(_scope)\r\n        if (promise) {\r\n          if (isAtom(instance)) {\r\n            binaryTweenPipeAtom(replayWithLatest(1, instance), promise)\r\n          } else {\r\n            binaryTweenPipeAtom(replayWithLatest(1, Data.of(instance)), promise)\r\n          }\r\n        }\r\n      }\r\n\r\n      return instance\r\n    },\r\n\r\n    /**\r\n     * @param { string | object } scope\r\n     * @param { { acceptPromise?: true }? }options\r\n     *\r\n     * @accept accept ({ scope, options | ...options })\r\n     * @accept accept (scope, options? )\r\n     *\r\n     * @return instance | Atom of instance\r\n     */\r\n    getInstance: (scope, options = {}) => {\r\n      // accept ({ scope, options | ...options })\r\n      const _scope = isObject(scope) ? scope.scope : scope\r\n      if (!isString(_scope)) throw new TypeError(`\"scope\" is required and is expected to be type of \"String\", but received \"${typeof _scope}\".`)\r\n\r\n      if (isObject(scope)) {\r\n        if (!scope.options) {\r\n          options = Object.assign({}, scope)\r\n          delete options.scope\r\n        } else {\r\n          options = scope.options\r\n        }\r\n      } else if (isString(scope)) {\r\n        options = options || {}\r\n      }\r\n\r\n      if (!isObject(options)) {\r\n        throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n      }\r\n\r\n      const { acceptPromise = true } = options\r\n\r\n      const instance = scopeMap.get(_scope)\r\n      if (instance) return instance\r\n      if (!acceptPromise) return false\r\n      const promise = promiseMap.get(_scope)\r\n      if (promise) return promise\r\n      const _promise = Data.empty()\r\n      promiseMap.set(_scope, _promise)\r\n      return _promise\r\n    },\r\n\r\n    // ! use function declaration to keep \"this\" context\r\n    /**\r\n     * registerScope -> getInstance\r\n     */\r\n    scope: function (scope) {\r\n      this.registerScope(scope)\r\n      return this.getInstance(scope)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param creator Any\r\n * @param { { isStray?: false, strayFlag?: string } } options\r\n * @return ScopeManager\r\n */\r\nexport const makeScopeManager = (creator, options = {}) => {\r\n  if (!isObject(options)) {\r\n    throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n  }\r\n\r\n  const { isStray = false, strayFlag } = options\r\n\r\n  let manager\r\n\r\n  if (isStray) {\r\n    manager = createScopeManager(creator, options)\r\n    SCOPE_MANAGERS.set({ creator, options: { isStray, strayFlag }, flag: strayFlag }, manager)\r\n  } else {\r\n    manager = SCOPE_MANAGERS.get(creator)\r\n    if (!manager) {\r\n      manager = createScopeManager(creator, options)\r\n      SCOPE_MANAGERS.set(creator, manager)\r\n    }\r\n  }\r\n\r\n  return manager\r\n}\r\n","import { isObject } from '../../internal.js'\r\nimport { looseCurryN } from '../../functional.js'\r\nimport {\r\n  Data, Mutation, isAtom\r\n} from '../../atom.js'\r\nimport { BaseMediator } from './base.mediators.js'\r\n\r\nexport const isFlatMediator = tar => isObject(tar) && tar.isFlatMediator\r\n\r\nexport class FlatMediator extends BaseMediator {\r\n  constructor (atom, options) {\r\n    const flattedD = Data.empty()\r\n    super(flattedD)\r\n    this._atom = flattedD\r\n    this._origin_atom = atom\r\n    this._connection = null\r\n    this._subscribeController = null\r\n    this.options = options\r\n\r\n    // initialize\r\n    const { autoConnect } = this.options\r\n    if (autoConnect) {\r\n      this.connect()\r\n    }\r\n  }\r\n\r\n  get type () {\r\n    return 'FlatMediator'\r\n  }\r\n\r\n  get isFlatMediator () {\r\n    return true\r\n  }\r\n\r\n  static of (atom, options) {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('FlatMediator can apply to an Atom only.'))\r\n    }\r\n    const { autoConnect = true } = options\r\n    return new FlatMediator(atom, { autoConnect })\r\n  }\r\n\r\n  connect () {\r\n    if (this._origin_atom.isData) {\r\n      // Data -> extract value(Data) -> asIsM -> newData\r\n      const asIsM = Mutation.ofLiftLeft(prevD => prevD)\r\n      this._subscribeController = this._origin_atom.subscribe(({ value }) => {\r\n        const subscribeController1 = this._atom.observe(asIsM)\r\n        const subscribeController2 = asIsM.observe(value)\r\n        // value is a normal Data which means it will not replay the latest value automatically\r\n        value.trigger()\r\n        this._connection = {\r\n          unsubscribe: () => {\r\n            subscribeController1.unsubscribe()\r\n            subscribeController2.unsubscribe()\r\n          }\r\n        }\r\n      })\r\n    } else if (this.isMutation) {\r\n      // Mutation -> tempData -> extract value(Data) -> asIsM -> newData\r\n      const tempData = Data.empty()\r\n      const asIsM = Mutation.ofLiftLeft(prevD => prevD)\r\n      this._subscribeController = tempData.subscribe(({ value }) => {\r\n        const subscribeController1 = this._atom.observe(asIsM)\r\n        const subscribeController2 = asIsM.observe(value)\r\n        // value is a normal Data which means it will not replay the latest value automatically\r\n        value.trigger()\r\n        this._connection = {\r\n          unsubscribe: () => {\r\n            subscribeController1.unsubscribe()\r\n            subscribeController2.unsubscribe()\r\n          }\r\n        }\r\n      })\r\n      tempData.observe(this._origin_atom)\r\n    }\r\n  }\r\n\r\n  disconnect () {\r\n    if (this._connection) {\r\n      this._connection.unsubscribe()\r\n      this._connection = null\r\n    }\r\n  }\r\n\r\n  release () {\r\n    this._subscribeController.unsubscribe()\r\n    super.release()\r\n  }\r\n}\r\n\r\nexport const withValueFlatted = looseCurryN(1, (atom, options = {}) => {\r\n  return FlatMediator.of(atom, options)\r\n})\r\n","import { isString, isArray, isObject, isFunction } from '../../internal.js'\r\nimport { looseCurryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\n\r\n// S -> Single, M -> Multi\r\n\r\nconst DEFAULT_MUTATION_OPTIONS = { liftType: 'both' }\r\n\r\n/**\r\n * @param { {} | function } createOptions\r\n * @return { function }\r\n */\r\nexport const createGeneralTache = looseCurryN(2, (createOptions = {}, tacheOptions = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  if (!isObject(createOptions) && !isFunction(createOptions)) {\r\n    throw (new TypeError(`\"createOptions\" is expected to be type of \"Object\" | \"Function\", but received \"${typeof createOptions}\".`))\r\n  }\r\n  if (isFunction(createOptions)) {\r\n    createOptions = { prepareMidpiece: createOptions }\r\n  }\r\n\r\n  const {\r\n    prepareTacheLevelContexts = () => ({}),\r\n    prepareOptions = options => options,\r\n    prepareInput = (_0, _1, source) => source,\r\n    prepareMidpiece = () => Mutation.ofLiftBoth(any => any),\r\n    prepareOutput = () => Data.empty(),\r\n    connect = (options, [inputs, midpieces, outputs]) => {\r\n      pipeAtom(midpieces, outputs)\r\n      binaryTweenPipeAtom(inputs, midpieces)\r\n    }\r\n  } = createOptions\r\n\r\n  const tacheLevelContexts = prepareTacheLevelContexts()\r\n  if (!isObject(tacheLevelContexts)) {\r\n    throw (new TypeError(`\"tacheLevelContexts\" is expected to be type of \"Object\", but received \"${typeof tacheLevelContexts}\".`))\r\n  }\r\n\r\n  if (!isObject(tacheOptions)) {\r\n    throw (new TypeError(`\"tacheOptions\" is expected to be type of \"Object\", but received \"${typeof tacheOptions}\".`))\r\n  }\r\n  tacheOptions = prepareOptions(tacheOptions)\r\n\r\n  if (!isObject(tacheOptions)) {\r\n    throw (new TypeError(`The returned value of \"prepareOptions\" is expected to be type of \"Object\", but received \"${typeof tacheOptions}\".`))\r\n  }\r\n\r\n  return (...sources) => {\r\n    const inputs = prepareInput(tacheOptions, tacheLevelContexts, sources.length > 1 ? sources : sources[0])\r\n    const midpieces = prepareMidpiece(tacheOptions, tacheLevelContexts, inputs)\r\n    const outputs = prepareOutput(tacheOptions, tacheLevelContexts, midpieces)\r\n    connect(tacheOptions, tacheLevelContexts, [inputs, midpieces, outputs])\r\n    return outputs\r\n  }\r\n})\r\n/**\r\n * @param { function } tacheMaker partial applied createGeneralTache\r\n */\r\nexport const useGeneralTache = looseCurryN(3, (tacheMaker, tacheOptions, ...sources) => {\r\n  const tache = tacheMaker(tacheOptions)\r\n  const outputs = sources.length > 1 ? tache(...sources) : tache(sources[0])\r\n  return outputs\r\n})\r\n\r\n/**\r\n * @param { function | object }  operation\r\n * @param { ?{ type?: string } } options which type is LiftType the operation will use\r\n * @accept ({ operation, options? })\r\n * @accept (operation, options?)\r\n * @return TacheMaker\r\n */\r\nexport const createSSTache = (operation, options = { ...DEFAULT_MUTATION_OPTIONS }) => {\r\n  // @accept ({ operation, options? })\r\n  if (isObject(operation) && operation.operation) {\r\n    options = operation.options ? { ...DEFAULT_MUTATION_OPTIONS, ...operation.options } : { ...DEFAULT_MUTATION_OPTIONS }\r\n    operation = operation.operation\r\n  }\r\n\r\n  if (!isFunction(operation)) {\r\n    throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received ${typeof operation}.`))\r\n  }\r\n\r\n  const { liftType = 'both' } = options\r\n\r\n  /**\r\n   * @param { Atom }target\r\n   * @return { Data }\r\n   */\r\n  return target => {\r\n    if (!isAtom(target)) {\r\n      throw (new TypeError('\"target\" is expected to be type of \"Atom\".'))\r\n    }\r\n\r\n    const mutation = Mutation.ofLift(operation, { liftType })\r\n    const outputD = Data.empty()\r\n\r\n    pipeAtom(mutation, outputD)\r\n    binaryTweenPipeAtom(target, mutation)\r\n\r\n    return outputD\r\n  }\r\n}\r\n\r\n/**\r\n * @accept ({}) -> ({ name: { operation, options? } | operation, ...})\r\n * @accept ([]) -> ([{ operation, options? } | operation ...])\r\n * @accept (...) -> ({ operation, options? } | operation, ...)\r\n * @return TacheMaker\r\n */\r\nexport const createSMTache = (...args) => {\r\n  if (args.length === 1 && isObject(args[0])) {\r\n    return createObjectSMTache(args[0])\r\n  }\r\n  if (args.length === 1 && isArray(args[0])) {\r\n    return createArraySMTache(...args[0])\r\n  }\r\n  if (args.length > 1) {\r\n    return createArraySMTache(...args)\r\n  }\r\n}\r\n\r\n/**\r\n * @accept ({ operation, options? } | operation, ...)\r\n * @accept ([{ operation, options? } | operation ...])\r\n * @return TacheMaker\r\n */\r\nexport const createArraySMTache = (...configArr) => {\r\n  // @accept ([{ operation, options? } | operation ...])\r\n  if (configArr.length === 1 && isArray(configArr[0])) {\r\n    configArr = configArr[0]\r\n  }\r\n\r\n  configArr = configArr.map(config => {\r\n    let operation, options\r\n\r\n    if (isObject(config) && config.operation) {\r\n      // @accept config -> { operation, options? }\r\n      options = config.options ? { ...DEFAULT_MUTATION_OPTIONS, ...config.options } : { ...DEFAULT_MUTATION_OPTIONS }\r\n      operation = config.operation\r\n    } else if (isFunction(config)) {\r\n      // @accept config -> operation\r\n      options = { ...DEFAULT_MUTATION_OPTIONS }\r\n      operation = config\r\n    } else {\r\n      throw (new TypeError(`\"config\" is expected to be type of \"Object\" | \"Function\", but received ${typeof config}.`))\r\n    }\r\n\r\n    if (!isFunction(operation)) {\r\n      throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received ${typeof config}.`))\r\n    }\r\n\r\n    return { operation, options }\r\n  })\r\n\r\n  /**\r\n   * @param target Atom\r\n   * @return Array of Data\r\n   */\r\n  return target => {\r\n    if (!isAtom(target)) {\r\n      throw (new TypeError('\"target\" is expected to be type of \"Atom\".'))\r\n    }\r\n\r\n    const mutations = configArr.map(({ operation, options }) => {\r\n      const { liftType = 'both' } = options\r\n      return Mutation.ofLift(operation, { liftType })\r\n    })\r\n    const outputs = Array.from({ length: configArr.length }).map(() => Data.empty())\r\n\r\n    outputs.forEach((output, index) => {\r\n      pipeAtom(mutations[index], output)\r\n      binaryTweenPipeAtom(target, mutations[index])\r\n    })\r\n\r\n    return outputs\r\n  }\r\n}\r\n\r\n/**\r\n * @param { {} } configObj\r\n * @accept ({ name: { operation, options? } | operation, ...})\r\n * @return TacheMaker\r\n */\r\nexport const createObjectSMTache = (configObj) => {\r\n  if (!isObject(configObj)) {\r\n    throw (new TypeError(`\"configObj\" is expected to be type of \"Object\", but received ${typeof configObj}.`))\r\n  }\r\n\r\n  configObj = Object.entries(configObj).reduce((acc, [name, config]) => {\r\n    let operation, options\r\n\r\n    if (isObject(config) && config.operation) {\r\n      options = config.options ? { ...DEFAULT_MUTATION_OPTIONS, ...config.options } : { ...DEFAULT_MUTATION_OPTIONS }\r\n      operation = config.operation\r\n    } else if (isFunction(config)) {\r\n      options = { ...DEFAULT_MUTATION_OPTIONS }\r\n      operation = config\r\n    } else {\r\n      throw (new TypeError(`\"config\" is expected to be type of \"Object\" | \"Function\", but received ${typeof config}.`))\r\n    }\r\n\r\n    if (!isFunction(operation)) {\r\n      throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received ${typeof config}.`))\r\n    }\r\n\r\n    acc[name] = acc[name] || { operation, options }\r\n\r\n    return acc\r\n  }, {})\r\n\r\n  /**\r\n   * @param target Atom\r\n   * @return Object of Data\r\n   */\r\n  return target => {\r\n    if (!isAtom(target)) {\r\n      throw (new TypeError('\"target\" is expected to be type of \"Atom\".'))\r\n    }\r\n\r\n    const mutations = Object.entries(configObj).reduce((acc, [name, { operation, options }]) => {\r\n      const { liftType = 'both' } = options\r\n      acc[name] = acc[name] || Mutation.ofLift(operation, { liftType })\r\n      return acc\r\n    }, {})\r\n\r\n    const outputs = Object.entries(configObj).reduce((acc, [name]) => {\r\n      acc[name] = acc[name] || Data.empty()\r\n      return acc\r\n    }, {})\r\n\r\n    Object.entries(outputs).forEach(([name, output]) => {\r\n      pipeAtom(mutations[name], output)\r\n      binaryTweenPipeAtom(target, mutations[name])\r\n    })\r\n\r\n    return outputs\r\n  }\r\n}\r\n\r\n/**\r\n * @param { ?{ sourcesType?: 'Array' | \"Object\" } } config\r\n * @return TacheMaker\r\n */\r\nexport const createMSTache = (config = {}) => {\r\n  if (!isObject(config)) {\r\n    throw (new TypeError(`\"config\" is expected to be type of \"Object\", but received \"${typeof config}\".`))\r\n  }\r\n\r\n  const { sourcesType } = config\r\n  if (sourcesType.toLowerCase() === 'array') {\r\n    return createArrayMSTache(config)\r\n  }\r\n  if (sourcesType.toLowerCase() === 'object') {\r\n    return createObjectMSTache(config)\r\n  }\r\n\r\n  /**\r\n   * @accept ({ name: Atom | Any, ...})\r\n   * @accept ([Atom | Any, ...])\r\n   * @accept (Atom | Any, ...)\r\n   * @return Data\r\n   */\r\n  return (...sources) => {\r\n    if (sources.length === 1 && isObject(sources[0])) {\r\n      return createObjectMSTache(config)(sources[0])\r\n    }\r\n    if (sources.length === 1 && isArray(sources[0])) {\r\n      return createArrayMSTache(config)(...sources[0])\r\n    }\r\n    if (sources.length > 1) {\r\n      return createArraySMTache(config)(...sources)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param { ?{\r\n *   numberOfSources?: number,\r\n *   acceptNonAtom?: boolean,\r\n *   opCustomizeType?: 'fully' | 'partly',\r\n *   opLiftType?: 'both' | 'left' | 'right',\r\n *   operation: function,\r\n *   autoUpdateContexts?: boolean\r\n * } } config\r\n * @return TacheMaker\r\n */\r\nexport const createArrayMSTache = (config = {}) => {\r\n  if (!isObject(config)) {\r\n    throw (new TypeError(`\"config\" is expected to be type of \"Object\", but received ${typeof config}.`))\r\n  }\r\n\r\n  const {\r\n    numberOfSources = undefined, acceptNonAtom = true,\r\n    opCustomizeType = 'partly', opLiftType = 'both', operation, autoUpdateContexts = true\r\n  } = config\r\n\r\n  if (!isString(opCustomizeType)) {\r\n    throw (new TypeError(`\"opCustomizeType\" is expected to be type of \"String\", but received \"${typeof opCustomizeType}\".`))\r\n  }\r\n  if (opCustomizeType.toLowerCase() !== 'partly' && opCustomizeType.toLowerCase() !== 'fully') {\r\n    throw (new TypeError(`\"opCustomizeType\" is expected to be \"fully\" | \"partly\", but received \"${opCustomizeType}\".`))\r\n  }\r\n  if (operation === undefined) {\r\n    throw (new TypeError('\"operation\" is required when use makeArrayMSTache to make tache.'))\r\n  }\r\n  if (!isFunction(operation)) {\r\n    throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received ${typeof operation}.`))\r\n  }\r\n\r\n  /**\r\n   * @accept (Atom, ...)\r\n   * @accept ([Atom, ...])\r\n   * @return Data\r\n   */\r\n  const tache = (...sources) => {\r\n    if (!acceptNonAtom) {\r\n      sources.forEach(source => {\r\n        if (!isAtom(source)) {\r\n          throw (new TypeError(`\"source\" is expected to be type of \"Atom\", but received ${typeof source}.`))\r\n        }\r\n      })\r\n    } else {\r\n      sources = sources.map(source => {\r\n        return isAtom(source) ? source : replayWithLatest(1, Data.of(source))\r\n      })\r\n    }\r\n\r\n    const length = sources.length\r\n\r\n    const wrapMutations = Array.from({ length }).map((val, idx) =>\r\n      Mutation.ofLiftLeft(prev => ({ id: idx, value: prev }))\r\n    )\r\n    const wrappedDatas = Array.from({ length }).map(() => Data.empty())\r\n\r\n    const trunkM = Mutation.ofLift((() => {\r\n      const baseContexts = { numberOfSources: length, TERMINATOR }\r\n\r\n      if (opCustomizeType.toLowerCase() === 'fully') {\r\n        const contexts = { ...baseContexts }\r\n        const actualOperation = operation(contexts)\r\n        if (!isFunction(actualOperation)) {\r\n          throw (new TypeError('\"operation\" is expected to return a \"Function\" when \"opCustomizeType\" is specified to \"fully\".'))\r\n        }\r\n        return actualOperation\r\n      }\r\n      if (opCustomizeType.toLowerCase() === 'partly') {\r\n        const contexts = {\r\n          ...baseContexts,\r\n          states: Array.from({ length: length }),\r\n          values: Array.from({ length: length })\r\n        }\r\n        // actual operation which will takes prevDatar(or its value) & datar(ot its value) as argument\r\n        return (prev, cur, mutation, ...args) => {\r\n          if (autoUpdateContexts) {\r\n            const { id, value } = prev\r\n            contexts.states[id] = true\r\n            contexts.values[id] = value\r\n          }\r\n          return operation(prev, cur, mutation, contexts, ...args)\r\n        }\r\n      }\r\n    })(), { liftType: opLiftType })\r\n\r\n    const output = Data.empty()\r\n\r\n    pipeAtom(trunkM, output)\r\n    wrappedDatas.forEach(data => {\r\n      pipeAtom(data, trunkM)\r\n    })\r\n    wrapMutations.forEach((wrapMutation, idx) => {\r\n      pipeAtom(wrapMutation, wrappedDatas[idx])\r\n    })\r\n    sources.forEach((source, idx) => {\r\n      binaryTweenPipeAtom(source, wrapMutations[idx])\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  if (numberOfSources) {\r\n    return looseCurryN(numberOfSources, tache)\r\n  } else {\r\n    return (...sources) => {\r\n      if (sources.length === 1 && isArray(sources[0])) {\r\n        sources = sources[0]\r\n      }\r\n      return tache(...sources)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param { ?{\r\n *   acceptNonAtom?: boolean,\r\n *   opCustomizeType?: 'fully' | 'partly',\r\n *   opLiftType?: 'both' | 'left' | 'right',\r\n *   operation: function,\r\n *   autoUpdateContexts?: boolean\r\n * } }config\r\n * @return TacheMaker\r\n */\r\nexport const createObjectMSTache = (config = {}) => {\r\n  if (!isObject(config)) {\r\n    throw (new TypeError(`\"config\" is expected to be type of \"Object\", but received \"${typeof config}\".`))\r\n  }\r\n\r\n  const {\r\n    acceptNonAtom = true,\r\n    opCustomizeType = 'partly', opLiftType = 'both', operation, autoUpdateContexts = true\r\n  } = config\r\n\r\n  if (!isString(opCustomizeType)) {\r\n    throw (new TypeError(`\"opCustomizeType\" is expected to be type of \"String\", but received \"${typeof opCustomizeType}\".`))\r\n  }\r\n  if (opCustomizeType.toLowerCase() !== 'partly' && opCustomizeType.toLowerCase() !== 'fully') {\r\n    throw (new TypeError(`\"opCustomizeType\" is expected to be \"fully\" | \"partly\", but received \"${opCustomizeType}\".`))\r\n  }\r\n  if (operation === undefined) {\r\n    throw (new TypeError('\"operation\" is required when use makeObjectMSTache to make tache.'))\r\n  }\r\n  if (!isFunction(operation)) {\r\n    throw (new TypeError(`\"operation\" is expected to be type of \"Function\", but received \"${typeof operation}\".`))\r\n  }\r\n\r\n  /**\r\n   * @param sources Object\r\n   * @accept ({ name: Atom | Any, ...})\r\n   * @return Data\r\n   */\r\n  const tache = (sources) => {\r\n    if (!isObject(sources)) {\r\n      throw (new TypeError(`\"sources\" is expected to be type of \"Object\", but received \"${typeof sources}\".`))\r\n    }\r\n\r\n    if (!acceptNonAtom) {\r\n      Object.values(sources).forEach(source => {\r\n        if (!isAtom(source)) {\r\n          throw (new TypeError(`\"source\" is expected to be type of \"Atom\", but received \"${typeof source}\".`))\r\n        }\r\n      })\r\n    } else {\r\n      sources = Object.entries(sources).reduce((newSources, [name, source]) => {\r\n        newSources[name] = newSources[name] || (isAtom(source) ? source : replayWithLatest(1, Data.of(source)))\r\n        return newSources\r\n      }, {})\r\n    }\r\n\r\n    const wrapMutations = Object.entries(sources).reduce((mutations, [key]) => {\r\n      mutations[key] = Mutation.ofLiftLeft((prev) => ({ key: key, value: prev }))\r\n      return mutations\r\n    }, {})\r\n    const wrappedDatas = Object.entries(sources).reduce((datas, [key]) => {\r\n      datas[key] = Data.empty()\r\n      return datas\r\n    }, {})\r\n\r\n    const trunkM = Mutation.ofLift((() => {\r\n      const baseContexts = { keysOfSources: Object.keys(sources), TERMINATOR }\r\n\r\n      if (opCustomizeType.toLowerCase() === 'fully') {\r\n        const contexts = { ...baseContexts }\r\n        const actualOperation = operation(contexts)\r\n        if (!isFunction(actualOperation)) {\r\n          throw (new TypeError('\"operation\" is expected to return a \"Function\" when \"opCustomizeType\" is specified to \"fully\".'))\r\n        }\r\n        return actualOperation\r\n      }\r\n      if (opCustomizeType.toLowerCase() === 'partly') {\r\n        const contexts = {\r\n          ...baseContexts,\r\n          states: Object.keys(sources).reduce((acc, key) => {\r\n            acc[key] = false\r\n            return acc\r\n          }, {}),\r\n          values: Object.keys(sources).reduce((acc, key) => {\r\n            acc[key] = undefined\r\n            return acc\r\n          }, {})\r\n        }\r\n        // actual operation which will takes prevDatar(or its value) & datar(ot its value) as argument\r\n        return (prev, cur, mutation, ...args) => {\r\n          if (autoUpdateContexts) {\r\n            const { key, value } = prev\r\n            contexts.states[key] = true\r\n            contexts.values[key] = value\r\n          }\r\n          return operation(prev, cur, mutation, contexts, ...args)\r\n        }\r\n      }\r\n    })(), { liftType: opLiftType })\r\n\r\n    const output = Data.empty()\r\n\r\n    pipeAtom(trunkM, output)\r\n    Object.values(wrappedDatas).forEach(data => {\r\n      pipeAtom(data, trunkM)\r\n    })\r\n    Object.entries(wrapMutations).forEach(([key, wrapMutation]) => {\r\n      pipeAtom(wrapMutation, wrappedDatas[key])\r\n    })\r\n    Object.entries(sources).forEach(([key, source]) => {\r\n      binaryTweenPipeAtom(source, wrapMutations[key])\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  return tache\r\n}\r\n\r\n// TODO: waiting for suitable usage scenarios\r\nexport const createMMTache = () => {\r\n  throw (new Error('makeMMTache to be developed.'))\r\n}\r\n","import { isNil } from '../../internal.js'\r\nimport { VOID } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * Replace nil value(i.e. undefined, null) with VOID\r\n *\r\n * @param { Atom } target\r\n * @return Data\r\n */\r\nexport const nilToVoidT = target => {\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of nilToVoidT is expected to be type of \"Atom\" only.'))\r\n  }\r\n\r\n  const transM = Mutation.ofLiftLeft(prev => isNil(prev) ? VOID : prev)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(transM, outputD)\r\n\r\n  binaryTweenPipeAtom(target, transM)\r\n\r\n  return outputD\r\n}\r\n","\r\nexport const partitionT = () => {\r\n\r\n}\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR, isVoid } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * Takes a default value and a target atom as argument,\r\n * emit given default value if value of target atom isVoid.\r\n *\r\n * - dynamic version: default value must be an Atom.\r\n * - static version: default value can be any type of value.\r\n *\r\n * @param default Any | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const defaultToT = curryN(2, (dft, target) => {\r\n  if (isAtom(dft)) {\r\n    return dynamicDefautToT(dft, target)\r\n  } else {\r\n    return staticDefaultToT(dft, target)\r\n  }\r\n})\r\n\r\n/**\r\n * @param default Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicDefautToT = curryN(2, (dft, target) => {\r\n  if (!isAtom(dft)) {\r\n    throw (new TypeError('\"dft\" argument of dynamicDefautToT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicDefautToT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapDftM = Mutation.ofLiftLeft(prev => ({ type: 'dft', value: prev }))\r\n  const wrappedDftD = Data.empty()\r\n  pipeAtom(wrapDftM, wrappedDftD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const defaultM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { dft: false, target: false }\r\n    const _internalValues = { dft: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'dft' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in defaultM, expected to be \"dft\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.dft || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'dft') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return isVoid(_internalValues.target) ? _internalValues.dft : _internalValues.target\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedDftD, defaultM)\r\n  pipeAtom(wrappedTargetD, defaultM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(defaultM, outputD)\r\n\r\n  binaryTweenPipeAtom(dft, wrapDftM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param default Any\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticDefaultToT = curryN(2, (dft, target) => {\r\n  return dynamicDefautToT(replayWithLatest(1, Data.of(dft)), target)\r\n})\r\n","import { isString, isArray, getByPath } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param selector String | Array | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const pluckT = curryN(2, (selector, target) => {\r\n  if (isString(selector) || isArray(selector)) {\r\n    return staticPluckT(selector, target)\r\n  } else if (isAtom(selector)) {\r\n    return dynamicPluckT(selector, target)\r\n  } else {\r\n    throw (new TypeError('\"selector\" argument of pluckT is expected to be type of \"String\" | \"Array\" | \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param selector Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicPluckT = curryN(2, (selector, target) => {\r\n  if (!isAtom(selector)) {\r\n    throw (new TypeError('\"selector\" argument of dynamicPluckT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"selector\" argument of dynamicPluckT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapSelectorM = Mutation.ofLiftLeft(prev => ({ type: 'selector', value: prev }))\r\n  const wrappedSelectorD = Data.empty()\r\n  pipeAtom(wrapSelectorM, wrappedSelectorD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const pluckM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { selector: false, target: false }\r\n    const _internalValues = { selector: undefined, target: undefined }\r\n\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'selector' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in pluckM, expected to be \"selector\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.selector || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'selector') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return getByPath(_internalValues.selector, _internalValues.target)\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedSelectorD, pluckM)\r\n  pipeAtom(wrappedTargetD, pluckM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(pluckM, outputD)\r\n\r\n  binaryTweenPipeAtom(selector, wrapSelectorM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param selector String | Array\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticPluckT = curryN(2, (selector, target) => {\r\n  if (!isString(selector) && !isArray(selector)) {\r\n    throw (new TypeError('\"selector\" argument of staticPluckT is expected to be type of \"String\" | \"Array\".'))\r\n  }\r\n  return dynamicPluckT(replayWithLatest(1, Data.of(selector)), target)\r\n})\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param fn Function | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const mapT = curryN(2, (fn, target) => {\r\n  if (isFunction(fn)) {\r\n    return staticMapT(fn, target)\r\n  } else if (isAtom(fn)) {\r\n    return dynamicMapT(fn, target)\r\n  } else {\r\n    throw (new TypeError('\"fn\" argument of mapT is expected to be type of \"Function\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param fn Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicMapT = curryN(2, (fn, target) => {\r\n  if (!isAtom(fn)) {\r\n    throw (new TypeError('\"fn\" argument of dynamicMapT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicMapT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapMapM = Mutation.ofLiftLeft(prev => ({ type: 'map', value: prev }))\r\n  const wrappedMapD = Data.empty()\r\n  pipeAtom(wrapMapM, wrappedMapD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const mapM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { map: false, target: false, index: -1 }\r\n    const _internalValues = { map: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'map' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in mapM, expected to be \"map\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.map || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n\r\n      if (type === 'map') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        _internalStates.index = _internalStates.index + 1\r\n        return _internalValues.map(_internalValues.target, _internalStates.index)\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedMapD, mapM)\r\n  pipeAtom(wrappedTargetD, mapM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(mapM, outputD)\r\n\r\n  binaryTweenPipeAtom(fn, wrapMapM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param fn Function\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticMapT = curryN(2, (fn, target) => {\r\n  if (!isFunction(fn)) {\r\n    throw (new TypeError('\"fn\" argument of staticMapT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicMapT(replayWithLatest(1, Data.of(fn)), target)\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\nexport const startWithT = curryN(2, (start, target) => {\r\n  if (isAtom(start)) {\r\n    return dynamicStartWithT(start, target)\r\n  } else {\r\n    return staticStartWithT(start, target)\r\n  }\r\n})\r\n\r\n/**\r\n * @param start Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicStartWithT = curryN(2, (start, target) => {\r\n  if (!isAtom(start)) {\r\n    throw (new TypeError('\"start\" argument of dynamicStartWithT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicStartWithT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  start = replayWithLatest(1, start)\r\n\r\n  const wrapStartM = Mutation.ofLiftLeft(prev => ({ type: 'start', value: prev }))\r\n  const wrappedStartD = Data.empty()\r\n  pipeAtom(wrapStartM, wrappedStartD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const startM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { start: false, target: false, startExpired: false }\r\n    const _internalValues = { start: undefined, target: undefined, targetQueue: [] }\r\n    return (prev, _, mutation) => {\r\n      const { type, value } = prev\r\n      if (type !== 'start' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in startM, expected to be \"start\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n\r\n      if (type === 'target') {\r\n        if (_internalStates.startExpired) {\r\n          return _internalValues.target\r\n        } else {\r\n          _internalValues.targetQueue.push(value)\r\n          return TERMINATOR\r\n        }\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'start' && _internalStates.startExpired) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'start' && !_internalStates.startExpired) {\r\n        _internalStates.startExpired = true\r\n        _internalValues.targetQueue.unshift(value)\r\n        _internalValues.targetQueue.forEach(target => {\r\n          mutation.triggerOperation(() => target)\r\n        })\r\n        _internalValues.targetQueue.length = 0\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedStartD, startM)\r\n  pipeAtom(wrappedTargetD, startM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(startM, outputD)\r\n\r\n  binaryTweenPipeAtom(start, wrapStartM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param start Any\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticStartWithT = curryN(2, (start, target) => {\r\n  return dynamicStartWithT(replayWithLatest(1, Data.of(start)), target)\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\nexport const emptyStartWithT = curryN(2, (start, target) => {\r\n  if (isAtom(start)) {\r\n    return dynamicEmptyStartWithT(start, target)\r\n  } else {\r\n    return staticEmptyStartWithT(start, target)\r\n  }\r\n})\r\n\r\n/**\r\n * @param start Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicEmptyStartWithT = curryN(2, (start, target) => {\r\n  if (!isAtom(start)) {\r\n    throw (new TypeError('\"start\" argument of dynamicEmptyStartWithT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicEmptyStartWithT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  start = replayWithLatest(1, start)\r\n  target = replayWithLatest(1, target)\r\n\r\n  const wrapStartM = Mutation.ofLiftLeft(prev => ({ type: 'start', value: prev }))\r\n  const wrappedStartD = Data.empty()\r\n  pipeAtom(wrapStartM, wrappedStartD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const startM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { start: false, target: false, startExpired: false }\r\n    const _internalValues = { start: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'start' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in startM, expected to be \"start\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (type === 'target') {\r\n        return _internalValues.target\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'start' && _internalStates.startExpired) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'start' && !_internalStates.startExpired) {\r\n        _internalStates.startExpired = true\r\n        return _internalStates.target ? TERMINATOR : _internalValues.start\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedStartD, startM)\r\n  pipeAtom(wrappedTargetD, startM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(startM, outputD)\r\n\r\n  binaryTweenPipeAtom(start, wrapStartM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param start Any\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticEmptyStartWithT = curryN(2, (start, target) => {\r\n  return dynamicEmptyStartWithT(replayWithLatest(1, Data.of(start)), target)\r\n})\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\n\r\n/**\r\n * @param timer Number | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const debounceTimeT = curryN(2, (timer, target) => {\r\n  if (isNumber(timer)) {\r\n    return staticDebounceTimeT(timer, target)\r\n  } else if (isAtom(timer)) {\r\n    return dynamicDebounceTimeT(timer, target)\r\n  } else {\r\n    throw (new TypeError('\"timer\" argument of debounceTimeT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * the value target will only triggered when timer atom has at least one value\r\n *\r\n * @param timer Atom, which value is used as debounce time(in milliseconds)\r\n * @param target Atom, which value will be debounced with specified time\r\n * @return atom Data\r\n */\r\nexport const dynamicDebounceTimeT = curryN(2, (timer, target) => {\r\n  if (!isAtom(timer)) {\r\n    throw (new TypeError('\"timer\" argument of dynamicDebounceTimeT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicDebounceTimeT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapTimerM = Mutation.ofLiftLeft(prev => ({ type: 'timer', value: prev }))\r\n  const wrappedTimerD = Data.empty()\r\n  pipeAtom(wrapTimerM, wrappedTimerD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const debounceM = Mutation.ofLiftLeft((() => {\r\n    // use closure to define private state for mutation's operation\r\n    const _internalStates = { timer: false, target: false, clock: 0 }\r\n    const _internalValues = { timer: undefined, target: undefined }\r\n    // actual mutation operation function\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'timer' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in debounceM, expected to be \"timer\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.timer || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'timer') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        clearTimeout(_internalStates.clock)\r\n        _internalStates.clock = setTimeout(() => {\r\n          debounceM.triggerOperation(() => _internalValues.target)\r\n        }, _internalValues.timer)\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedTimerD, debounceM)\r\n  pipeAtom(wrappedTargetD, debounceM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(debounceM, outputD)\r\n\r\n  binaryTweenPipeAtom(timer, wrapTimerM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param ms Atom, which will be used as debounce time(in milliseconds)\r\n * @param target Atom, which value will be debounced with specified time\r\n * @return atom Data\r\n */\r\nexport const staticDebounceTimeT = curryN(2, (ms, target) => {\r\n  if (!isNumber(ms)) {\r\n    throw (new TypeError('\"ms\" argument of staticDebounceTimeT is expected to be type of \"Number\".'))\r\n  }\r\n  return dynamicDebounceTimeT(replayWithLatest(1, Data.of(ms)), target)\r\n})\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\n\r\n/**\r\n * @param timer Number | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const throttleTimeT = curryN(2, (timer, target) => {\r\n  if (isNumber(timer)) {\r\n    return staticThrottleTimeT(timer, target)\r\n  } else if (isAtom(timer)) {\r\n    return dynamicThrottleTimeT(timer, target)\r\n  } else {\r\n    throw (new TypeError('\"timer\" argument of throttleTimeT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * the value target will only triggered when timer atom has at least one value\r\n *\r\n * @param timer Atom, which value is used as throttle time(in milliseconds)\r\n * @param target Atom, which value will be throttled with specified time\r\n * @return atom Data\r\n */\r\nexport const dynamicThrottleTimeT = curryN(2, (timer, target) => {\r\n  if (!isAtom(timer)) {\r\n    throw (new TypeError('\"timer\" argument of dynamicThrottleTimeT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicThrottleTimeT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapTimerM = Mutation.ofLiftLeft(prev => ({ type: 'timer', value: prev }))\r\n  const wrappedTimerD = Data.empty()\r\n  pipeAtom(wrapTimerM, wrappedTimerD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const throttleM = Mutation.ofLiftLeft((() => {\r\n    // use closure to define private state for mutation's operation\r\n    const _internalStates = { timer: false, target: false, clock: 0, canEmit: true }\r\n    const _internalValues = { timer: undefined, target: undefined }\r\n    // actual mutation operation function\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'timer' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in throttleM, expected to be \"timer\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.timer || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'timer') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        if (_internalStates.canEmit) {\r\n          _internalStates.canEmit = false\r\n          _internalStates.clock = setTimeout(() => {\r\n            clearTimeout(_internalStates.clock)\r\n            _internalStates.canEmit = true\r\n          }, _internalValues.timer)\r\n          return _internalValues.target\r\n        } else {\r\n          return TERMINATOR\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedTimerD, throttleM)\r\n  pipeAtom(wrappedTargetD, throttleM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(throttleM, outputD)\r\n\r\n  binaryTweenPipeAtom(timer, wrapTimerM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param ms Atom, which will be used as throttle time(in milliseconds)\r\n * @param target Atom, which value will be throttled with specified time\r\n * @return atom Data\r\n */\r\nexport const staticThrottleTimeT = curryN(2, (ms, target) => {\r\n  if (!isNumber(ms)) {\r\n    throw (new TypeError('\"ms\" argument of staticThrottleTimeT is expected to be type of \"Number\".'))\r\n  }\r\n  return dynamicThrottleTimeT(replayWithLatest(1, Data.of(ms)), target)\r\n})\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN, pipe } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { isAtom, Mutation, Data } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\nimport { filterT } from './filter.taches.js'\r\n\r\n/**\r\n * Takes a \"n\" which value will be used as length of history's length,\r\n * it can be type of Number or Atom.\r\n *\r\n * Returned atom will emits specified number of target's value as an array.\r\n *\r\n * @param n Number | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const withHistoryT = curryN(2, (n, target) => {\r\n  if (isNumber(n)) {\r\n    return withStaticHistoryT(n, target)\r\n  } else if (isAtom(n)) {\r\n    return withDynamicHistoryT(n, target)\r\n  } else {\r\n    throw (new TypeError('\"n\" argument of withHistoryT is expected to be type of \"Number\" or \"Atom\"'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param n Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const withDynamicHistoryT = curryN(2, (n, target) => {\r\n  if (!isAtom(n)) {\r\n    throw (new TypeError('\"n\" argument of withDynamicHistoryT is expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of withDynamicHistoryT is expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n\r\n  const wrapNumM = Mutation.ofLiftLeft(prev => ({ type: 'n', value: parseInt(prev) }))\r\n  const wrappedNumD = Data.empty()\r\n  pipeAtom(wrapNumM, wrappedNumD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const withHistoryM = Mutation.ofLiftLeft((() => {\r\n    // use closure to define private state for mutation's operation\r\n    // history :: [latest, ..., oldest]\r\n    const _internalStates = { n: false, target: false, history: [] }\r\n    const _internalValues = { n: undefined, target: undefined }\r\n    // actual mutation operation function\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'n' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in withHistoryM, expected to be \"n\" | \"target\", but received \"${type}\"`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n\r\n      const { history } = _internalStates\r\n      if (type === 'n') {\r\n        history.length = value\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'target') {\r\n        history.pop()\r\n        history.unshift(value)\r\n        return [...history]\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedNumD, withHistoryM)\r\n  pipeAtom(wrappedTargetD, withHistoryM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(withHistoryM, outputD)\r\n\r\n  binaryTweenPipeAtom(n, wrapNumM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param n Number\r\n * @param target Atom\r\n * @return Atom\r\n */\r\nexport const withStaticHistoryT = curryN(2, (n, target) => {\r\n  if (!isNumber(n)) {\r\n    throw (new TypeError('\"n\" argument of withStaticHistoryT is expected to be type of \"Number\".'))\r\n  }\r\n  return withDynamicHistoryT(replayWithLatest(1, Data.of(n)), target)\r\n})\r\n\r\n/**\r\n * Returned atom will emits the previous and current value of target atom as an array.\r\n *\r\n * @param target Atom\r\n * @return Atom\r\n */\r\nexport const pairwiseT = withHistoryT(2)\r\nexport const truthyPairwiseT = pipe(pairwiseT, filterT(v => v[0] && v[1]))\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\nconst switchTacheFactory = mutationFactory => {\r\n  return curryN(2, (to, from) => {\r\n    if (!isAtom(to)) {\r\n      throw (new TypeError('\"to\" argument of switchT is expected to be type of \"Atom\".'))\r\n    }\r\n    if (!isAtom(from)) {\r\n      throw (new TypeError('\"from\" argument of switchT is expected to be type of \"Atom\".'))\r\n    }\r\n\r\n    const wrapToM = Mutation.ofLiftLeft(prev => ({ type: 'to', value: prev }))\r\n    const wrappedToD = Data.empty()\r\n    pipeAtom(wrapToM, wrappedToD)\r\n    const wrapFromM = Mutation.ofLiftLeft(prev => ({ type: 'from', value: prev }))\r\n    const wrappedFromD = Data.empty()\r\n    pipeAtom(wrapFromM, wrappedFromD)\r\n\r\n    // const switchM = Mutation.ofLiftLeft(operation)\r\n    const switchM = mutationFactory()\r\n    pipeAtom(wrappedToD, switchM)\r\n    pipeAtom(wrappedFromD, switchM)\r\n\r\n    const outputD = Data.empty()\r\n    pipeAtom(switchM, outputD)\r\n\r\n    binaryTweenPipeAtom(to, wrapToM)\r\n    binaryTweenPipeAtom(from, wrapFromM)\r\n\r\n    return outputD\r\n  })\r\n}\r\n\r\n/**\r\n * @param to Atom | Any\r\n * @param from Atom\r\n * @return atom Data\r\n */\r\nexport const switchT = curryN(2, (to, from) => {\r\n  if (isAtom(to)) {\r\n    return dynamicSwitchT(to, from)\r\n  } else {\r\n    return staticSwitchT(to, from)\r\n  }\r\n})\r\n\r\n/**\r\n * switch Tache will emits a \"to\" value when \"from\" value comes.\r\n *\r\n * If there is not \"to\" value to emit when \"from\" value comes,\r\n * it will emit a TERMINATOR which will stop the stream.\r\n *\r\n * @param to Atom\r\n * @param from Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicSwitchT = switchTacheFactory(() =>\r\n  Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { from: false, to: false }\r\n    const _internalValues = { from: undefined, to: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'from' && type !== 'to') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in switchM, expected to be \"from\" | \"to\", but received \"${type}\"`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.from || !_internalStates.to) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'to') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'from') {\r\n        return _internalValues.to\r\n      }\r\n    }\r\n  })()))\r\n\r\n/**\r\n * @param to Any\r\n * @param from Atom\r\n * @return atom Data\r\n */\r\nexport const staticSwitchT = curryN(2, (to, from) => {\r\n  return dynamicSwitchT(replayWithLatest(1, Data.of(to)), from)\r\n})\r\n\r\n/**\r\n * promiseSwitch Tache will emits a \"to\" value when \"from\" value comes.\r\n *\r\n * If there is no \"to\" value to emit when \"from\" value comes,\r\n * it will make a promise that to emit \"to\" value when it comes sooner.\r\n *\r\n * @param to Atom\r\n * @param from Atom\r\n * @return atom Data\r\n */\r\nexport const promiseSwitchT = switchTacheFactory(() => {\r\n  const switchM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { from: false, to: false, promise: false }\r\n    const _internalValues = { from: undefined, to: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'from' && type !== 'to') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in switchM, expected to be \"from\" | \"to\", but received \"${type}\"`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (type === 'to') {\r\n        if (_internalStates.promise) {\r\n          switchM.triggerOperation(() => _internalValues.to)\r\n          _internalStates.promise = false\r\n        }\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'from') {\r\n        if (_internalStates.to) {\r\n          return _internalValues.to\r\n        } else {\r\n          _internalStates.promise = true\r\n          return TERMINATOR\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  return switchM\r\n})\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param transform Function | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const distinctPreviousT = curryN(2, (transform, target) => {\r\n  if (isFunction(transform)) {\r\n    return staticDistinctPreviousT(transform, target)\r\n  } else if (isAtom(transform)) {\r\n    return dynamicDistinctPreviousT(transform, target)\r\n  } else {\r\n    throw (new TypeError('\"transform\" argument of distinctPreviousT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Atom, atom of transform Funtion which will\r\n *                  take a value as input and return a value as distinct compare unit\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicDistinctPreviousT = curryN(2, (transform, target) => {\r\n  if (!isAtom(transform)) {\r\n    throw (new TypeError('\"transform\" argument of dynamicDistinctPreviousT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicDistinctPreviousT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapTransformM = Mutation.ofLiftLeft(prev => ({ type: 'transform', value: prev }))\r\n  const wrappedTransformD = Data.empty()\r\n  pipeAtom(wrapTransformM, wrappedTransformD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const distinctM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { transform: false, target: false, previous: undefined }\r\n    const _internalValues = { transform: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'transform' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"transform\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.transform || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'transform') {\r\n        // change of transform will not trigger target value emittion\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        const prevTransformed = _internalValues.transform(_internalStates.previous)\r\n        const transformed = _internalValues.transform(_internalValues.target)\r\n        if (prevTransformed === transformed) {\r\n          return TERMINATOR\r\n        } else {\r\n          _internalStates.previous = _internalValues.target\r\n          return _internalValues.target\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedTargetD, distinctM)\r\n  pipeAtom(wrappedTransformD, distinctM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(distinctM, outputD)\r\n\r\n  binaryTweenPipeAtom(transform, wrapTransformM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticDistinctPreviousT = curryN(2, (transform, target) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError('\"transform\" argument of staticDistinctPreviousT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicDistinctPreviousT(replayWithLatest(1, Data.of(transform)), target)\r\n})\r\n\r\n/**\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const asIsDistinctPreviousT = distinctPreviousT(v => v)\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param transform Function | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const distinctEverT = curryN(2, (transform, target) => {\r\n  if (isFunction(transform)) {\r\n    return staticDistinctEverT(transform, target)\r\n  } else if (isAtom(transform)) {\r\n    return dynamicDistinctEverT(transform, target)\r\n  } else {\r\n    throw (new TypeError('\"transform\" argument of distinctEverT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param transform Atom, atom of transform Funtion which will\r\n *                  take a value as input and return a value as distinct compare unit\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicDistinctEverT = curryN(2, (transform, target) => {\r\n  if (!isAtom(transform)) {\r\n    throw (new TypeError('\"transform\" argument of dynamicDistinctEverT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicDistinctEverT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapTransformM = Mutation.ofLiftLeft(prev => ({ type: 'transform', value: prev }))\r\n  const wrappedTransformD = Data.empty()\r\n  pipeAtom(wrapTransformM, wrappedTransformD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const distinctM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { transform: false, target: false, history: [] }\r\n    const _internalValues = { transform: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'transform' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in distinctM, expected to be \"transform\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.transform || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'transform') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        const transformed = _internalValues.transform(_internalValues.target)\r\n        const history = _internalStates.history\r\n        if (history.includes(transformed)) {\r\n          return TERMINATOR\r\n        } else {\r\n          history.push(transformed)\r\n          return _internalValues.target\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedTargetD, distinctM)\r\n  pipeAtom(wrappedTransformD, distinctM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(distinctM, outputD)\r\n\r\n  binaryTweenPipeAtom(transform, wrapTransformM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param transform Function\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticDistinctEverT = curryN(2, (transform, target) => {\r\n  if (!isFunction(transform)) {\r\n    throw (new TypeError('\"transform\" argument of staticDistinctEverT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicDistinctEverT(replayWithLatest(1, Data.of(transform)), target)\r\n})\r\n\r\n/**\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const asIsDistinctEverT = distinctEverT(v => v)\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param n Number | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const skipT = curryN(2, (n, target) => {\r\n  if (isNumber(n)) {\r\n    return staticSkipT(n, target)\r\n  } else if (isAtom(n)) {\r\n    return dynamicSkipT(n, target)\r\n  } else {\r\n    throw (new TypeError('\"n\" argument of skipT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param n Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicSkipT = curryN(2, (n, target) => {\r\n  if (!isAtom(n)) {\r\n    throw (new TypeError('\"n\" argument of dynamicSkipT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicSkipT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapNumM = Mutation.ofLiftLeft(prev => ({ type: 'n', value: prev }))\r\n  const wrappedNumD = Data.empty()\r\n  pipeAtom(wrapNumM, wrappedNumD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const skipM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { n: false, target: false, index: -1, skiped: 0 }\r\n    const _internalValues = { n: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'n' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"n\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.n || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'n') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        if (_internalStates.skiped < _internalStates.n) {\r\n          _internalStates.skiped = _internalStates.skiped + 1\r\n          return TERMINATOR\r\n        } else {\r\n          return _internalValues.target\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedNumD, skipM)\r\n  pipeAtom(wrappedTargetD, skipM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(skipM, outputD)\r\n\r\n  binaryTweenPipeAtom(n, wrapNumM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param n Number\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticSkipT = curryN(2, (n, target) => {\r\n  if (!isAtom(n)) {\r\n    throw (new TypeError('\"n\" argument of staticSkipT is expected to be type of \"Number\".'))\r\n  }\r\n  return dynamicSkipT(replayWithLatest(1, Data.of(n)), target)\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param cond Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const skipUntilT = curryN(2, (cond, target) => {\r\n  if (!isAtom(cond)) {\r\n    throw (new TypeError('\"cond\" argument of skipUntilT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of skipUntilT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapCondM = Mutation.ofLiftLeft(prev => ({ type: 'cond', value: prev }))\r\n  const wrappedCondD = Data.empty()\r\n  pipeAtom(wrapCondM, wrappedCondD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const skipM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { cond: false, target: false }\r\n    const _intervalValues = { cond: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'cond' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"cond\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _intervalValues[type] = value\r\n      if (!_internalStates.cond || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'cond') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return _intervalValues.target\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedCondD, skipM)\r\n  pipeAtom(wrappedTargetD, skipM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(skipM, outputD)\r\n\r\n  binaryTweenPipeAtom(cond, wrapCondM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param cond Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const skipWhileT = curryN(2, (cond, target) => {\r\n  if (!isAtom(cond)) {\r\n    throw (new TypeError('\"cond\" argument of skipWhileT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of skipWhileT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapCondM = Mutation.ofLiftLeft(prev => ({ type: 'cond', value: Boolean(prev) }))\r\n  const wrappedCondD = Data.empty()\r\n  pipeAtom(wrapCondM, wrappedCondD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const skipM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { cond: false, target: false }\r\n    const _intervalValues = { cond: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'cond' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"cond\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _intervalValues[type] = value\r\n      if (!_internalStates.cond || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'cond') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return _intervalValues.cond ? TERMINATOR : _intervalValues.target\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedCondD, skipM)\r\n  pipeAtom(wrappedTargetD, skipM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(skipM, outputD)\r\n\r\n  binaryTweenPipeAtom(cond, wrapCondM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param n Number | Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const takeT = curryN(2, (n, target) => {\r\n  if (isNumber(n)) {\r\n    return staticTakeT(n, target)\r\n  } else if (isAtom(n)) {\r\n    return dynamicTakeT(n, target)\r\n  } else {\r\n    throw (new TypeError('\"n\" argument of takeT is expected to be type of \"Number\" or \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param n Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicTakeT = curryN(2, (n, target) => {\r\n  if (!isAtom(n)) {\r\n    throw (new TypeError('\"n\" argument of dynamicTakeT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicTakeT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapNumM = Mutation.ofLiftLeft(prev => ({ type: 'n', value: parseInt(prev) }))\r\n  const wrappedNumD = Data.empty()\r\n  pipeAtom(wrapNumM, wrappedNumD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const takeM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { n: false, target: false, taked: 0 }\r\n    const _internalValues = { n: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'n' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"n\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.n || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'n') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        if (_internalStates.taked < _internalStates.n) {\r\n          _internalStates.taked = _internalStates.taked + 1\r\n          return _internalValues.target\r\n        } else {\r\n          return TERMINATOR\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedNumD, takeM)\r\n  pipeAtom(wrappedTargetD, takeM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(takeM, outputD)\r\n\r\n  binaryTweenPipeAtom(n, wrapNumM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @todo release atom when specified num of value has emited\r\n *\r\n * @param n Number\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticTakeT = curryN(2, (n, target) => {\r\n  return dynamicTakeT(replayWithLatest(1, Data.of(n)), target)\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param cond Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const takeUntilT = curryN(2, (cond, target) => {\r\n  if (!isAtom(cond)) {\r\n    throw (new TypeError('\"cond\" argument of takeUntilT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of takeUntilT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapCondM = Mutation.ofLiftLeft(prev => ({ type: 'cond', value: prev }))\r\n  const wrappedCondD = Data.empty()\r\n  pipeAtom(wrapCondM, wrappedCondD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const takeM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { cond: false, target: false }\r\n    const _intervalValues = { cond: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'cond' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"cond\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _intervalValues[type] = value\r\n      if (_internalStates.cond) {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return _intervalValues.target\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedCondD, takeM)\r\n  pipeAtom(wrappedTargetD, takeM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(takeM, outputD)\r\n\r\n  binaryTweenPipeAtom(cond, wrapCondM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param cond Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const takeWhileT = curryN(2, (cond, target) => {\r\n  if (!isAtom(cond)) {\r\n    throw (new TypeError('\"cond\" argument of takeWhileT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of takeWhileT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapCondM = Mutation.ofLiftLeft(prev => ({ type: 'cond', value: Boolean(prev) }))\r\n  const wrappedCondD = Data.empty()\r\n  pipeAtom(wrapCondM, wrappedCondD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const takeM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { cond: false, target: false }\r\n    const _intervalValues = { cond: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'cond' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received, expected to be \"cond\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _intervalValues[type] = value\r\n      if (!_internalStates.cond || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'cond') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        return _intervalValues.cond ? _intervalValues.target : TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedCondD, takeM)\r\n  pipeAtom(wrappedTargetD, takeM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(takeM, outputD)\r\n\r\n  binaryTweenPipeAtom(cond, wrapCondM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param pred Function | Atom\r\n * @param trueTarget Atom\r\n * @param falseTarget Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const iifT = curryN(4, (pred, trueTarget, falseTarget, target) => {\r\n  if (isFunction(pred)) {\r\n    return staticIifT(pred, trueTarget, falseTarget, target)\r\n  } else if (isAtom(pred)) {\r\n    return dynamicIifT(pred, trueTarget, falseTarget, target)\r\n  } else {\r\n    throw (new TypeError('\"pred\" argument of iifT is expected to be type of \"Function\" | \"Atom\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param pred Atom\r\n * @param trueTarget Atom\r\n * @param falseTarget Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicIifT = curryN(4, (pred, trueTarget, falseTarget, target) => {\r\n  if (!isAtom(pred)) {\r\n    throw (new TypeError('\"pred\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(trueTarget)) {\r\n    throw (new TypeError('\"trueTarget\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(falseTarget)) {\r\n    throw (new TypeError('\"falseTarget\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicFilterT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapPredM = Mutation.ofLiftLeft(prev => ({ type: 'pred', value: prev }))\r\n  const wrappedPredD = Data.empty()\r\n  pipeAtom(wrapPredM, wrappedPredD)\r\n  const wrapTrueTargetM = Mutation.ofLiftLeft(prev => ({ type: 'trueTarget', value: prev }))\r\n  const wrappedTrueTargetD = Data.empty()\r\n  pipeAtom(wrapTrueTargetM, wrappedTrueTargetD)\r\n  const wrapFalseTargetM = Mutation.ofLiftLeft(prev => ({ type: 'falseTarget', value: prev }))\r\n  const wrappedFalseTargetD = Data.empty()\r\n  pipeAtom(wrapFalseTargetM, wrappedFalseTargetD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const filterM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { pred: false, trueTarget: false, falseTarget: false, target: false, index: -1 }\r\n    const _internalValues = { pred: undefined, trueTarget: undefined, falseTarget: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'pred' && type !== 'trueTarget' && type !== 'falseTarget' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in filterM, expected to be \"pred\" | \"trueTarget\" | \"falseTarget\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.pred || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'pred') {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'trueTarget' || type === 'falseTarget') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        _internalStates.index = _internalStates.index + 1\r\n        const predRes = _internalValues.pred(_internalValues.target, _internalStates.index)\r\n        if (predRes) {\r\n          return _internalStates.trueTarget ? _internalValues.trueTarget : TERMINATOR\r\n        } else {\r\n          return _internalStates.falseTarget ? _internalValues.falseTarget : TERMINATOR\r\n        }\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedPredD, filterM)\r\n  pipeAtom(wrappedTrueTargetD, filterM)\r\n  pipeAtom(wrappedFalseTargetD, filterM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(filterM, outputD)\r\n\r\n  binaryTweenPipeAtom(pred, wrapPredM)\r\n  binaryTweenPipeAtom(trueTarget, wrapTrueTargetM)\r\n  binaryTweenPipeAtom(falseTarget, wrapFalseTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param pred Atom\r\n * @param trueTarget Atom\r\n * @param falseTarget Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticIifT = curryN(4, (pred, trueTarget, falseTarget, target) => {\r\n  if (!isFunction(pred)) {\r\n    throw (new TypeError('\"pred\" argument of staticIifT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicIifT(replayWithLatest(1, Data.of(pred)), trueTarget, falseTarget, target)\r\n})\r\n","import { isFunction, isObject, isArray } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param preds Array | Object\r\n * @param cases Array | Object\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const caseT = curryN(3, (preds, cases, target) => {\r\n  if (isObject(preds) && isObject(cases)) {\r\n    return objectCaseT(preds, cases, target)\r\n  } else if (isArray(preds) && isArray(cases)) {\r\n    return arrayCaseT(preds, cases, target)\r\n  } else if ((isObject(preds) && isArray(preds)) || (isArray(preds) && isObject(cases))) {\r\n    throw (new TypeError('\"preds\" & \"cases\" argument of caseT are expected to be the same type.'))\r\n  } else {\r\n    throw (new TypeError('\"preds & \"cases\" argument of caseT are expected to be type of \"Object\" | \"Array\".'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param preds Array, [ Function, Atom ] | [ Atom ]\r\n * @param cases Array, [ Any, Atom ] | [ Atom ]\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const arrayCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isArray(preds)) {\r\n    throw (new TypeError('\"preds\" argument of arrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  if (!isArray(cases)) {\r\n    throw (new TypeError('\"cases\" argument of arrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of arrayCaseT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (preds.some(v => !isAtom(v)) || cases.some(v => !isAtom(v))) {\r\n    return staticArrayCaseT(preds, cases, target)\r\n  } else {\r\n    return dynamicArrayCaseT(preds, cases, target)\r\n  }\r\n})\r\n\r\n/**\r\n * @param preds Array, [ Atom ]\r\n * @param cases Array, [ Atom ]\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicArrayCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isArray(preds)) {\r\n    throw (new TypeError('\"preds\" argument of dynamicArrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  if (!isArray(cases)) {\r\n    throw (new TypeError('\"cases\" argument of dynamicArrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  if (preds.length !== cases.length) {\r\n    throw (new TypeError('Lengths of \"preds\" & \"cases\" argument of arrayCaseT are expected to be equal.'))\r\n  }\r\n  preds.forEach(pred => {\r\n    if (!isAtom(pred)) {\r\n      throw (new TypeError('\"pred\" in \"preds\" argument of dynamicArrayCaseT are expected to be type of \"Atom\".'))\r\n    }\r\n  })\r\n  cases.forEach(item => {\r\n    if (!isAtom(item)) {\r\n      throw (new TypeError('\"case\" in \"cases\" argument of dynamicArrayCaseT are expected to be type of \"Atom\".'))\r\n    }\r\n  })\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of arrayCaseT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapPredMutations = preds.map((pred, idx) => Mutation.ofLiftLeft(prev => ({\r\n    id: idx,\r\n    type: 'pred',\r\n    value: prev\r\n  })))\r\n  const wrapCaseMutations = cases.map((v, idx) => Mutation.ofLiftLeft(prev => ({\r\n    id: idx,\r\n    type: 'case',\r\n    value: prev\r\n  })))\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n\r\n  const wrappedPredDatas = preds.map(() => Data.empty())\r\n  const wrappedCaseDatas = cases.map(() => Data.empty())\r\n  const wrappedTargetD = Data.empty()\r\n\r\n  const caseM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { pred: Array.from({ length: preds.length }), case: Array.from({ length: cases.length }), target: false }\r\n    const _internalValues = { pred: Array.from({ length: preds.length }), case: Array.from({ length: cases.length }), target: undefined }\r\n    return prev => {\r\n      const { id, type, value } = prev\r\n      if (type !== 'pred' && type !== 'case' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in caseM, expected to be \"pred\" | \"case\" | \"target\", but received \"${type}\"`))\r\n      }\r\n      if (type === 'pred' || type === 'case') {\r\n        _internalStates[type][id] = true\r\n        _internalValues[type][id] = value\r\n      }\r\n      if (type === 'target') {\r\n        _internalStates[type] = true\r\n        _internalValues[type] = value\r\n      }\r\n      if (!_internalStates.target || _internalStates.pred.some(v => !v)) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'pred' || type === 'case') {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'target') {\r\n        let matched = false\r\n        let res\r\n        for (let i = 0, len = _internalValues.pred.length; i < len; i++) {\r\n          if (matched) {\r\n            break\r\n          } else {\r\n            if (_internalValues.pred[i](_internalValues.target)) {\r\n              matched = true\r\n              res = _internalStates.case[i] ? _internalValues.case[i] : TERMINATOR\r\n            }\r\n            return matched ? res : TERMINATOR\r\n          }\r\n        }\r\n        return res\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(caseM, outputD)\r\n\r\n  wrapPredMutations.forEach((mutation, idx) => {\r\n    pipeAtom(mutation, wrappedPredDatas[idx], caseM)\r\n    binaryTweenPipeAtom(preds[idx], mutation)\r\n  })\r\n  wrapCaseMutations.forEach((mutation, idx) => {\r\n    pipeAtom(mutation, wrappedCaseDatas[idx], caseM)\r\n    binaryTweenPipeAtom(cases[idx], mutation)\r\n  })\r\n  pipeAtom(wrapTargetM, wrappedTargetD, caseM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param preds Array, [ Function, Atom ]\r\n * @param cases Array, [ Any, Atom ]\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticArrayCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isArray(preds)) {\r\n    throw (new TypeError('\"preds\" argument of staticArrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  if (!isArray(cases)) {\r\n    throw (new TypeError('\"cases\" argument of staticArrayCaseT is expected to be type of \"Array\".'))\r\n  }\r\n  preds.forEach((pred, idx) => {\r\n    if (isFunction(pred)) {\r\n      preds[idx] = replayWithLatest(1, Data.of(pred))\r\n    } else if (isAtom(pred)) {\r\n      // do nothing\r\n    } else {\r\n      throw (new TypeError('\"pred\" in \"preds\" argument of staticArrayCaseT are expected to be type of \"Function\" | \"Atom\".'))\r\n    }\r\n  })\r\n  cases.forEach((item, idx) => {\r\n    if (!isAtom(item)) {\r\n      cases[idx] = replayWithLatest(1, Data.of(item))\r\n    }\r\n  })\r\n  return dynamicArrayCaseT(preds, cases, target)\r\n})\r\n\r\n/**\r\n * @param preds Object, { Function, Atom } | { Atom }\r\n * @param cases Object, { Any, Atom } | { Atom }\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const objectCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isObject(preds)) {\r\n    throw (new TypeError('\"preds\" argument of objectCaseT is expected to be type of  \"Object\".'))\r\n  }\r\n  if (!isObject(cases)) {\r\n    throw (new TypeError('\"cases\" argument of objectCaseT is expected to be type of  \"Object\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of objectCaseT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (Object.values(preds).some(v => !isAtom(v)) || Object.values(cases).some(v => !isAtom(v))) {\r\n    return staticObjectCaseT(preds, cases, target)\r\n  } else {\r\n    return dynamicObjectCaseT(preds, cases, target)\r\n  }\r\n})\r\n\r\n/**\r\n * @param preds Object, { Atom }\r\n * @param cases Object, { Atom }\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicObjectCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isObject(preds)) {\r\n    throw (new TypeError('\"preds\" argument of dynamicObjectCaseT is expected to be type of \"Object\".'))\r\n  }\r\n  if (!isObject(cases)) {\r\n    throw (new TypeError('\"cases\" argument of dynamicObjectCaseT is expected to be type of  \"Object\".'))\r\n  }\r\n  if (new Set([...Object.keys(preds), ...Object.keys(cases)]).size !== Object.keys(preds).length) {\r\n    throw (new TypeError('\"preds\" & \"cases\" argument of dynamicObjectCaseT are expected to have same keys.'))\r\n  }\r\n  Object.values(preds).forEach((item) => {\r\n    if (!isAtom(item)) {\r\n      throw (new TypeError('\"pred\" in \"preds\" argument of dynamicObjectCaseT are expected to be type of \"Atom\".'))\r\n    }\r\n  })\r\n  Object.values(cases).forEach((item) => {\r\n    if (!isAtom(item)) {\r\n      throw (new TypeError('\"case\" in \"cases\" argument of dynamicObjectCaseT are expected to be type of \"Atom\".'))\r\n    }\r\n  })\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of arrayCaseT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapPredMutations = Object.entries(preds).reduce((acc, [key]) => {\r\n    acc[key] = Mutation.ofLiftLeft(prev => ({ key: key, type: 'pred', value: prev }))\r\n    return acc\r\n  }, {})\r\n  const wrapCaseMutations = Object.entries(cases).reduce((acc, [key]) => {\r\n    acc[key] = Mutation.ofLiftLeft(prev => ({ key: key, type: 'case', value: prev }))\r\n    return acc\r\n  }, {})\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n\r\n  const wrappedPredDatas = Object.entries(preds).reduce((acc, [key]) => {\r\n    acc[key] = Data.empty()\r\n    return acc\r\n  }, {})\r\n  const wrappedCaseDatas = Object.entries(cases).reduce((acc, [key]) => {\r\n    acc[key] = Data.empty()\r\n    return acc\r\n  }, {})\r\n  const wrappedTargetD = Data.empty()\r\n\r\n  const caseM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { pred: {}, case: {}, target: false }\r\n    const _internalValues = { pred: {}, case: {}, target: undefined }\r\n    return prev => {\r\n      const { key, type, value } = prev\r\n      if (type !== 'pred' && type !== 'case' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in caseM, expected to be \"pred\" | \"case\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      if (type === 'pred' || type === 'case') {\r\n        _internalStates[type][key] = true\r\n        _internalValues[type][key] = value\r\n      }\r\n      if (type === 'target') {\r\n        _internalStates[type] = true\r\n        _internalValues[type] = value\r\n      }\r\n      if (!_internalStates.target || Object.values(_internalStates.pred).some(v => !v)) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'pred' || type === 'case') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        let matched = false\r\n        let res\r\n        const keys = Object.keys(_internalValues.pred)\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n          const key = keys[i]\r\n          if (matched) {\r\n            break\r\n          } else {\r\n            if (_internalValues.pred[key](_internalValues.target)) {\r\n              matched = true\r\n              res = _internalStates.case[key] ? _internalValues.case[key] : TERMINATOR\r\n            }\r\n            return matched ? res : TERMINATOR\r\n          }\r\n        }\r\n        return res\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n\r\n  pipeAtom(caseM, outputD)\r\n  Object.entries(wrapPredMutations).forEach(([key, mutation]) => {\r\n    pipeAtom(mutation, wrappedPredDatas[key], caseM)\r\n    binaryTweenPipeAtom(preds[key], mutation)\r\n  })\r\n  Object.entries(wrapCaseMutations).forEach(([key, mutation]) => {\r\n    pipeAtom(mutation, wrappedCaseDatas[key], caseM)\r\n    binaryTweenPipeAtom(cases[key], mutation)\r\n  })\r\n  pipeAtom(wrapTargetM, wrappedTargetD, caseM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param preds Object, { Function, Atom }\r\n * @param cases Object, { Any, Atom }\r\n * @parem target Atom\r\n * @return atom Data\r\n */\r\nexport const staticObjectCaseT = curryN(3, (preds, cases, target) => {\r\n  if (!isObject(preds)) {\r\n    throw (new TypeError('\"preds\" argument of staticObjectCaseT is expected to be type of \"Object\".'))\r\n  }\r\n  if (!isObject(cases)) {\r\n    throw (new TypeError('\"cases\" argument of staticObjectCaseT is expected to be type of  \"Object\".'))\r\n  }\r\n  Object.entries(preds).forEach(([key, pred]) => {\r\n    if (isFunction(pred)) {\r\n      preds[key] = replayWithLatest(1, Data.of(pred))\r\n    } else if (isAtom(pred)) {\r\n      // do nothing\r\n    } else {\r\n      throw (new TypeError('\"pred\" in \"preds\" argument of staticObjectCaseT are expected to be type of \"Function\" | \"Atom\".'))\r\n    }\r\n  })\r\n  Object.entries(cases).forEach(([key, item]) => {\r\n    if (!isAtom(item)) {\r\n      cases[key] = replayWithLatest(1, Data.of(item))\r\n    }\r\n  })\r\n  return dynamicObjectCaseT(preds, cases, target)\r\n})\r\n","import { isArray, isObject } from '../../internal.js'\r\nimport { TERMINATOR, isTerminator } from '../meta.js'\r\nimport { Mutation, Data, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param argument Atom | [Atom] | { Atom }\r\n * @return atom Data\r\n */\r\nexport const combineT = (...args) => {\r\n  if (isAtom(args[0]) || isArray(args[0])) {\r\n    return arrayCombineT(...args)\r\n  } else if (isObject(args[0])) {\r\n    return objectCombineT(...args)\r\n  } else {\r\n    throw (new TypeError('Arguments of combineT are expected to be type of Atom | [Atom] | { Atom }.'))\r\n  }\r\n}\r\n\r\n/**\r\n * @param argument Atom | [Atom]\r\n * @return atom Data\r\n */\r\nexport const arrayCombineT = (...args) => {\r\n  let atoms = args[0]\r\n  if (!isArray(atoms)) {\r\n    atoms = args\r\n  }\r\n\r\n  const inputAtoms = atoms.map(atom => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of combineT are expected to be type of \"Atom\".'))\r\n    }\r\n    return atom\r\n  })\r\n\r\n  const length = atoms.length\r\n\r\n  const wrapMutations = Array.from({ length }).map((val, idx) =>\r\n    Mutation.ofLiftLeft((prev) => ({ id: idx, value: prev }))\r\n  )\r\n\r\n  const wrappedDatas = Array.from({ length }).map(() => Data.empty())\r\n\r\n  const combineM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = Array.from({ length })\r\n    const _intervalValues = Array.from({ length })\r\n    return prev => {\r\n      const { id, value } = prev\r\n\r\n      if (isTerminator(value)) return TERMINATOR\r\n\r\n      _internalStates[id] = true\r\n      _intervalValues[id] = value\r\n\r\n      return [..._intervalValues]\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.of(Array.from({ length }))\r\n\r\n  pipeAtom(combineM, outputD)\r\n  wrappedDatas.forEach(data => {\r\n    pipeAtom(data, combineM)\r\n  })\r\n  wrapMutations.forEach((wrapMutation, idx) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[idx])\r\n  })\r\n  inputAtoms.forEach((atom, idx) => {\r\n    binaryTweenPipeAtom(atom, wrapMutations[idx])\r\n  })\r\n\r\n  return outputD\r\n}\r\n\r\n/**\r\n * @param obj Object, { Atom }\r\n * @return atom Data\r\n */\r\nexport const objectCombineT = (obj) => {\r\n  const inputAtoms = Object.entries(obj).reduce((acc, [key, atom]) => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of objectCombineT are expected to be type of \"Atom\".'))\r\n    }\r\n    acc[key] = atom\r\n    return acc\r\n  }, {})\r\n\r\n  const wrapMutations = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Mutation.ofLiftLeft((prev) => ({ key: key, value: prev }))\r\n    return acc\r\n  }, {})\r\n\r\n  const wrappedDatas = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Data.empty()\r\n    return acc\r\n  }, {})\r\n\r\n  const combineM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = false\r\n      return acc\r\n    }, {})\r\n    const _intervalValues = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = undefined\r\n      return acc\r\n    }, {})\r\n    return prev => {\r\n      const { key, value } = prev\r\n\r\n      if (isTerminator(value)) return TERMINATOR\r\n\r\n      _internalStates[key] = true\r\n      _intervalValues[key] = value\r\n\r\n      return { ..._intervalValues }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.of(Object.keys(obj).reduce((acc, key) => {\r\n    acc[key] = undefined\r\n    return acc\r\n  }, {}))\r\n\r\n  pipeAtom(combineM, outputD)\r\n  Object.values(wrappedDatas).forEach(data => {\r\n    pipeAtom(data, combineM)\r\n  })\r\n  Object.entries(wrapMutations).forEach(([key, wrapMutation]) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[key])\r\n  })\r\n  Object.entries(inputAtoms).forEach(([key, atom]) => {\r\n    binaryTweenPipeAtom(atom, wrapMutations[key])\r\n  })\r\n\r\n  return outputD\r\n}\r\n","import { isArray, isObject } from '../../internal.js'\r\nimport { TERMINATOR, isTerminator } from '../meta.js'\r\nimport { Mutation, Data, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param argument Atom | [Atom] | { Atom }\r\n * @return atom Data\r\n */\r\nexport const combineLatestT = (...args) => {\r\n  if (isAtom(args[0]) || isArray(args[0])) {\r\n    return arrayCombineLatestT(...args)\r\n  } else if (isObject(args[0])) {\r\n    return objectCombineLatestT(...args)\r\n  } else {\r\n    throw (new TypeError('Arguments of combineLatestT are expected to be type of Atom | [Atom] | { Atom }.'))\r\n  }\r\n}\r\n\r\n/**\r\n * @param argument Atom | [Atom]\r\n * @return atom Data\r\n */\r\nexport const arrayCombineLatestT = (...args) => {\r\n  let atoms = args[0]\r\n  if (!isArray(atoms)) {\r\n    atoms = args\r\n  }\r\n\r\n  const inputAtoms = atoms.map(atom => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of combineT are expected to be type of \"Atom\".'))\r\n    }\r\n    return atom\r\n  })\r\n\r\n  const length = atoms.length\r\n\r\n  const wrapMutations = Array.from({ length }).map((val, idx) =>\r\n    Mutation.ofLiftLeft((prev) => ({ id: idx, value: prev }))\r\n  )\r\n\r\n  const wrappedDatas = Array.from({ length }).map(() => Data.empty())\r\n\r\n  const combineM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = Array.from({ length })\r\n    const _intervalValues = Array.from({ length })\r\n    return prev => {\r\n      const { id, value } = prev\r\n\r\n      if (isTerminator(value)) return TERMINATOR\r\n\r\n      _internalStates[id] = true\r\n      _intervalValues[id] = value\r\n\r\n      if (_internalStates.every(val => val)) {\r\n        return [..._intervalValues]\r\n      } else {\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n\r\n  pipeAtom(combineM, outputD)\r\n  wrappedDatas.forEach(data => {\r\n    pipeAtom(data, combineM)\r\n  })\r\n  wrapMutations.forEach((wrapMutation, idx) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[idx])\r\n  })\r\n  inputAtoms.forEach((atom, idx) => {\r\n    binaryTweenPipeAtom(atom, wrapMutations[idx])\r\n  })\r\n\r\n  return outputD\r\n}\r\n\r\n/**\r\n * @param obj Object, { Atom }\r\n * @return atom Data\r\n */\r\nexport const objectCombineLatestT = (obj) => {\r\n  const inputAtoms = Object.entries(obj).reduce((acc, [key, atom]) => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of objectCombineLatestT are expected to be type of \"Atom\".'))\r\n    }\r\n    acc[key] = atom\r\n    return acc\r\n  }, {})\r\n\r\n  const wrapMutations = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Mutation.ofLiftLeft((prev) => ({ key: key, value: prev }))\r\n    return acc\r\n  }, {})\r\n\r\n  const wrappedDatas = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Data.empty()\r\n    return acc\r\n  }, {})\r\n\r\n  const combineM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = false\r\n      return acc\r\n    }, {})\r\n    const _intervalValues = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = undefined\r\n      return acc\r\n    }, {})\r\n    return prev => {\r\n      const { key, value } = prev\r\n\r\n      if (isTerminator(value)) return TERMINATOR\r\n\r\n      _internalStates[key] = true\r\n      _intervalValues[key] = value\r\n\r\n      if (Object.values(_internalStates).every(val => val)) {\r\n        return { ..._intervalValues }\r\n      } else {\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n\r\n  pipeAtom(combineM, outputD)\r\n  Object.values(wrappedDatas).forEach(data => {\r\n    pipeAtom(data, combineM)\r\n  })\r\n  Object.entries(wrapMutations).forEach(([key, wrapMutation]) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[key])\r\n  })\r\n  Object.entries(inputAtoms).forEach(([key, atom]) => {\r\n    binaryTweenPipeAtom(atom, wrapMutations[key])\r\n  })\r\n\r\n  return outputD\r\n}\r\n","import { isArray } from '../../internal.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param argument Atom | [Atom]\r\n * @return atom Data\r\n */\r\nexport const mergeT = (...args) => {\r\n  let atoms = args[0]\r\n  if (!isArray(atoms)) {\r\n    atoms = args\r\n  }\r\n\r\n  const inputAtoms = atoms.map(atom => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of mergeT are expected to be type of \"Atom\".'))\r\n    }\r\n    return atom\r\n  })\r\n\r\n  const mergeM = Mutation.ofLiftLeft(prev => prev)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(mergeM, outputD)\r\n\r\n  inputAtoms.forEach(atom => {\r\n    binaryTweenPipeAtom(atom, mergeM)\r\n  })\r\n\r\n  return outputD\r\n}\r\n","import { isArray, isObject } from '../../internal.js'\r\nimport { TERMINATOR, isTerminator } from '../meta.js'\r\nimport { Mutation, Data, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param argument Atom | [Atom] | { Atom }\r\n * @return atom Data\r\n */\r\nexport const zipLatestT = (...args) => {\r\n  if (isAtom(args[0]) || isArray(args[0])) {\r\n    return arrayZipLatestT(...args)\r\n  } else if (isObject(args[0])) {\r\n    return objectZipLatestT(...args)\r\n  } else {\r\n    throw (new TypeError('Arguments of zipLatestT are expected to be type of Atom | [Atom] | { Atom }.'))\r\n  }\r\n}\r\n\r\n/**\r\n * @param argument Atom | [Atom]\r\n * @return atom Data\r\n */\r\nexport const arrayZipLatestT = (...args) => {\r\n  let atoms = args[0]\r\n  if (!isArray(atoms)) {\r\n    atoms = args\r\n  }\r\n\r\n  const inputDatas = atoms.map(atom => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of arrayZipLatestT are expected to be type of \"Atom\".'))\r\n    }\r\n    return atom\r\n  })\r\n\r\n  const wrapMutations = Array.from({ length: atoms.length }).map((val, idx) =>\r\n    Mutation.ofLiftLeft((prev) => ({ id: idx, value: prev }))\r\n  )\r\n\r\n  const wrappedDatas = Array.from({ length: atoms.length }).map(() => Data.empty())\r\n\r\n  const zipM = Mutation.ofLiftLeft((() => {\r\n    const _internalState = Array.from({ length: atoms.length })\r\n    const _intervalValues = Array.from({ length: atoms.length })\r\n    return prev => {\r\n      const { id, value } = prev\r\n      _internalState[id] = true\r\n      _intervalValues[id] = value\r\n      if (_internalState.every(val => val) && _intervalValues.every(val => !isTerminator(val))) {\r\n        _internalState.forEach((_, idx) => { _internalState[idx] = false })\r\n        return [..._intervalValues]\r\n      } else {\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n\r\n  pipeAtom(zipM, outputD)\r\n  wrappedDatas.forEach(data => {\r\n    pipeAtom(data, zipM)\r\n  })\r\n  wrapMutations.forEach((wrapMutation, idx) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[idx])\r\n  })\r\n  inputDatas.forEach((data, idx) => {\r\n    binaryTweenPipeAtom(data, wrapMutations[idx])\r\n  })\r\n\r\n  return outputD\r\n}\r\n\r\n/**\r\n * @param obj Object, { Atom }\r\n * @return atom Data\r\n */\r\nexport const objectZipLatestT = (obj) => {\r\n  const inputDatas = Object.entries(obj).reduce((acc, [key, atom]) => {\r\n    if (!isAtom(atom)) {\r\n      throw (new TypeError('Arguments of objectZipLatestT are expected to be type of \"Atom\".'))\r\n    }\r\n    acc[key] = atom\r\n    return acc\r\n  }, {})\r\n\r\n  const wrapMutations = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Mutation.ofLiftLeft((prev) => ({ key: key, value: prev }))\r\n    return acc\r\n  }, {})\r\n\r\n  const wrappedDatas = Object.entries(obj).reduce((acc, [key]) => {\r\n    acc[key] = Data.empty()\r\n    return acc\r\n  }, {})\r\n\r\n  const zipM = Mutation.ofLiftLeft((() => {\r\n    const _internalState = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = false\r\n      return acc\r\n    }, {})\r\n    const _intervalValues = Object.keys(obj).reduce((acc, key) => {\r\n      acc[key] = undefined\r\n      return acc\r\n    }, {})\r\n    return prev => {\r\n      const { key, value } = prev\r\n      _internalState[key] = true\r\n      _intervalValues[key] = value\r\n      if (Object.values(_internalState).every(val => val) && Object.values(_intervalValues).every(val => !isTerminator(val))) {\r\n        Object.keys(_internalState).forEach(key => {\r\n          _internalState[key] = false\r\n        })\r\n        return { ..._intervalValues }\r\n      } else {\r\n        return TERMINATOR\r\n      }\r\n    }\r\n  })())\r\n\r\n  const outputD = Data.empty()\r\n\r\n  pipeAtom(zipM, outputD)\r\n  Object.values(wrappedDatas).forEach(data => {\r\n    pipeAtom(data, zipM)\r\n  })\r\n  Object.entries(wrapMutations).forEach(([key, wrapMutation]) => {\r\n    pipeAtom(wrapMutation, wrappedDatas[key])\r\n  })\r\n  Object.entries(inputDatas).forEach(([key, data]) => {\r\n    binaryTweenPipeAtom(data, wrapMutations[key])\r\n  })\r\n\r\n  return outputD\r\n}\r\n","import { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param target Atom\r\n * @param source Atom\r\n * @return atom Data\r\n */\r\nexport const withLatestFromT = curryN(2, (target, source) => {\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of withLatestFromT is expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n  if (!isAtom(source)) {\r\n    throw (new TypeError('\"source\" argument of withLatestFromT is expected to be type of \"Mutation\" or \"Data\".'))\r\n  }\r\n\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n  const wrapSourceM = Mutation.ofLiftLeft(prev => ({ type: 'source', value: prev }))\r\n  const wrappedSourceD = Data.empty()\r\n  pipeAtom(wrapSourceM, wrappedSourceD)\r\n\r\n  const withLatestFromM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { target: false, source: false }\r\n    const _internalValues = { target: undefined, source: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'source' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in withLatestFromM, expected to be \"source\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (type === 'target') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'source') {\r\n        return _internalStates.target ? [_internalValues.source, _internalValues.target] : [_internalValues.source]\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedTargetD, withLatestFromM)\r\n  pipeAtom(wrappedSourceD, withLatestFromM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(withLatestFromM, outputD)\r\n\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n  binaryTweenPipeAtom(source, wrapSourceM)\r\n\r\n  return outputD\r\n})\r\n","import { isFunction } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\nimport { TERMINATOR } from '../meta.js'\r\nimport { Data, Mutation, isAtom } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { pipeAtom, binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param effect Function | Atom, takes a effect function that takes\r\n *               an emit function, a target value, and a instantly emit value set function.\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const effectT = curryN(2, (effect, target) => {\r\n  if (isFunction(effect)) {\r\n    return staticEffectT(effect, target)\r\n  } else if (isAtom(effect)) {\r\n    return dynamicEffectT(effect, target)\r\n  } else {\r\n    throw (new TypeError('\"effect\" argument of effectT is expected to be type of \"Function\" or \"Atom\"'))\r\n  }\r\n})\r\n\r\n/**\r\n * @param effect Atom\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const dynamicEffectT = curryN(2, (effect, target) => {\r\n  if (!isAtom(effect)) {\r\n    throw (new TypeError('\"effect\" argument of dynamicEffectT is expected to be type of \"Atom\".'))\r\n  }\r\n  if (!isAtom(target)) {\r\n    throw (new TypeError('\"target\" argument of dynamicEffectT is expected to be type of \"Atom\".'))\r\n  }\r\n\r\n  const wrapEffectM = Mutation.ofLiftLeft(prev => ({ type: 'effect', value: prev }))\r\n  const wrappedEffectD = Data.empty()\r\n  pipeAtom(wrapEffectM, wrappedEffectD)\r\n  const wrapTargetM = Mutation.ofLiftLeft(prev => ({ type: 'target', value: prev }))\r\n  const wrappedTargetD = Data.empty()\r\n  pipeAtom(wrapTargetM, wrappedTargetD)\r\n\r\n  const effectM = Mutation.ofLiftLeft((() => {\r\n    const _internalStates = { effect: false, target: false }\r\n    const _internalValues = { effect: undefined, target: undefined }\r\n    return prev => {\r\n      const { type, value } = prev\r\n      if (type !== 'effect' && type !== 'target') {\r\n        throw (new TypeError(`Unexpected type of wrapped Data received in effectM, expected to be \"effect\" | \"target\", but received \"${type}\".`))\r\n      }\r\n      _internalStates[type] = true\r\n      _internalValues[type] = value\r\n      if (!_internalStates.effect || !_internalStates.target) {\r\n        return TERMINATOR\r\n      }\r\n      if (type === 'effect') {\r\n        return TERMINATOR\r\n      }\r\n      // redundant conditional judgement\r\n      if (type === 'target') {\r\n        let hasSetReturned = false\r\n        let _returned\r\n        const result = _internalValues.effect(\r\n          value => {\r\n            effectM.triggerOperation(() => value)\r\n          },\r\n          _internalValues.target,\r\n          returned => {\r\n            hasSetReturned = true\r\n            _returned = returned\r\n          }\r\n        )\r\n        return hasSetReturned ? _returned : (result || TERMINATOR)\r\n      }\r\n    }\r\n  })())\r\n  pipeAtom(wrappedEffectD, effectM)\r\n  pipeAtom(wrappedTargetD, effectM)\r\n\r\n  const outputD = Data.empty()\r\n  pipeAtom(effectM, outputD)\r\n\r\n  binaryTweenPipeAtom(effect, wrapEffectM)\r\n  binaryTweenPipeAtom(target, wrapTargetM)\r\n\r\n  return outputD\r\n})\r\n\r\n/**\r\n * @param effect Function\r\n * @param target Atom\r\n * @return atom Data\r\n */\r\nexport const staticEffectT = curryN(2, (effect, target) => {\r\n  if (!isFunction(effect)) {\r\n    throw (new TypeError('\"effect\" argument of staticEffectT is expected to be type of \"Function\".'))\r\n  }\r\n  return dynamicEffectT(replayWithLatest(1, Data.of(effect)), target)\r\n})\r\n","import { isNumber } from '../../internal.js'\r\nimport { curryN } from '../../functional.js'\r\n\r\n/**\r\n * @param effect Function\r\n * @param atom Atom\r\n */\r\nexport const tapT = curryN(2, (effect, atom) => {\r\n  effect(atom)\r\n  return atom\r\n})\r\n\r\n/**\r\n * @param name String? \"\"\r\n * @param level String? \"LOG\"(0) | \"INFO\"(1) | \"WARN\"(2) | \"ERROR\"(3)\r\n * @return tap Tache\r\n */\r\nexport const tapValueT = (name = '', level = 0) => tapT(atom => {\r\n  if (isNumber(name)) {\r\n    level = name\r\n    name = ''\r\n  }\r\n  const levelDict = {\r\n    LOG: 'log',\r\n    INFO: 'info',\r\n    WARN: 'warn',\r\n    ERROR: 'error',\r\n    0: 'log',\r\n    1: 'info',\r\n    2: 'warn',\r\n    3: 'error'\r\n  }\r\n  level = levelDict[level]\r\n  const colorDict = {\r\n    log: '#30CFCF', // cyan\r\n    info: '#3030CF', // blue\r\n    warn: '#CF8030', // orange\r\n    error: '#CF3030' // red\r\n  }\r\n  atom.subscribe(({ value }) => {\r\n    let stringified = ''\r\n    try {\r\n      stringified = JSON.stringify(value)\r\n    } catch (e) {\r\n      // do nothing\r\n    }\r\n    console[level](\r\n      `%c ${level.toUpperCase()} %c ${name || 'tapLogValueT'}` + ': %c' + value + '%c',\r\n      `background: ${colorDict[level]}; padding: 1px; border-radius: 3px 0 0 3px; color: #FFFFFF;`,\r\n      'background: #6600FF; padding: 1px; border-radius: 0 0 0 0; color: #FFFFFF;',\r\n      'background: #66FF00; padding: 1px 10px; border-radius: 0 3px 3px 0; color: #000000;',\r\n      'background: transparent; color: #00000;', value, stringified\r\n    )\r\n  })\r\n  return atom\r\n})\r\n","import { isObject, isArray, isFunction } from '../../internal.js'\r\nimport { looseCurryN } from '../../functional.js'\r\nimport { isAtom, Data } from '../atom.js'\r\nimport { replayWithLatest } from '../mediators.js'\r\nimport { binaryTweenPipeAtom } from '../helpers.js'\r\n\r\n/**\r\n * @param { {\r\n *   prepareOptions?: ((options: object) => object),\r\n *   prepareDriverLevelContexts?: (() => object),\r\n *   prepareSingletonLevelContexts?: ((options: object, driverLevelContexts: object) => object),\r\n *   prepareInstance: (options: object, driverLevelContexts: object, singletonLevelContexts: object) => { inputs: object, outputs: object }\r\n * } | function } createOptions\r\n * @return { (options?: {}) => { inputs: object, outputs: object } } Driver\r\n */\r\nexport const createGeneralDriver = (createOptions = {}) => {\r\n  if (!isObject(createOptions) && !isFunction(createOptions)) {\r\n    throw (new TypeError(`\"createOptions\" is expected to be type of \"Object\" | \"Function\", but received \"${typeof createOptions}\".`))\r\n  }\r\n  if (isFunction(createOptions)) {\r\n    createOptions = { prepareSingletonLevelContexts: createOptions }\r\n  }\r\n\r\n  const {\r\n    prepareOptions = options => options,\r\n    prepareDriverLevelContexts = () => ({}),\r\n    prepareSingletonLevelContexts = _ => ({}),\r\n    prepareInstance = (_0, _1, singletonLevelContexts) => ({ ...singletonLevelContexts })\r\n  } = createOptions\r\n\r\n  if (!isFunction(prepareOptions)) {\r\n    throw (new TypeError(`\"prepareOptions\" is expected to be type of \"Function\", but received \"${typeof prepareOptions}\".`))\r\n  }\r\n  if (!isFunction(prepareDriverLevelContexts)) {\r\n    throw (new TypeError(`\"prepareDriverLevelContexts\" is expected to be type of \"Function\", but received \"${typeof prepareDriverLevelContexts}\".`))\r\n  }\r\n  if (!isFunction(prepareSingletonLevelContexts)) {\r\n    throw (new TypeError(`\"prepareSingletonLevelContexts\" is expected to be type of \"Function\", but received \"${typeof prepareSingletonLevelContexts}\".`))\r\n  }\r\n  if (!isFunction(prepareInstance)) {\r\n    throw (new TypeError(`\"prepareInstance\" is expected to be type of \"Function\", but received \"${typeof prepareInstance}\".`))\r\n  }\r\n\r\n  const driverLevelContexts = prepareDriverLevelContexts()\r\n  if (!isObject(driverLevelContexts)) {\r\n    throw (new TypeError(`\"driverLevelContexts\" is expected to be type of \"Object\", but received \"${typeof driverLevelContexts}\"`))\r\n  }\r\n\r\n  /**\r\n   * @param { object? } options In order to clarify the role of each configuration item,\r\n   *                            the configuration is best to be in object format.\r\n   * @return { { inputs: object, outputs: object } } DriverInterfaces\r\n   */\r\n  const driver = (options = {}) => {\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(`\"options\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n    }\r\n\r\n    options = prepareOptions(options)\r\n    if (!isObject(options)) {\r\n      throw (new TypeError(`The returned value of \"prepareOptions\" is expected to be type of \"Object\", but received \"${typeof options}\".`))\r\n    }\r\n\r\n    const singletonLevelContexts = prepareSingletonLevelContexts(options, driverLevelContexts)\r\n    if (!isObject(singletonLevelContexts)) {\r\n      throw (new TypeError(`\"singletonLevelContexts\" is expected to be type of \"Object\", but received \"${typeof singletonLevelContexts}\"`))\r\n    }\r\n\r\n    const { inputs = {}, outputs = {} } = singletonLevelContexts\r\n    if (!isObject(inputs)) {\r\n      throw (new TypeError(`\"inputs\" returned as singletonLevelContexts is expected to be type of \"Object\", but received \"${typeof inputs}\"`))\r\n    }\r\n    if (!isObject(outputs)) {\r\n      throw (new TypeError(`\"outputs\" returned as singletonLevelContexts is expected to be type of \"Object\", but received \"${typeof outputs}\"`))\r\n    }\r\n\r\n    const driverInterfaces = prepareInstance(options, driverLevelContexts, singletonLevelContexts)\r\n\r\n    return driverInterfaces\r\n  }\r\n\r\n  return driver\r\n}\r\n\r\nconst formatInterfaces = interfaces => {\r\n  if (!isObject(interfaces)) {\r\n    throw (new TypeError(`\"interfaces\" is expected to be type of \"Object\", but received \"${typeof interfaces}\"`))\r\n  }\r\n  const { inputs: { ...inputs } = {}, outputs: { ...outputs } = {} } = interfaces\r\n\r\n  if (!isObject(inputs)) {\r\n    throw (new TypeError(`\"inputs\" of interfaces is expected to be type of \"Object\", but received \"${typeof inputs}\"`))\r\n  }\r\n  if (!isObject(outputs)) {\r\n    throw (new TypeError(`\"outputs\" of interfaces is expected to be type of \"Object\", but received \"${typeof outputs}\"`))\r\n  }\r\n\r\n  Object.entries(interfaces).forEach(([key, value]) => {\r\n    if (key !== 'inputs' && key !== 'outputs') {\r\n      inputs[key] = value\r\n    }\r\n  })\r\n\r\n  return { inputs: { ...inputs }, outputs: { ...outputs } }\r\n}\r\n\r\nexport const connectInterfaces = (up, down) => {\r\n  const normalize = value => isAtom(value) ? replayWithLatest(1, value) : replayWithLatest(1, Data.of(value))\r\n\r\n  // The up & down value are expected to be type of Atom,\r\n  //   -> one of the up | down value is required to be type of Atom at least.\r\n  //   -> cause there is no way to get the auto-generated down Atom.\r\n  if (isAtom(up) && !isAtom(down)) {\r\n    if (isArray(down)) {\r\n      down.forEach(i => {\r\n        if (isAtom(i)) {\r\n          binaryTweenPipeAtom(normalize(up), i)\r\n        } else {\r\n          // do nothing\r\n        }\r\n      })\r\n    } else {\r\n      // do nothing\r\n    }\r\n  } else if (isAtom(up) && isAtom(down)) {\r\n    // downstream atom do not need to be replayable\r\n    binaryTweenPipeAtom(normalize(up), down)\r\n  } else if (!isAtom(up) && isAtom(down)) {\r\n    binaryTweenPipeAtom(normalize(up), down)\r\n  } else if (isObject(up) && isObject(down)) {\r\n    Object.entries(up).forEach(([key, value]) => {\r\n      if (down[key]) {\r\n        connectInterfaces(value, down[key])\r\n      }\r\n    })\r\n  } else if (isArray(up) && isArray(down)) {\r\n    up.forEach((value, idx) => {\r\n      if (down[idx]) {\r\n        connectInterfaces(value, down[idx])\r\n      }\r\n    })\r\n  } else {\r\n    throw (new TypeError(\r\n      'The up interfaces & down interfaces are expected to be the type combinations as follows:' +\r\n      ' (Atom, Any) | (Any, Atom) | (Object | Object) | (Array | Array).'\r\n    ))\r\n  }\r\n}\r\n/**\r\n * @param { function } driver\r\n * @param { { } } driverOptions\r\n * @param { { inputs?: object, outputs?: object } } interfaces\r\n * @return { { inputs: object, outputs: object, ... } }\r\n */\r\nexport const useGeneralDriver = looseCurryN(3, (driver, driverOptions, interfaces) => {\r\n  const driverInterfaces = driver(driverOptions)\r\n\r\n  const { inputs: { ...innerInputs } = {}, outputs: { ...innerOutputs } = {}, ...others } = { ...driverInterfaces }\r\n  const { inputs: { ...outerInputs } = {}, outputs: { ...outerOutputs } = {} } = { ...formatInterfaces(interfaces) }\r\n\r\n  connectInterfaces(outerInputs, innerInputs)\r\n  connectInterfaces(innerOutputs, outerOutputs)\r\n\r\n  return { inputs: innerInputs, outputs: innerOutputs, ...others }\r\n})\r\n","import { composeL, applyTo } from './functional.js'\r\n\r\nexport const semantic = {\r\n  equiped: composeL,\r\n  equip: applyTo\r\n}\r\n"],"sourceRoot":""}